(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{20:function(e,t,n){},27:function(e,t,n){e.exports=n(66)},32:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},42:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},55:function(e,t,n){},57:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},66:function(e,t,n){"use strict";n.r(t);var a,r,o,c,l,s=n(0),i=n.n(s),u=n(21),d=n.n(u),m=(n(32),n(3)),p=n(4),f=n(6),E=n(5),v=n(7),h=(n(34),n(71)),g=n(68),b=n(69),y=n(70),O=(n(36),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"content"},i.a.createElement("h1",null,"Requirements"),i.a.createElement("div",{className:"doc"},i.a.createElement("p",null,"This application requires a browser that support the ",i.a.createElement("a",{href:"http://webaudio.github.io/web-midi-api/",target:"_blank",rel:"noopener noreferrer"},"Web MIDI API"),"."),i.a.createElement("p",null,"Currently, only ",i.a.createElement("span",{className:"strong"},"Chrome")," and ",i.a.createElement("span",{className:"strong"},"Opera")," support this standard. This application will therefore ",i.a.createElement("span",{className:"italic"},"not")," work in Firefox, Safari, IE or Edge.")),i.a.createElement("h1",null,"Limitations"),i.a.createElement("div",{className:"doc"},i.a.createElement("p",null,"The current version only allows you to edit the Controls' Steps."),i.a.createElement("p",null,i.a.createElement("i",null,"To be completed..."))),i.a.createElement("h1",null,"FAQ"),i.a.createElement("div",{className:"doc"},i.a.createElement("p",null,i.a.createElement("i",null,"To be completed..."))),i.a.createElement("h1",null,"Contribute"),i.a.createElement("div",{className:"doc"},i.a.createElement("p",null,"This editor is an Open Source project. You are welcome to contribute."),i.a.createElement("p",null,"The source-code is hosted by GitHub: ",i.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"pacer-editor")),i.a.createElement("p",null,"To contribute your bug fixes, new features, etc.: 1) fork the project, 2) create a pull-request.")),i.a.createElement("h1",null,"Thanks"),i.a.createElement("div",{className:"doc"},"Thank you to the Nektar support service for having provided precious informations regarding the SysEx data format of the Pacer.",i.a.createElement("br",null),"This editor would not have been possible without their support."))}}]),t}(s.Component)),N=O,C=n(1),j=n(22),k=function(e){return null===e||void 0===e?"":function(e,t,n){for(var a="",r=n||"0",o=(t||2)-e.length;a.length<o;)a+=r;return a+e}(e.toString(16).toUpperCase(),2)},w=function(e){return null===e||void 0===e?"":Array.from(e).map(function(e){return k(e)}).join(" ")},S=function(e,t){var n=t?e.replace(t,""):e;if(n.length%2>0)return null;if(0===n.length)return null;for(var a=new Uint8Array(n.length/2),r=0;r<n.length/2;r++)a[r]=parseInt(n.substr(2*r,2),16);return a},P=[0,1,119],I=[127],M=1,x=2,D=1,A=(a={},Object(C.a)(a,D,"preset"),Object(C.a)(a,5,"global"),Object(C.a)(a,7,"full backup"),a),T=1,R=13,_=18,B=20,L=27,F=54,G=55,H=126,U=(r={},Object(C.a)(r,T,"name"),Object(C.a)(r,R,"1"),Object(C.a)(r,14,"2"),Object(C.a)(r,15,"3"),Object(C.a)(r,16,"4"),Object(C.a)(r,17,"5"),Object(C.a)(r,_,"6"),Object(C.a)(r,19,"RESERVED"),Object(C.a)(r,B,"A"),Object(C.a)(r,21,"B"),Object(C.a)(r,22,"C"),Object(C.a)(r,23,"D"),Object(C.a)(r,24,"FS 1"),Object(C.a)(r,25,"FS 2"),Object(C.a)(r,26,"FS 3"),Object(C.a)(r,L,"FS 4"),Object(C.a)(r,F,"EXP 1"),Object(C.a)(r,G,"EXP 2"),Object(C.a)(r,H,"MIDI configuration"),Object(C.a)(r,127,"ALL"),r),W=[20,21,22,23],V=[13,14,15,16,17,18],z=[24,25,26,27],Y=[54,55],q=97,K=(o={},Object(C.a)(o,0,"CC"),Object(C.a)(o,3,"NRPN C"),Object(C.a)(o,4,"NRPN F"),Object(C.a)(o,1,"PITCH"),Object(C.a)(o,2,"AT CHAN"),Object(C.a)(o,126,"DAW FUNC"),Object(C.a)(o,q,"CTRL_OFF"),Object(C.a)(o,71,"CC TOGGLE"),Object(C.a)(o,64,"CC"),Object(C.a)(o,72,"CC STEP"),Object(C.a)(o,67,"NOTE"),Object(C.a)(o,68,"NOTE TOGGLE"),Object(C.a)(o,69,"PRG BANK"),Object(C.a)(o,70,"PRG STEP"),Object(C.a)(o,87,"NRPN COARSE"),Object(C.a)(o,88,"NRPN FINE"),Object(C.a)(o,85,"MMC"),Object(C.a)(o,89,"RELAY"),Object(C.a)(o,98,"PRESET SELECT"),Object(C.a)(o,86,"PRESET INC DEC"),Object(C.a)(o,99,"STEP SELECT"),Object(C.a)(o,100,"STEP INC DEC"),Object(C.a)(o,18,"CC"),Object(C.a)(o,17,"CC REL"),Object(C.a)(o,21,"NRPN C"),Object(C.a)(o,22,"NRPN F"),Object(C.a)(o,19,"PITCH"),Object(C.a)(o,20,"AT CHAN"),Object(C.a)(o,16,"PRG"),Object(C.a)(o,23,"PRESET SEL"),Object(C.a)(o,24,"STEP SEL"),Object(C.a)(o,101,"CC"),o),J=(c={},Object(C.a)(c,0,"MIDI CC"),Object(C.a)(c,3,"MIDI NRPN Coarse"),Object(C.a)(c,4,"MIDI NRPN Fine"),Object(C.a)(c,1,"Pitch Bend"),Object(C.a)(c,2,"AT CHAN"),Object(C.a)(c,126,"DAW FUNC"),Object(C.a)(c,q,"CTRL_OFF"),Object(C.a)(c,71,"MIDI CC Toggle"),Object(C.a)(c,64,"CC"),Object(C.a)(c,72,"CC STEP"),Object(C.a)(c,67,"MIDI Note"),Object(C.a)(c,68,"MIDI Note Toggle"),Object(C.a)(c,69,"PRG BANK"),Object(C.a)(c,70,"PRG STEP"),Object(C.a)(c,87,"MIDI NRPN Coarse"),Object(C.a)(c,88,"MIDI NRPN Fine"),Object(C.a)(c,85,"MMC"),Object(C.a)(c,89,"RELAY"),Object(C.a)(c,98,"PRESET SELECT"),Object(C.a)(c,86,"PRESET INC DEC"),Object(C.a)(c,99,"STEP SELECT"),Object(C.a)(c,100,"STEP INC DEC"),Object(C.a)(c,18,"CC"),Object(C.a)(c,17,"CC REL"),Object(C.a)(c,21,"MIDI NRPN Coarse"),Object(C.a)(c,22,"MIDI NRPN Fine"),Object(C.a)(c,19,"Pitch Bend"),Object(C.a)(c,20,"AT CHAN"),Object(C.a)(c,16,"PRG"),Object(C.a)(c,23,"PRESET SEL"),Object(C.a)(c,24,"STEP SEL"),Object(C.a)(c,101,"CC"),c),X={0:"Off",1:"1A Pink",2:"1B Dim Pink",3:"2A Red",4:"2B Dim Red",5:"3A Orange",6:"3B Dim Orange",7:"4A Amber",8:"4B Dim Amber",9:"5A Yellow",10:"5B Dim Yellow",11:"6A Lime",12:"6B Dim Lime",13:"7A Green",14:"7B Dim Green",15:"8A Teal",16:"8B Dim Teal",17:"9A Blue",18:"9B Dim Blue",19:"10A Lavender",20:"10B Dim Lavender",21:"11A Purple",22:"11B Dim Purple",23:"12A White",24:"12B Dim White"},Q=96,$=(l={},Object(C.a)(l,0,"All"),Object(C.a)(l,1,"External Step Select"),Object(C.a)(l,2,"Sequence"),l);function Z(e){return null===e||void 0===e||0===e.length?128:128-Uint8Array.from(e).reduce(function(e,t){return e+t})%128}function ee(e,t){var n=[x,D,e,t],a=Z(n);return n.push(a),I.concat(n)}var te=240,ne=247,ae=4,re=5,oe=6,ce=7,le=8;function se(e){return e&&"object"===typeof e&&!Array.isArray(e)}function ie(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var r=n.shift();if(se(e)&&se(r))for(var o in r)se(r[o])?(e[o]||Object.assign(e,Object(C.a)({},o,{})),ie(e[o],r[o])):Object.assign(e,Object(C.a)({},o,r[o]));return ie.apply(void 0,[e].concat(n))}function ue(e){return e[0]===te&&e[e.byteLength-1]===ne}function de(e){var t,n={},a=e[ae],r=e[re],o=e[oe],c=e[ce];switch(a){case M:case x:break;default:return console.warn("parseSysexMessage: invalid command (".concat(k(a),")")),null}if(!(r in A))return console.warn("parseSysexMessage: invalid target",k(r),r,A),null;if(n[r]={},o>=25&&o<=126&&console.warn("parseSysexMessage: invalid/ignored idx",o),n[r][o]={},!(c in U))return console.warn("parseSysexMessage: invalid/ignored object",k(c)),null;if(c===T)t="name";else if(c>=R&&c<=_||c>=B&&c<=L||c>=F&&c<=G)t="control";else{if(c!==H)return console.warn("parseSysexMessage: invalid obj",c),null;t="midi"}if(console.log("".concat(A[r]," ").concat(k(o)," : ").concat(U[c]," ").concat(t)),"control"===t){n[r][o].controls=Object(C.a)({},c,{steps:{}});var l=e[le];if(l>=1&&l<=36)if(e.length>le+22){var s=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]],active:e[22]}}}(e.slice(le,le+23));n[r][o].controls[c].steps[s.index]=s.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),w(e));else if(l===Q){console.log("parseSysexMessage: CONTROL MODE");var i=function(e){return{control_mode:e[1]}}(e.slice(le,e.length-1));n[r][o].controls[c]=ie(n[r][o].controls[c],i)}else if(l>=64&&l<=87){console.log("parseSysexMessage: LED");var u=function(e){console.log("getControlLED",w(e));for(var t,n,a,r={steps:{}},o=0;o<e.length;){var c=e[o];switch(0===o&&(a=""+((c-64)/4+1),console.log("getControlLED: [".concat(k(c),"], step ").concat(a))),a in r.steps||(r.steps[a]={}),c){case 64:case 68:case 72:case 76:case 80:case 84:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_midi_ctrl=n;break;case 65:case 69:case 73:case 77:case 81:case 85:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_active_color=n;break;case 66:case 70:case 74:case 78:case 82:case 86:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_inactive_color=n;break;case 67:case 71:case 75:case 79:case 83:case 87:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_num=n;break;case 127:o=e.length;break;default:o++}}return console.log("getControlLED",r),r}(e.slice(le,e.length-1));n[r][o].controls[c]=ie(n[r][o].controls[c],u)}else{if(127!==l)return console.warn("parseSysexMessage: unknown element: ".concat(k(l))),null;console.log("parseSysexMessage: ALL")}}return n}function me(e){if(console.log("parseSysexDump",w(e)),null===e)return null;for(var t={},n=0;!((n=e.indexOf(te,n))<0);){n++;var a=e.indexOf(ne,n),r=Array.from(e.slice(n,n+3)).map(function(e){return k(e)}).join(" ");if(r!==j.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: file does not contain a Nektar Pacer patch",n,a,r,"-",w(e)),null;if(127!==e[n+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(e[n+1+3])),null;var o=de(e.slice(n,a));o&&ie(t,o)}return t}function pe(e,t,n){var a=function(e,t,n){console.log("buildControlStepSysex(".concat(e,", ").concat(t,", ...)"));for(var a=[],r=Object.keys(n),o=0;o<r.length;o++){var c=r[o],l=n[c];if(l.changed){var s=[M,D,e,t];s.push(6*(c-1)+1,1,l.channel,0),s.push(6*(c-1)+2,1,l.msg_type,0),s.push(6*(c-1)+3,1,l.data[0],0),s.push(6*(c-1)+4,1,l.data[1],0),s.push(6*(c-1)+5,1,l.data[2],0),s.push(6*(c-1)+6,1,l.active),s.push(Z(s)),a.push(I.concat(s))}}return a}(e,t,n[1][e].controls[t].steps);return n[1][e].controls[t].changed&&a.push(function(e,t,n){console.log("buildControlStepMode(".concat(e,", ").concat(t,", ...)"));var a=[M,D,e,t,Q,1,n];return a.push(Z(a)),I.concat(a)}(e,t,n[1][e].controls[t].control_mode)),a}var fe=n(9),Ee=n.n(fe);function ve(e){var t=Ee.a.inputs.find(function(t){return t.id===e});return t||Ee.a.outputs.find(function(t){return t.id===e})}function he(e){return Ee.a.outputs.find(function(t){return t.id===e})}n(38);var ge=n(12),be=(n(20),n(14)),ye=function(e){return null===e.midis?null:i.a.createElement("div",null)},Oe=function(e){var t=e.obj,n=e.config;return null===n||void 0===n?null:i.a.createElement("div",{className:"dump-control"},i.a.createElement("table",null,i.a.createElement("tbody",null,i.a.createElement("tr",null,i.a.createElement("td",{colSpan:7,className:"name"},U[t])),Object.keys(n.steps).map(function(e){return i.a.createElement("tr",{key:"".concat(t,".").concat(e)},i.a.createElement("td",null,"step ",e),i.a.createElement("td",null,"ch. ",k(n.steps[e].channel)),i.a.createElement("td",null,"msg ",k(n.steps[e].msg_type)),i.a.createElement("td",null,K[n.steps[e].msg_type]),i.a.createElement("td",null,w(n.steps[e].data)),i.a.createElement("td",null,67===n.steps[e].msg_type?be.a(n.steps[e].data[0],!0):"  "),i.a.createElement("td",null,"active ",n.steps[e].active))}))))},Ne=function(e){var t=e.controls;return null===t||void 0===t?null:i.a.createElement("div",{className:"dump-controls"},Object.keys(t).map(function(e){return i.a.createElement(Oe,{key:e,obj:e,config:t[e]})}))},Ce=function(e){var t=e.index,n=e.data;return null===n||void 0===n?null:i.a.createElement("div",null,i.a.createElement("h2",null,"Preset ",function(e){if(0===e)return"CUR";var t=Math.floor((e-1)/6),n=(e-1)%6+1;return String.fromCharCode(t+65)+n.toString()}(parseInt(t,10))," (#",t,")"),i.a.createElement(Ne,{controls:n.controls}),i.a.createElement(ye,{controls:n.controls}))},je=function(e){var t=e.presets;return null===t||void 0===t?null:i.a.createElement("div",null,Object.keys(t).map(function(e){return i.a.createElement(Ce,{key:e,index:e,data:t[e]})}))},ke=function(e){var t=e.data;return i.a.createElement("div",{className:"dump code"},t&&i.a.createElement(je,{presets:t[D]}))},we=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={inputs:[],outputs:[],input:null,output:null},n.connectInput=function(e){e&&(e.hasListener("midimessage","all",n.props.onMidiInputEvent)?console.warn("Midi.connectInput: sysex messages on all channels listener already connected"):(console.log("Midi.connectInput: add listener for sysex messages on all channels"),e.addListener("midimessage","all",n.props.onMidiInputEvent)))},n.disconnectInput=function(e){e&&(e.removeListener(),console.log("disconnectInput: input ".concat(e.id," disconnected")))},n.connectOutput=function(e){e&&(n.setState({output:e.id}),console.log("connectOutput: input ".concat(e.id," connected")),n.props.setOutput&&n.props.setOutput(e.id))},n.disconnectOutput=function(){n.setState({output:null}),console.log("disconnectInput: output disconnected"),n.props.setOutput&&n.props.setOutput(null)},n.autoConnectInput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectInput: autoConnect ".concat(n.props.autoConnect),n.state.inputs),null===n.state.input){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.inputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectInput: port ".concat(c.name," ").concat(c.id)),"input"===c.type&&c.name.match(n.props.autoConnect)){console.log("Midi.autoConnectInput: connect ".concat(c.name)),n.setState({input:c.id}),n.connectInput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectInput: autoConnect skipped, already connected")},n.autoConnectOutput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectOutput: autoConnect ".concat(n.props.autoConnect)),null===n.state.output){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.outputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectOutput: port ".concat(c.name," ").concat(c.id)),"output"===c.type&&c.name.match(n.props.autoConnect)){console.log("Midi.autoConnectOutput: autoConnect: auto-connect ".concat(c.name)),n.connectOutput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectOutput: autoConnect skipped, already connected")},n.registerInputs=function(){console.log("Midi.registerInputs"),n.setState({inputs:fe.inputs},function(){return n.autoConnectInput()})},n.registerOutputs=function(){console.log("Midi.registerOutputs"),n.setState({outputs:fe.outputs},function(){return n.autoConnectOutput()})},n.unRegisterInputs=function(){console.log("Midi.registerInputs"),n.disconnectInput(ve(n.state.input)),n.setState({inputs:[],input:null})},n.unRegisterOutputs=function(){console.log("Midi.registerOutputs"),n.setState({outputs:[],output:null})},n.handleMidiConnectEvent=function(e){console.group("Midi: handleMidiConnectEvent: ".concat(e.port.type," ").concat(e.type,": ").concat(e.port.name),e),"input"===e.port.type&&(console.log("Midi: call registerInputs"),n.registerInputs()),"output"===e.port.type&&(console.log("Midi: call registerOutputs"),n.registerOutputs()),console.groupEnd()},n.togglePort=function(e){var t;if("input"===ve(e).type){console.log("toggle input");var a=n.state.input;n.state.input&&n.disconnectInput(ve(n.state.input)),e!==a&&n.connectInput((t=e,Ee.a.inputs.find(function(e){return e.id===t}))),n.setState({input:e===a?null:e})}else console.log("toggle output"),n.setState({output:e===n.state.output?null:e})},n.midiOn=function(e){e?console.warn("Midi.midiOn: WebMidi could not be enabled.",e):(console.log("Midi.midiOn: WebMidi enabled"),fe.addListener("connected",n.handleMidiConnectEvent),fe.addListener("disconnected",n.handleMidiConnectEvent))},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){console.log("Midi: component did mount: WebMidi.enabled=".concat(fe.enabled)),fe.enabled?(console.log("Midi: component did mount: already enabled, register ports"),this.registerInputs(),this.registerOutputs()):(console.log("Midi: component did mount: Calling WebMidi.enable"),fe.enable(this.midiOn,!0))}},{key:"componentWillUnmount",value:function(){console.log("Midi: component will unmount: unregister ports"),this.unRegisterInputs(),this.unRegisterOutputs()}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputs,a=t.outputs;return 0===n.length&&0===a.length?i.a.createElement("div",{className:this.props.className},this.props.children):i.a.createElement("div",{className:this.props.className},n.map(function(t){return e.props.inputRenderer(t,t.id===e.state.input,e.togglePort)}),a.map(function(t){return e.props.outputRenderer(t,t.id===e.state.output,e.togglePort)}))}}]),t}(s.Component),Se=(n(42),n(23)),Pe=n.n(Se),Ie=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props.port,t=this.props.selected,n=this.props.clickHandler;return i.a.createElement("div",{key:e.id,className:t?"port ".concat(e.type," enabled"):"port ".concat(e.type)},i.a.createElement("div",{className:"port-type"},"input"===e.type?"IN":"OUT"),i.a.createElement("div",{className:"port-name"},e.name," "),i.a.createElement("div",{className:"port-switch"},i.a.createElement(Pe.a,{onChange:function(){return n(e.id)},checked:t,className:"react-switch",id:"normal-switch",height:20,width:42})))}}]),t}(s.Component),Me=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,data:null,messages:[function(e){var t=[x,D,e],n=Z(t);return t.push(n),I.concat(t)}(5),ee(5,13)],customMessage:""},n.updateCustomMessage=function(e){for(var t=(e.target.value.match(/[0-9a-fA-F]+/g)||[]).join(""),a="",r=0;r<t.length;r++)r>0&&r%2===0&&(a+=" "),a+=t[r];n.setState({customMessage:a})},n.sendCustomMessage=function(){var e=Array.from(S(n.state.customMessage,/ /g));e&&e.length>0&&(e.push(Z(e)),n.sendSysex(I.concat(e)))},n.handleMidiInputEvent=function(e){console.log("TestSender.handleMidiInputEvent",e,e.data),ue(e.data)?(console.log("TestSender.handleMidiInputEvent: update state"),n.setState(Object(ge.a)(function(t){t.data=ie(t.data||{},me(e.data))}))):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:i.a.createElement(Ie,{key:e.id,port:e,selected:t,clickHandler:n})},n.setOutput=function(e){console.log("Page.setOutput ".concat(e)),n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=he(n.state.output);t?n.setState({data:null},function(){return t.sendSysex(P,e)}):console.warn("send: output ".concat(n.state.output," not found"))}},n.sendMessage=function(e){n.sendSysex(e)},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.messages,r=t.customMessage,o=Z(S(r,/ /g));return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-row step-1"},i.a.createElement("div",{className:"background"},"Connect"),i.a.createElement("div",{className:"content-row-header"},"1"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},i.a.createElement(we,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,setOutput:this.setOutput,className:"sub-header"}))),i.a.createElement("div",{className:"content-row step-2"},i.a.createElement("div",{className:"background"},"Send"),i.a.createElement("div",{className:"content-row-header"},"2"),i.a.createElement("div",{className:"content-row-content"},i.a.createElement("h2",null,"Test messages:"),i.a.createElement("div",null,a.map(function(t,n){return i.a.createElement("div",{key:n,className:"send-message"},i.a.createElement("button",{onClick:function(){return e.sendMessage(t)}},"send"),i.a.createElement("span",{className:"code light"},w(P.concat(t.slice(0,1)))," "),i.a.createElement("span",{className:"code"},w(t.slice(1,-1))," "),i.a.createElement("span",{className:"code light"}," ",w(t.slice(-1))))})),i.a.createElement("h2",null,"Custom message:"),i.a.createElement("div",null,i.a.createElement("div",{className:"send-message"},i.a.createElement("button",{onClick:this.sendCustomMessage,disabled:0===r.length},"send"),i.a.createElement("span",{className:"code light"},w(P)," ",w(I)," "),i.a.createElement("input",{type:"text",className:"code",size:"30",value:r,placeholder:"hex digits only",onChange:this.updateCustomMessage}),i.a.createElement("span",{className:"code light"}," ",k(o)))))),i.a.createElement("div",{className:"content-row step-3"},i.a.createElement("div",{className:"background"},"Receive"),i.a.createElement("div",{className:"content-row-header"},"3"),i.a.createElement("div",{className:"content-row-content"},i.a.createElement("h2",null,"Response:"),i.a.createElement("div",{className:"message code"},i.a.createElement(ke,{data:n}))))),i.a.createElement("div",{className:"help"},i.a.createElement("h2",null,"Help")))}}]),t}(s.Component),xe=n(13),De=n.n(xe),Ae=n(15),Te=(n(47),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return i.a.createElement("div",{className:a?"selected":"",onClick:function(){return r(n)}},t)}),Re=function(e){var t=e.currentPreset,n=e.onClick;return i.a.createElement("div",{className:"preset-selectors"},["A","B","C","D"].map(function(e){return i.a.createElement(s.Fragment,{key:e},Array.from(Array(6).keys()).map(function(a){var r,o=e+(a+1),c="CUR"===(r=o)?0:6*(r.charCodeAt(0)-65)+parseInt(r[1],10);return i.a.createElement(Te,{name:o,id:c,selected:c===t,onClick:n,key:c})}))}))},_e=(n(49),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return i.a.createElement("div",{className:a?"selected":"",onClick:function(){return r(n)}},i.a.createElement("div",{className:"name"},t))}),Be=function(e){var t=e.currentControl,n=e.onClick;return i.a.createElement("div",{className:"controls"},z.map(function(e){return i.a.createElement(_e,{key:e,name:U[e],id:e,selected:e===t,onClick:n})}),Y.map(function(e){return i.a.createElement(_e,{key:e,name:U[e],id:e,selected:e===t,onClick:n})}),i.a.createElement("div",{className:"no-control"},"\xa0"),W.map(function(e){return i.a.createElement(_e,{key:e,name:U[e],id:e,selected:e===t,onClick:n})}),i.a.createElement("div",{className:"no-control"},"\xa0"),V.map(function(e){return i.a.createElement(_e,{key:e,name:U[e],id:e,selected:e===t,onClick:n})}))},Le=(n(51),function(e){var t=e.current_value,n=e.onChange;return i.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},i.a.createElement("option",{value:"0"},"0"),i.a.createElement("option",{value:"1"},"1"))}),Fe=function(e){var t=e.current_value,n=e.onChange;return i.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},Object.keys(X).map(function(e){return i.a.createElement("option",{key:e,value:e},X[e])}))},Ge=function(e){var t=e.current_value,n=e.onChange;return i.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},i.a.createElement("option",{value:"0"},"default"),i.a.createElement("option",{value:"1"},"bottom"),i.a.createElement("option",{value:"2"},"middle"),i.a.createElement("option",{value:"3"},"top"))},He=function(e){var t=e.note,n=e.onChange;return console.log("MidiNote ".concat(t),typeof t),i.a.createElement("select",{onChange:function(e){return n(e.target.value)},defaultValue:t},Array.from(Array(127).keys()).map(function(e){var t=be.a(e,!0);return i.a.createElement("option",{key:e,value:e},t)}))},Ue=function(e){var t,n,a,r=e.index,o=e.config,c=e.updateCallback;return o.msg_type===q?i.a.createElement(s.Fragment,null,i.a.createElement("div",null,"step ",r,":"),i.a.createElement("div",null,i.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},Object.keys(J).map(function(e){return i.a.createElement("option",{key:e,value:e},J[e])}))),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null),i.a.createElement("div",null)):(67===o.msg_type?(t=i.a.createElement(He,{note:o.data[0],onChange:function(e){return c("data",0,e)}}),n=i.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=""):(t=i.a.createElement("input",{type:"text",value:o.data[0],onChange:function(e){return c("data",0,e.target.value)}}),n=i.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=i.a.createElement("input",{type:"text",value:o.data[2],onChange:function(e){return c("data",2,e.target.value)}})),i.a.createElement(s.Fragment,null,i.a.createElement("div",null,"step ",r,":"),i.a.createElement("div",null,i.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},Object.keys(J).map(function(e){return i.a.createElement("option",{key:e,value:e},J[e])}))),i.a.createElement("div",null,t),i.a.createElement("div",null,n),i.a.createElement("div",null,a),i.a.createElement("div",null,i.a.createElement(Fe,{current_value:o.led_active_color,onChange:function(e){return c("led_active_color",null,e)}})),i.a.createElement("div",null,i.a.createElement(Fe,{current_value:o.led_inactive_color,onChange:function(e){return c("led_inactive_color",null,e)}})),i.a.createElement("div",null,i.a.createElement(Ge,{current_value:o.led_num,onChange:function(e){return c("led_num",null,e)}})),i.a.createElement("div",null,i.a.createElement(Le,{current_value:o.led_midi_ctrl,onChange:function(e){return c("led_midi_ctrl",null,e)}})),i.a.createElement("div",null,i.a.createElement("select",{onChange:function(e){return c("channel",null,e.target.value)},defaultValue:o.channel},Array.from(Array(16).keys()).map(function(e){return i.a.createElement("option",{key:e,value:e},e)})))))},We=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onStepUpdate=function(e,t,a,r){console.log("ControlStepsEditor.onStepUpdate",e,t,a,r),n.props.onUpdate(e,t,a,r)},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.props.steps;return console.log("ControlStepsEditor.render",t),i.a.createElement("div",{className:"steps"},i.a.createElement("div",null),i.a.createElement("div",{className:"step-col-header"},"Type"),i.a.createElement("div",{className:"step-col-header"},"Data 1"),i.a.createElement("div",{className:"step-col-header"},"Data 2"),i.a.createElement("div",{className:"step-col-header"},"Data 3"),i.a.createElement("div",{className:"step-col-header"},"LED On"),i.a.createElement("div",{className:"step-col-header"},"LED Off"),i.a.createElement("div",{className:"step-col-header"},"LED Num"),i.a.createElement("div",{className:"step-col-header"},"LED MIDI"),i.a.createElement("div",{className:"step-col-header"},"MIDI Ch."),Object.keys(t).map(function(n){return i.a.createElement(Ue,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onStepUpdate(n,t,a,r)}})}))}}]),t}(s.Component),Ve=n(18),ze=(n(55),n(57),function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this;return i.a.createElement("div",{className:"control-mode"},"Control mode:",i.a.createElement("select",{onChange:function(t){return e.props.onUpdate(t.target.value)},defaultValue:this.props.mode},Object.keys($).map(function(e){return i.a.createElement("option",{key:e,value:e},$[e])})))}}]),t}(s.Component)),Ye=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,presetIndex:"",controlId:"",changed:!1,data:null},n.onDrop=function(e){console.log("drop",e),n.readFiles(e)},n.selectPreset=function(e){console.log("selectPreset ".concat(e)),n.setState({presetIndex:e}),e&&n.state.controlId&&n.sendSysex(ee(e,n.state.controlId))},n.selectControl=function(e){console.log("selectControl ".concat(e)),n.setState({controlId:e}),n.state.presetIndex&&e&&n.sendSysex(ee(n.state.presetIndex,e))},n.updateControlStep=function(e,t,a,r,o){console.log("Presets.updateControlStep",e,t,r,o);var c=parseInt(o,10);n.setState(Object(ge.a)(function(n){"data"===a?n.data[1][n.presetIndex].controls[e].steps[t].data[r]=c:n.data[1][n.presetIndex].controls[e].steps[t][a]=c,"msg_type"===a&&(console.log("msg_type",a,o),c===q?(console.log("set active 0"),n.data[1][n.presetIndex].controls[e].steps[t].active=0):(console.log("set active 1"),n.data[1][n.presetIndex].controls[e].steps[t].active=1)),n.data[1][n.presetIndex].controls[e].steps[t].changed=!0,n.changed=!0}))},n.updateControlMode=function(e,t){console.log("Presets.updateControlMode",e,t);var a=parseInt(t,10);n.setState(Object(ge.a)(function(t){t.data[1][t.presetIndex].controls[e].control_mode=a,t.data[1][t.presetIndex].controls[e].changed=!0,t.changed=!0}))},n.handleMidiInputEvent=function(e){console.log("Presets.handleMidiInputEvent",e,e.data),ue(e.data)?n.setState(Object(ge.a)(function(t){t.data=ie(t.data||{},me(e.data))})):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:i.a.createElement(Ie,{key:e.id,port:e,selected:t,clickHandler:n})},n.setOutput=function(e){console.log("Page.setOutput ".concat(e)),n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=he(n.state.output);t?n.setState({data:null},function(){return t.sendSysex(P,e)}):console.warn("send: output ".concat(n.state.output," not found"))}},n.updatePacer=function(e){var t=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;n.sendSysex(l)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"readFiles",value:function(){var e=Object(Ae.a)(De.a.mark(function e(t){var n=this;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Ae.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=10;break;case 4:return e.t0=Uint8Array,e.next=7,new Response(t).arrayBuffer();case 7:e.t1=e.sent,ue(a=new e.t0(e.t1))?n.setState(Object(ge.a)(function(e){e.data=me(a);var t=Object.keys(e.data[1])[0],n=Object.keys(e.data[1][t].controls)[0];e.presetIndex=parseInt(t,10),e.controlId=parseInt(n,10)})):console.log("readFiles: not a sysfile",w(a.slice(0,5)));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.presetIndex,a=t.controlId,r=t.data,o=t.changed,c=!1;r&&(c=!0,"1"in r||(console.log("Presets: invalid data",r),c=!1),!c||n in r[1]||(console.log("Presets: preset ".concat(n," not found in data")),c=!1),!c||"controls"in r[1][n]||(console.log("Presets: controls not found in data"),c=!1),!c||a in r[1][n].controls||(console.log("Presets: control ".concat(a," not found in data")),c=!1),!c||"steps"in r[1][n].controls[a]||(console.log("Presets: steps not found in data"),c=!1)),c=c&&6===Object.keys(r[1][n].controls[a].steps).length;var l=[];return c&&(l=pe(n,a,r)),console.log("Presets.render",c,n,a),i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-row step-1"},i.a.createElement("div",{className:"background"},"Connect"),i.a.createElement("div",{className:"content-row-header"},"1"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},i.a.createElement(we,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,setOutput:this.setOutput,className:"sub-header"},i.a.createElement("div",null,"Please connect your Pacer to your computer.")))),i.a.createElement("div",{className:"content-row step-2"},i.a.createElement("div",{className:"background"},"Select"),i.a.createElement("div",{className:"content-row-header"},"2"),i.a.createElement("div",{className:"content-row-content"},i.a.createElement("h2",null,"Choose the preset and the control to view/edit:"),i.a.createElement("div",{className:"selectors"},i.a.createElement(Re,{currentPreset:n,onClick:this.selectPreset}),n&&i.a.createElement(Be,{currentControl:a,onClick:this.selectControl})))),i.a.createElement("div",{className:"content-row step-3"},i.a.createElement("div",{className:"background"},"Edit"),i.a.createElement("div",{className:"content-row-header"},"3"),i.a.createElement("div",{className:"content-row-content"},c&&i.a.createElement(s.Fragment,null,i.a.createElement("h2",null,"Edit the selected control:"),i.a.createElement(We,{controlId:a,steps:r[1][n].controls[a].steps,onUpdate:function(t,n,r,o){return e.updateControlStep(a,t,n,r,o)}}),i.a.createElement(ze,{controlId:a,mode:r[1][n].controls[a].control_mode,onUpdate:function(t){return e.updateControlMode(a,t)}})))),i.a.createElement("div",{className:"content-row step-4"},i.a.createElement("div",{className:"background"},"Write"),i.a.createElement("div",{className:"content-row-header"},"4"),i.a.createElement("div",{className:"content-row-content"},o&&i.a.createElement(s.Fragment,null,i.a.createElement("h2",null,"Send the updated config to the Pacer:"),i.a.createElement("div",{className:"actions"},i.a.createElement("button",{onClick:function(){return e.updatePacer(l)}},"Update Pacer"))))),i.a.createElement("div",null,c&&i.a.createElement("div",{className:"debug"},i.a.createElement("h4",null,"[Debug] update message to send to Pacer:"),i.a.createElement("div",{className:"message-to-send"},l.map(function(e,t){return i.a.createElement("div",{key:t,className:"code"},w(e))}))),r&&i.a.createElement("div",{className:"debug"},i.a.createElement("h4",null,"[Debug] sysex data:"),i.a.createElement("pre",null,JSON.stringify(r,null,4))))),i.a.createElement("div",{className:"help"},i.a.createElement(Ve.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here",i.a.createElement("br",null),"or click to open the file dialog")))}}]),t}(s.Component),qe=n(26),Ke={128:"Note Off",144:"Note On",160:"AfterTouch",176:"Control Change",192:"Program Change",208:"Channel Pressure",224:"Pitch Wheel"},Je={0:"Bank Select (coarse)",1:"Modulation Wheel (coarse)",2:"Breath controller (coarse)",4:"Foot Pedal (coarse)",5:"Portamento Time (coarse)",6:"Data Entry (coarse)",7:"Volume (coarse)",8:"Balance (coarse)",10:"Pan position (coarse)",11:"Expression (coarse)",12:"Effect Control 1 (coarse)",13:"Effect Control 2 (coarse)",16:"General Purpose Slider 1",17:"General Purpose Slider 2",18:"General Purpose Slider 3",19:"General Purpose Slider 4",32:"Bank Select (fine)",33:"Modulation Wheel (fine)",34:"Breath controller (fine)",36:"Foot Pedal (fine)",37:"Portamento Time (fine)",38:"Data Entry (fine)",39:"Volume (fine)",40:"Balance (fine)",42:"Pan position (fine)",43:"Expression (fine)",44:"Effect Control 1 (fine)",45:"Effect Control 2 (fine)",64:"Hold Pedal (on/off)",65:"Portamento (on/off)",66:"Sustenuto Pedal (on/off)",67:"Soft Pedal (on/off)",68:"Legato Pedal (on/off)",69:"Hold 2 Pedal (on/off)",70:"Sound Variation",71:"Sound Timbre",72:"Sound Release Time",73:"Sound Attack Time",74:"Sound Brightness",75:"Sound Control 6",76:"Sound Control 7",77:"Sound Control 8",78:"Sound Control 9",79:"Sound Control 10",80:"General Purpose Button 1 (on/off)",81:"General Purpose Button 2 (on/off)",82:"General Purpose Button 3 (on/off)",83:"General Purpose Button 4 (on/off)",91:"Effects Level",92:"Tremulo Level",93:"Chorus Level",94:"Celeste Level",95:"Phaser Level",96:"Data Button increment",97:"Data Button decrement",98:"Non-registered Parameter (fine)",99:"Non-registered Parameter (coarse)",100:"Registered Parameter (fine)",101:"Registered Parameter (coarse)",120:"All Sound Off",121:"All Controllers Off",122:"Local Keyboard (on/off)",123:"All Notes Off",124:"Omni Mode Off",125:"Omni Mode On",126:"Mono Operation",127:"Poly Operation"},Xe=(n(59),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={messages:[]},n.handleMidiInputEvent=function(e){n.setState(Object(ge.a)(function(t){t.messages.unshift(e.data)>20&&t.messages.pop()}))},n.renderPort=function(e,t,n){return void 0===e||null===e?null:i.a.createElement(Ie,{key:e.id,port:e,selected:t,clickHandler:n})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"content"},i.a.createElement("div",null,i.a.createElement("div",{className:"content-row step-1"},i.a.createElement("div",{className:"background"},"Connect"),i.a.createElement("div",{className:"content-row-header"},"1"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},i.a.createElement(we,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/.*/i,onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"},i.a.createElement("div",null,"Please connect your Pacer or any other MIDI device to your computer.")))),i.a.createElement("div",{className:"content-row step-2"},i.a.createElement("div",{className:"background"},"View"),i.a.createElement("div",{className:"content-row-header"},"2"),i.a.createElement("div",{className:"content-row-content"},i.a.createElement("div",null,i.a.createElement("h2",null,"MIDI messages"),i.a.createElement("p",null,"The messages are displayed in reverse chronological order (the most recent on top). Only the last 20 messages are displayed.")),i.a.createElement("div",{className:"messages"},this.state.messages.map(function(e,t){var n=Object(qe.a)(e),a="",r="";switch(n.messageCode){case 128:case 144:a=be.a(n.key),r="velocity: ".concat(n.velocity);break;case 160:break;case 176:a=Je[n.controlNumber],r=n.controlValue;break;case 192:a="program: ".concat(n.program),r="";break;case 208:break;case 224:a="bend: ".concat(n.pitchBend),r="multiplier: ".concat(n.pitchBendMultiplier)}return i.a.createElement("div",null,i.a.createElement("span",{className:"code"},"[",w(e),"]"),i.a.createElement("span",{className:"msg-channel"},"Channel ",n.channel),i.a.createElement("span",{className:"msg-name"},Ke[n.messageCode]),i.a.createElement("span",{className:"msg-data"},a),i.a.createElement("span",{className:"msg-data"},r))})))))),i.a.createElement("div",{className:"help"},i.a.createElement("h2",null,"Help")))}}]),t}(s.Component)),Qe=(n(61),function(){return i.a.createElement("div",{className:"footer"},i.a.createElement("div",{className:"gh"},i.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"Source code available on GitHub"),i.a.createElement("a",{"aria-label":"Homepage",title:"project on github",href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},i.a.createElement("svg",{height:"24",viewBox:"0 0 16 16",version:"1.1",width:"24","aria-hidden":"true"},i.a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})))),i.a.createElement("div",null,i.a.createElement("p",null,"\u201cNektar Technology\u201d, the logo and all other Nektar Technology product, technology or service names and logos are trademarks or registered trademarks of Nektar Technology, Inc."),i.a.createElement("p",null,"This web site is not endorsed by, directly affiliated with, maintained, or sponsored by Nektar Technology. This web site is published under ",i.a.createElement("a",{href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"_blank",rel:"noopener noreferrer"},"GNU General Public License v3"))))}),$e=function(e){function t(){return Object(m.a)(this,t),Object(f.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-row step-1"},i.a.createElement("div",{className:"background"},"Connect"),i.a.createElement("div",{className:"content-row-header"},"1"),i.a.createElement("div",{className:"content-row-content"})),i.a.createElement("div",{className:"content-row step-2"},i.a.createElement("div",{className:"background"},"Select"),i.a.createElement("div",{className:"content-row-header"},"2"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},i.a.createElement("h2",null,"Sorry, this feature is not implemented yet."))),i.a.createElement("div",{className:"content-row step-3"},i.a.createElement("div",{className:"background"},"Edit"),i.a.createElement("div",{className:"content-row-header"},"3"),i.a.createElement("div",{className:"content-row-content"})),i.a.createElement("div",{className:"content-row step-4"},i.a.createElement("div",{className:"background"},"Write"),i.a.createElement("div",{className:"content-row-header"},"4"),i.a.createElement("div",{className:"content-row-content"}))),i.a.createElement("div",{className:"help"},i.a.createElement("h2",null,"Help")))}}]),t}(s.Component),Ze=(n(63),function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},n.onDrop=function(e){console.log("drop",e),n.props.onBusy(!0),n.readFiles(e)},n.handleMidiInputEvent=function(e){console.log("DumpDecoder.handleMidiInputEvent",e,e.data),ue(e.data)?(console.log("DumpDecoder.handleMidiInputEvent: data is SysEx"),n.setState(Object(ge.a)(function(t){t.data=ie(t.data||{},me(e.data))}))):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:i.a.createElement(Ie,{key:e.id,port:e,selected:t,clickHandler:n})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"readFiles",value:function(){var e=Object(Ae.a)(De.a.mark(function e(t){var n=this;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Ae.a)(De.a.mark(function e(t){var a;return De.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=10;break;case 4:return e.t0=Uint8Array,e.next=7,new Response(t).arrayBuffer();case 7:e.t1=e.sent,ue(a=new e.t0(e.t1))?n.setState(Object(ge.a)(function(e){e.data=ie(e.data||{},me(a)),n.props.onBusy(!1)})):console.log("readFiles: not a sysfile",w(a.slice(0,5)));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data;return console.log("DumpDecoder.render",this.props),i.a.createElement("div",{className:"wrapper"},i.a.createElement("div",{className:"content"},i.a.createElement("div",{className:"content-row step-1"},i.a.createElement("div",{className:"background"},"Connect"),i.a.createElement("div",{className:"content-row-header"},"1"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},i.a.createElement(we,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"},i.a.createElement("div",null,"Please connect your Pacer to your computer.")))),i.a.createElement("div",{className:"content-row step-2"},i.a.createElement("div",{className:"background"},"Get dump"),i.a.createElement("div",{className:"content-row-header"},"2"),i.a.createElement("div",{className:"content-row-content row-middle-aligned"},"Send a dump from your Pacer or drop a binary sysex file onto the drop zone on the right.")),i.a.createElement("div",{className:"content-row step-3"},i.a.createElement("div",{className:"background"},"Decode"),i.a.createElement("div",{className:"content-row-header"},"3"),i.a.createElement("div",{className:"content-row-content"},i.a.createElement(ke,{data:e})))),i.a.createElement("div",{className:"help"},i.a.createElement(Ve.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here",i.a.createElement("br",null),"or click to open the file dialog")))}}]),t}(s.Component)),et=function(e){var t=e.label,n=e.to,a=e.activeOnlyWhenExact;return i.a.createElement(h.a,{path:n,exact:a,children:function(e){var a=e.match;return i.a.createElement("span",{className:a?"header-link active":"header-link"},i.a.createElement(g.a,{to:n},t))}})},tt=function(e){function t(){var e,n;Object(m.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(f.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={busy:!1},n.onBusy=function(e){n.setState({busy:e})},n}return Object(v.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this,t=this.state.busy;return i.a.createElement(b.a,null,i.a.createElement("div",{className:"app"},i.a.createElement("header",{className:"header"},i.a.createElement(et,{activeOnlyWhenExact:!0,to:"/",label:"Home"}),i.a.createElement(et,{to:"/presets",label:"Presets"}),i.a.createElement(et,{to:"/global",label:"Global config"}),i.a.createElement(et,{to:"/monitor",label:"MIDI monitor"}),i.a.createElement(et,{to:"/dumpdecoder",label:"Dump decoder"}),i.a.createElement(et,{to:"/testsender",label:"Debug"}),i.a.createElement("div",{className:"spacer"}),t&&i.a.createElement("div",{className:"busy"},"busy")),i.a.createElement(y.a,null,i.a.createElement(h.a,{exact:!0,path:"/",render:function(e){return i.a.createElement(N,null)}}),i.a.createElement(h.a,{path:"/presets",render:function(t){return i.a.createElement(Ye,{onBusy:e.onBusy})}}),i.a.createElement(h.a,{path:"/global",render:function(t){return i.a.createElement($e,{onBusy:e.onBusy})}}),i.a.createElement(h.a,{path:"/monitor",render:function(t){return i.a.createElement(Xe,{onBusy:e.onBusy})}}),i.a.createElement(h.a,{path:"/dumpdecoder",render:function(t){return i.a.createElement(Ze,{onBusy:e.onBusy})}}),i.a.createElement(h.a,{path:"/testsender",render:function(t){return i.a.createElement(Me,{onBusy:e.onBusy})}})),i.a.createElement(Qe,null)))}}]),t}(s.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function nt(){}console.log=nt,console.warn=nt,console.error=nt,d.a.render(i.a.createElement(tt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.74c1626c.chunk.js.map