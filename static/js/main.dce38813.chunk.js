(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){e.exports=n(73)},34:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},40:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},62:function(e,t,n){},64:function(e,t,n){},66:function(e,t,n){},68:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a,r,o,c,l,s,i,u,d=n(0),m=n.n(d),p=n(23),f=n.n(p),h=(n(34),n(3)),g=n(4),v=n(6),E=n(5),y=n(7),b=(n(36),n(78)),O=n(75),j=n(76),N=n(77),C=(n(38),function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"content home full-width"},m.a.createElement("h1",null,"Requirements"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"This application requires a browser that support the ",m.a.createElement("a",{href:"http://webaudio.github.io/web-midi-api/",target:"_blank",rel:"noopener noreferrer"},"Web MIDI API"),"."),m.a.createElement("p",null,"Currently, only ",m.a.createElement("span",{className:"strong"},"Chrome")," and ",m.a.createElement("span",{className:"strong"},"Opera")," support this standard. This application will therefore ",m.a.createElement("span",{className:"italic"},"not")," work in Firefox, Safari, IE or Edge.")),m.a.createElement("h1",null,"Limitations"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"The current version of this editor isn't able to edit the Global configuration of the Pacer."),m.a.createElement("p",null,"This editor does not offer patches management either.")),m.a.createElement("h1",null,"Usage"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"Make sure your Pacer is connected to your computer and switched-on."),m.a.createElement("p",null,"On the upper right corner of the editor, check the MIDI settings."),m.a.createElement("p",null,'You need to enable the input and output ports labeled "PACER MIDI 1":'),m.a.createElement("img",{src:"help-03b.png",alt:""}),m.a.createElement("p",{className:"strong"},"Editing presets"),m.a.createElement("p",null,"The preset #0 is the ",m.a.createElement("span",{className:"italic"},"current")," preset. When you edit preset #0 your changes are immediately applied."),m.a.createElement("p",null,"When you edit any other presets, your changes will only be applied when you load this preset."),m.a.createElement("p",{className:"strong"},"In case of problem"),m.a.createElement("ol",null,m.a.createElement("li",null,"Restart your Pacer"),m.a.createElement("li",null,"Reload the editor"))),m.a.createElement("h1",null,"MIDI in your browser"),m.a.createElement("div",{className:"doc"},m.a.createElement("div",null,m.a.createElement("p",null,"You need to allow your browser to use your MIDI device:"),m.a.createElement("img",{src:"help-01.png",alt:""})),m.a.createElement("div",null,m.a.createElement("p",null,"In case you didn't allow the use of MIDI device and want to change that, you can right-click on the URL icon and change the setting:"),m.a.createElement("img",{src:"help-02.png",alt:""}))),m.a.createElement("h1",null,"FAQ"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,m.a.createElement("i",null,"To be completed..."))),m.a.createElement("h1",null,"Contribute"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"This editor is an Open Source project. You are welcome to contribute."),m.a.createElement("p",null,"The source-code is hosted by GitHub: ",m.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"pacer-editor")),m.a.createElement("p",null,"To contribute your bug fixes, new features, etc.: 1) fork the project, 2) create a pull-request.")),m.a.createElement("h1",null,"Thanks"),m.a.createElement("div",{className:"doc"},"Thank you to the Nektar support service for having provided precious informations regarding the SysEx data format of the Pacer. This editor would not have been possible without their support."))}}]),t}(d.Component)),w=n(1),I=n(24),k=function(e){return null===e||void 0===e?"":function(e,t,n){for(var a="",r=n||"0",o=(t||2)-e.length;a.length<o;)a+=r;return a+e}(e.toString(16).toUpperCase(),2)},S=function(e){return null===e||void 0===e?"":Array.from(e).map(function(e){return k(e)}).join(" ")},M=function(e,t){var n=t?e.replace(t,""):e;if(n.length%2>0)return null;if(0===n.length)return null;for(var a=new Uint8Array(n.length/2),r=0;r<n.length/2;r++)a[r]=parseInt(n.substr(2*r,2),16);return a};function P(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({key:n,value:e[n]});return t.sort(function(e,t){return e.value.localeCompare(t.value)}),t}var x=[0,1,119],D=[127],B=1,_=2,A=1,T=(a={},Object(w.a)(a,A,"preset"),Object(w.a)(a,5,"global"),Object(w.a)(a,7,"full backup"),a),R=1,F=13,L=18,U=20,G=27,W=54,H=55,V=126,z=127,Y=(r={},Object(w.a)(r,R,"name"),Object(w.a)(r,F,"1"),Object(w.a)(r,14,"2"),Object(w.a)(r,15,"3"),Object(w.a)(r,16,"4"),Object(w.a)(r,17,"5"),Object(w.a)(r,L,"6"),Object(w.a)(r,19,"RESERVED"),Object(w.a)(r,U,"A"),Object(w.a)(r,21,"B"),Object(w.a)(r,22,"C"),Object(w.a)(r,23,"D"),Object(w.a)(r,24,"FS 1"),Object(w.a)(r,25,"FS 2"),Object(w.a)(r,26,"FS 3"),Object(w.a)(r,G,"FS 4"),Object(w.a)(r,W,"EXP 1"),Object(w.a)(r,H,"EXP 2"),Object(w.a)(r,V,"MIDI configuration"),Object(w.a)(r,z,"ALL"),r),q={1:"Preset Name",13:"Stompswitch 1",14:"Stompswitch 2",15:"Stompswitch 3",16:"Stompswitch 4",17:"Stompswitch 5",18:"Stompswitch 6",19:"RESERVED",20:"Stompswitch A",21:"Stompswitch B",22:"Stompswitch C",23:"Stompswitch D",24:"Footswitch 1",25:"Footswitch  2",26:"Footswitch  3",27:"Footswitch  4",54:"Expression Pedal 1",55:"Expression Pedal 2",126:"MIDI configuration",127:"ALL"},K=[20,21,22,23],J=[13,14,15,16,17,18],X=[24,25,26,27],Q=[54,55],$=97,Z=(o={},Object(w.a)(o,0,"CC"),Object(w.a)(o,3,"NRPN C"),Object(w.a)(o,4,"NRPN F"),Object(w.a)(o,1,"PITCH"),Object(w.a)(o,2,"AT CHAN"),Object(w.a)(o,126,"DAW FUNC"),Object(w.a)(o,$,"CTRL_OFF"),Object(w.a)(o,71,"CC TOGGLE"),Object(w.a)(o,64,"CC"),Object(w.a)(o,72,"CC STEP"),Object(w.a)(o,67,"NOTE"),Object(w.a)(o,68,"NOTE TOGGLE"),Object(w.a)(o,69,"PRG BANK"),Object(w.a)(o,70,"PRG STEP"),Object(w.a)(o,87,"NRPN COARSE"),Object(w.a)(o,88,"NRPN FINE"),Object(w.a)(o,85,"MMC"),Object(w.a)(o,89,"RELAY"),Object(w.a)(o,98,"PRESET SELECT"),Object(w.a)(o,86,"PRESET INC DEC"),Object(w.a)(o,99,"STEP SELECT"),Object(w.a)(o,100,"STEP INC DEC"),Object(w.a)(o,18,"CC"),Object(w.a)(o,17,"CC REL"),Object(w.a)(o,21,"NRPN C"),Object(w.a)(o,22,"NRPN F"),Object(w.a)(o,19,"PITCH"),Object(w.a)(o,20,"AT CHAN"),Object(w.a)(o,16,"PRG"),Object(w.a)(o,23,"PRESET SEL"),Object(w.a)(o,24,"STEP SEL"),Object(w.a)(o,101,"CC"),o),ee=(c={},Object(w.a)(c,$,"OFF"),Object(w.a)(c,71,"CC Toggle"),Object(w.a)(c,64,"CC Trigger"),Object(w.a)(c,72,"CC Step"),Object(w.a)(c,67,"Note"),Object(w.a)(c,68,"Note Toggle"),Object(w.a)(c,69,"Program & Bank"),Object(w.a)(c,70,"Program Step"),Object(w.a)(c,87,"NRPN Coarse"),Object(w.a)(c,88,"NRPN Fine"),Object(w.a)(c,85,"MIDI Machine Control"),Object(w.a)(c,89,"Relay Outputs"),Object(w.a)(c,98,"Preset Select"),Object(w.a)(c,86,"Preset Inc/Dec"),Object(w.a)(c,99,"Step Select"),Object(w.a)(c,100,"Step Inc/Dec"),c),te=P(ee),ne=(l={},Object(w.a)(l,18,"CC"),Object(w.a)(l,17,"CC REL"),Object(w.a)(l,21,"NRPN Coarse"),Object(w.a)(l,22,"NRPN Fine"),Object(w.a)(l,19,"Pitch Bend"),Object(w.a)(l,20,"AT Chan."),Object(w.a)(l,16,"Program"),Object(w.a)(l,23,"Preset Sel"),Object(w.a)(l,24,"Step Sel"),P((s={},Object(w.a)(s,101,"Load CC"),Object(w.a)(s,67,"MIDI Note"),Object(w.a)(s,69,"Program & Bank"),Object(w.a)(s,87,"NRPN Coarse"),Object(w.a)(s,88,"NRPN Fine"),Object(w.a)(s,85,"MIDI Machine Control"),Object(w.a)(s,89,"Relay Outputs"),Object(w.a)(s,126,"DAW Func."),Object(w.a)(s,$,"OFF"),s))),ae=(i={},Object(w.a)(i,0,["","",""]),Object(w.a)(i,3,["","",""]),Object(w.a)(i,4,["","",""]),Object(w.a)(i,1,["","",""]),Object(w.a)(i,2,["","",""]),Object(w.a)(i,126,["function","not used","not used"]),Object(w.a)(i,$,["","",""]),Object(w.a)(i,71,["controller","value 1","value 2"]),Object(w.a)(i,64,["controller","down","up"]),Object(w.a)(i,72,["controller","start","end"]),Object(w.a)(i,67,["note","velocity","not used"]),Object(w.a)(i,68,["note","velocity","not used"]),Object(w.a)(i,69,["program","bank LSB","bank MSB"]),Object(w.a)(i,70,["not used","start","end"]),Object(w.a)(i,87,["value","NRPN LSB","NRPN MSB"]),Object(w.a)(i,88,["value","NRPN LSB","NRPN MSB"]),Object(w.a)(i,85,["device","command","not used"]),Object(w.a)(i,89,["mode","relay #","not used"]),Object(w.a)(i,98,["preset","not used","not used"]),Object(w.a)(i,86,["inc/dec","not used","not used"]),Object(w.a)(i,99,["target","step","not used"]),Object(w.a)(i,100,["target","inc/dec","not used"]),Object(w.a)(i,18,["","",""]),Object(w.a)(i,17,["","",""]),Object(w.a)(i,21,["","",""]),Object(w.a)(i,22,["","",""]),Object(w.a)(i,19,["","",""]),Object(w.a)(i,20,["","",""]),Object(w.a)(i,16,["","",""]),Object(w.a)(i,23,["","",""]),Object(w.a)(i,24,["","",""]),Object(w.a)(i,101,["controller","value","not used"]),i),re={0:"Off",1:"1A Pink",2:"1B Dim Pink",3:"2A Red",4:"2B Dim Red",5:"3A Orange",6:"3B Dim Orange",7:"4A Amber",8:"4B Dim Amber",9:"5A Yellow",10:"5B Dim Yellow",11:"6A Lime",12:"6B Dim Lime",13:"7A Green",14:"7B Dim Green",15:"8A Teal",16:"8B Dim Teal",17:"9A Blue",18:"9B Dim Blue",19:"10A Lavender",20:"10B Dim Lavender",21:"11A Purple",22:"11B Dim Purple",23:"12A White",24:"12B Dim White"},oe=96,ce=(u={},Object(w.a)(u,0,"All"),Object(w.a)(u,1,"External Step Select"),Object(w.a)(u,2,"Sequence"),u),le=240,se=247,ie=4,ue=5,de=6,me=7,pe=8;function fe(e){return e&&"object"===typeof e&&!Array.isArray(e)}function he(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var r=n.shift();if(fe(e)&&fe(r))for(var o in r)fe(r[o])?(e[o]||Object.assign(e,Object(w.a)({},o,{})),he(e[o],r[o])):Object.assign(e,Object(w.a)({},o,r[o]));return he.apply(void 0,[e].concat(n))}function ge(e){return e[0]===le&&e[e.byteLength-1]===se}function ve(e){var t,n={},a=e[ie],r=e[ue],o=e[de],c=e[me];switch(a){case B:case _:break;default:return console.warn("parseSysexMessage: invalid command (".concat(k(a),")")),null}if(!(r in T))return console.warn("parseSysexMessage: invalid target",k(r),r,T),null;if(n[r]={},n[r][o]={},!(c in Y))return null;if(c===R)t="name";else if(c>=F&&c<=L||c>=U&&c<=G||c>=W&&c<=H)t="control";else{if(c!==V)return console.warn("parseSysexMessage: invalid obj",c),null;t="midi"}if("name"===t&&(n[r][o].name=function(e){var t=e[1];return String.fromCharCode.apply(null,e.slice(2,2+t))}(e.slice(pe))),"control"===t){n[r][o].controls=Object(w.a)({},c,{steps:{}});var l=e[pe];if(l>=1&&l<=36)if(e.length>pe+22){var s=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]],active:e[22]}}}(e.slice(pe,pe+23));n[r][o].controls[c].steps[s.index]=s.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),S(e));else if(l===oe){var i=function(e){return{control_mode:e[1]}}(e.slice(pe,e.length-1));n[r][o].controls[c]=he(n[r][o].controls[c],i)}else if(l>=64&&l<=87){var u=function(e){for(var t,n,a,r={steps:{}},o=0;o<e.length;){var c=e[o];switch(0===o&&(a=""+((c-64)/4+1)),a in r.steps||(r.steps[a]={}),c){case 64:case 68:case 72:case 76:case 80:case 84:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_midi_ctrl=n;break;case 65:case 69:case 73:case 77:case 81:case 85:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_active_color=n;break;case 66:case 70:case 74:case 78:case 82:case 86:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_inactive_color=n;break;case 67:case 71:case 75:case 79:case 83:case 87:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_num=n;break;case 127:o=e.length;break;default:o++}}return r}(e.slice(pe,e.length-1));n[r][o].controls[c]=he(n[r][o].controls[c],u)}else if(127!==l)return console.warn("parseSysexMessage: unknown element: ".concat(k(l))),null}if("midi"===t){n[r][o].midi={};var d=e[pe];if(!(d>=1&&d<=96))return console.warn("parseSysexMessage: unknown element: ".concat(k(d))),null;if(e.length>pe+19){var m=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]]}}}(e.slice(pe,pe+20));n[r][o].midi[m.index]=m.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),S(e))}return n}function Ee(e){if(null===e)return null;for(var t={},n=0;!((n=e.indexOf(le,n))<0);){n++;var a=e.indexOf(se,n),r=Array.from(e.slice(n,n+3)).map(function(e){return k(e)}).join(" ");if(r!==I.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: file does not contain a Nektar Pacer patch",n,a,r,"-",S(e)),null;if(127!==e[n+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(e[n+1+3])),null;var o=ve(e.slice(n,a));o&&he(t,o)}return t}function ye(e){return null===e||void 0===e||0===e.length?128:128-Uint8Array.from(e).reduce(function(e,t){return e+t})%128}function be(e){var t=[_,A,e,z],n=ye(t);return t.push(n),D.concat(t)}function Oe(e,t,n){var a=function(e,t,n){for(var a=[],r=Object.keys(n),o=0;o<r.length;o++){var c=r[o],l=n[c];if(l.changed){var s=[B,A,e,t];s.push(6*(c-1)+1,1,l.channel,0),s.push(6*(c-1)+2,1,l.msg_type,0),s.push(6*(c-1)+3,1,l.data[0],0),s.push(6*(c-1)+4,1,l.data[1],0),s.push(6*(c-1)+5,1,l.data[2],0),s.push(6*(c-1)+6,1,l.active),s.push(4*(c-1)+64,1,l.led_midi_ctrl,0),s.push(4*(c-1)+65,1,l.led_active_color,0),s.push(4*(c-1)+66,1,l.led_inactive_color,0),s.push(4*(c-1)+67,1,l.led_num,0),s.push(ye(s)),a.push(D.concat(s))}}return a}(e,t,n[A][e].controls[t].steps);return n[A][e].controls[t].changed&&a.push(function(e,t,n){var a=[B,A,e,t,oe,1,n];return a.push(ye(a)),D.concat(a)}(e,t,n[A][e].controls[t].control_mode)),a}function je(e,t){if(!t[A][e].changed)return null;var n=[B,A,e,R,0],a=t[A][e].name;n.push(a.length);for(var r=0;r<a.length;r++)n.push(a.charCodeAt(r));return n.push(ye(n)),D.concat(n)}function Ne(e,t){return function(e,t){for(var n=[],a=Object.keys(t),r=0;r<a.length;r++){var o=a[r],c=t[o];if(c.changed){var l=[B,A,e,V];l.push(6*(o-1)+1,1,c.channel,0),l.push(6*(o-1)+2,1,c.msg_type,0),l.push(6*(o-1)+3,1,c.data[0],0),l.push(6*(o-1)+4,1,c.data[1],0),l.push(6*(o-1)+5,1,c.data[2],0),l.push(6*(o-1)+6,1,c.active),l.push(ye(l)),n.push(D.concat(l))}}return n}(e,t[A][e].midi)}var Ce=n(9),we=n.n(Ce);function Ie(e){var t=we.a.inputs.find(function(t){return t.id===e});return t||we.a.outputs.find(function(t){return t.id===e})}function ke(e){return we.a.inputs.find(function(t){return t.id===e})}function Se(e){return we.a.outputs.find(function(t){return t.id===e})}function Me(e){var t=ke(e);return t?t.name:null}function Pe(e){var t=Se(e);return t?t.name:null}n(40);var xe=n(8),De=(n(21),n(14)),Be=function(e){if(0===e)return"CUR";var t=Math.floor((e-1)/6),n=(e-1)%6+1;return String.fromCharCode(t+65)+n.toString()},_e=function(e){var t=e.settings;return null===t||void 0===t?null:m.a.createElement("div",{className:"dump-control"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{colSpan:6,className:"name"},"MIDI settings")),Object.keys(t).map(function(e){var n=Z[t[e].msg_type];return 67===t[e].msg_type&&(n=n+" "+De.a(t[e].data[0],!0)+" vel. "+t[e].data[1]),m.a.createElement("tr",{key:e},m.a.createElement("td",null,"settings ",e),m.a.createElement("td",null,"ch. ",k(t[e].channel)),m.a.createElement("td",null,"msg ",k(t[e].msg_type)),m.a.createElement("td",null,n),m.a.createElement("td",null,S(t[e].data)),m.a.createElement("td",null,t[e].active?"active":"OFF"))}))))},Ae=function(e){var t=e.settings;return null===t?null:m.a.createElement("div",null,m.a.createElement(_e,{settings:t}))},Te=function(e){var t=e.obj,n=e.config;return null===n||void 0===n?null:m.a.createElement("div",{className:"dump-control"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{colSpan:10,className:"name"},q[t])),m.a.createElement("tr",null,m.a.createElement("th",null,"step"),m.a.createElement("th",null,"ch."),m.a.createElement("th",null,"type"),m.a.createElement("th",null,"data"),m.a.createElement("th",null,"decoded"),m.a.createElement("th",null,"active"),m.a.createElement("th",null,"LED num"),m.a.createElement("th",null,"LED On"),m.a.createElement("th",null,"LED Off"),m.a.createElement("th",null,"LED midi")),Object.keys(n.steps).map(function(e){var a=Z[n.steps[e].msg_type];67===n.steps[e].msg_type&&(a=a+" "+De.a(n.steps[e].data[0],!0)+" vel. "+n.steps[e].data[1]);var r=n.steps[e].led_inactive_color,o=n.steps[e].led_active_color;return m.a.createElement("tr",{key:"".concat(t,".").concat(e)},m.a.createElement("td",null,e),m.a.createElement("td",null,k(n.steps[e].channel)),m.a.createElement("td",null,k(n.steps[e].msg_type)),m.a.createElement("td",null,S(n.steps[e].data)),m.a.createElement("td",null,a),m.a.createElement("td",null,n.steps[e].active?"active":"OFF"),m.a.createElement("td",null,k(n.steps[e].led_num)),m.a.createElement("td",null,o in re?re[o]:k(o)),m.a.createElement("td",null,r in re?re[r]:k(r)),m.a.createElement("td",null,k(n.steps[e].led_midi_ctrl)))}))))},Re=function(e){var t=e.controls;return null===t||void 0===t?null:m.a.createElement("div",{className:"dump-controls"},Object.keys(t).map(function(e){return m.a.createElement(Te,{key:e,obj:e,config:t[e]})}))},Fe=function(e){var t=e.index,n=e.data;return null===n||void 0===n?null:m.a.createElement("div",null,m.a.createElement("h3",null,"Preset ",Be(parseInt(t,10))," (#",t,"): ",n.name),m.a.createElement(Re,{controls:n.controls}),m.a.createElement(Ae,{settings:n.midi}))},Le=function(e){var t=e.presets;return null===t||void 0===t?null:m.a.createElement("div",null,Object.keys(t).map(function(e){return m.a.createElement(Fe,{key:e,index:e,data:t[e]})}))},Ue=function(e){var t=e.data;return m.a.createElement("div",{className:"dump code"},t&&m.a.createElement(Le,{presets:t[A]}))},Ge=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={inputs:[],outputs:[],input:null,output:null},n.connectInput=function(e){n.props.onMidiInputEvent&&e&&(e.hasListener("midimessage","all",n.props.onMidiInputEvent)?console.warn("Midi.connectInput: sysex messages on all channels listener already connected"):(console.log("Midi.connectInput: add listener for sysex messages on all channels"),e.addListener("midimessage","all",n.props.onMidiInputEvent),n.props.onInputConnection&&n.props.onInputConnection(e.id)))},n.disconnectInput=function(e){e&&(e.removeListener(),console.log("disconnectInput: input ".concat(e.id," disconnected")),n.props.onInputDisconnection&&n.props.onInputDisconnection(e.id))},n.connectOutput=function(e){e&&(n.setState({output:e.id}),console.log("connectOutput: output ".concat(e.id," connected")),n.props.onOutputConnection&&n.props.onOutputConnection(e.id))},n.disconnectOutput=function(){if(n.state.output){var e=n.state.output;n.setState({output:null}),console.log("disconnectOutput: output ".concat(e," disconnected")),n.props.onOutputDisconnection&&n.props.onOutputDisconnection(e)}},n.autoConnectInput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectInput: autoConnect ".concat(n.props.autoConnect),n.state.inputs),null===n.state.input){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.inputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectInput: port ".concat(c.name," ").concat(c.id)),"input"===c.type&&c.name.match(new RegExp(n.props.autoConnect,"i"))){console.log("Midi.autoConnectInput: connect ".concat(c.name)),n.setState({input:c.id}),n.connectInput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectInput: autoConnect skipped, already connected")},n.autoConnectOutput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectOutput: autoConnect ".concat(n.props.autoConnect)),null===n.state.output){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.outputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectOutput: port ".concat(c.name," ").concat(c.id)),"output"===c.type&&c.name.match(new RegExp(n.props.autoConnect,"i"))){console.log("Midi.autoConnectOutput: autoConnect: auto-connect ".concat(c.name)),n.connectOutput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectOutput: autoConnect skipped, already connected")},n.registerInputs=function(){var e=new RegExp(n.props.only,"i");console.log("Midi.registerInputs matching /".concat(n.props.only,"/i"),Ce.inputs,Ce.inputs.filter(function(t){return t.name.match(e)})),n.setState({inputs:Ce.inputs.filter(function(t){return t.name.match(e)})},function(){return n.autoConnectInput()})},n.registerOutputs=function(){var e=new RegExp(n.props.only,"i");console.log("Midi.registerOutputs matching /".concat(n.props.only,"/i"),Ce.outputs,Ce.outputs.filter(function(t){return t.name.match(e)})),n.setState({outputs:Ce.outputs.filter(function(t){return t.name.match(e)})},function(){return n.autoConnectOutput()})},n.unRegisterInputs=function(){console.log("Midi.unRegisterInputs"),n.disconnectInput(Ie(n.state.input)),n.setState({inputs:[],input:null})},n.unRegisterOutputs=function(){console.log("Midi.unRegisterOutputs"),n.setState({outputs:[],output:null})},n.handleMidiConnectEvent=function(e){console.group("Midi: handleMidiConnectEvent: ".concat(e.port.type," ").concat(e.type,": ").concat(e.port.name),e),e.port.name.match(new RegExp(n.props.only,"i"))?("input"===e.port.type&&(console.log("Midi.handleMidiConnectEvent: call registerInputs"),n.registerInputs()),"output"===e.port.type&&(console.log("Midi.handleMidiConnectEvent: call registerOutputs"),n.registerOutputs())):console.log("Midi.handleMidiConnectEvent: port ignored: ".concat(e.port.name)),console.groupEnd()},n.togglePort=function(e){if("input"===Ie(e).type){console.log("toggle input",e);var t=n.state.input;n.state.input&&n.disconnectInput(Ie(n.state.input)),e!==t&&n.connectInput(ke(e)),n.setState({input:e===t?null:e})}else{console.log("toggle output",e);var a=n.state.output;n.state.output&&n.disconnectOutput(),e!==a&&n.connectOutput(Ie(e))}},n.midiOn=function(e){e?console.warn("Midi.midiOn: WebMidi could not be enabled.",e):(console.log("Midi.midiOn: WebMidi enabled"),Ce.addListener("connected",n.handleMidiConnectEvent),Ce.addListener("disconnected",n.handleMidiConnectEvent))},n.portsGrouped=function(){var e={},t=!0,a=!1,r=void 0;try{for(var o,c=Ce.inputs[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;e[l.name]={input:{id:l.id,selected:l.id===n.state.input},output:null}}}catch(f){a=!0,r=f}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}var s=!0,i=!1,u=void 0;try{for(var d,m=Ce.outputs[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var p=d.value;p.name in e||(e[p.name]={input:null,output:null}),e[p.name].output={id:p.id,selected:p.id===n.state.output}}}catch(f){i=!0,u=f}finally{try{s||null==m.return||m.return()}finally{if(i)throw u}}return e},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){console.log("Midi: component did mount: WebMidi.enabled=".concat(Ce.enabled)),Ce.enabled?(console.log("Midi: component did mount: already enabled, register ports"),this.registerInputs(),this.registerOutputs()):(console.log("Midi: component did mount: Calling WebMidi.enable"),Ce.enable(this.midiOn,!0))}},{key:"componentWillUnmount",value:function(){console.log("Midi: component will unmount: unregister ports"),this.unRegisterInputs(),this.unRegisterOutputs()}},{key:"render",value:function(){var e=this.state,t=e.inputs,n=e.outputs;return 0===t.length&&0===n.length?m.a.createElement("div",{className:this.props.className},this.props.children):m.a.createElement("div",{className:this.props.className},this.props.portsRenderer(this.portsGrouped(),this.togglePort))}}]),t}(d.Component);Ge.defaultProps={classname:"",only:".*"};var We=n(20),He=n.n(We),Ve=function(e){var t=e.groupedPorts,n=e.clickHandler;return m.a.createElement("div",{className:"ports-grid"},m.a.createElement("div",{className:"grid-header"},"MIDI port"),m.a.createElement("div",{className:"grid-header"},"IN"),m.a.createElement("div",{className:"grid-header"},"OUT"),Object.keys(t).map(function(e,a){return m.a.createElement(d.Fragment,{key:a},m.a.createElement("div",{className:"port-name"},e),m.a.createElement("div",{className:"port-switch"},t[e].input&&m.a.createElement(He.a,{onChange:function(){return n(t[e].input.id)},checked:t[e].input.selected,className:"react-switch",id:"switch-".concat(t[e].input.id),height:16,width:36})),m.a.createElement("div",{className:"port-switch"},t[e].output&&m.a.createElement(He.a,{onChange:function(){return n(t[e].output.id)},checked:t[e].output.selected,className:"react-switch",id:"switch-".concat(t[e].output.id),height:16,width:36})))}))};var ze=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,data:null,messages:[{name:"read current preset",message:be(0)},{name:"read preset A1",message:be(1)},{name:"read stompswitch #1 of preset #5",message:function(e,t){var n=[_,A,e,t],a=ye(n);return n.push(a),D.concat(n)}(5,13)},{name:"read all presets (takes some time)",message:function(){var e=[_,A,z],t=ye(e);return e.push(t),D.concat(e)}()}],customMessage:""},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},3e4),n.props.onBusy(!0)},n.updateCustomMessage=function(e){var t=(e.target.value.toUpperCase().match(/[0-9A-F ]+/g)||[]).join("");n.setState({customMessage:t})},n.sendCustomMessage=function(){if(n.state.customMessage){var e=Array.from(M(n.state.customMessage,/ /g));e&&e.length>0&&(e.push(ye(e)),n.sendSysex(D.concat(e)))}},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){n.setState(Object(xe.a)(function(t){var n=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;ge(l)?t.data=he(t.data||{},Ee(l)):console.log("MIDI message is not a sysex message")}}catch(s){a=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}})),n.props.onBusy(!1)},1e3),n.setOutput=function(e){n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=Se(n.state.output);t?(n.showBusy(),n.setState({data:null},function(){return t.sendSysex(x,e)})):console.warn("send: output ".concat(n.state.output," not found"))}},n.sendMessage=function(e){n.sendSysex(e)},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){for(var e=this,t=this.state,n=t.data,a=t.messages,r=t.customMessage,o=ye(M(r,/ /g)),c="",l=0;l<r.length;l++)l>0&&l%2===0&&(c+=" "),c+=r[l];return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Test messages:"),m.a.createElement("div",{className:"content-row-content-content"},a.map(function(t,n){return m.a.createElement("div",{key:n,className:"send-message"},m.a.createElement("button",{onClick:function(){return e.sendMessage(t.message)}},"send"),m.a.createElement("span",{className:"code light"},S(x.concat(t.message.slice(0,1)))," "),m.a.createElement("span",{className:"code"},S(t.message.slice(1,-1))," "),m.a.createElement("span",{className:"code light"}," ",S(t.message.slice(-1))),m.a.createElement("span",{className:"message-name"}," ",t.name))}))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Custom message:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"send-message"},m.a.createElement("button",{onClick:this.sendCustomMessage,disabled:r.length%2!==0},"send"),m.a.createElement("span",{className:"code light"},S(x)," ",S(D)," "),m.a.createElement("input",{type:"text",className:"code",size:"30",value:r,placeholder:"hex digits only",onChange:this.updateCustomMessage}),m.a.createElement("span",{className:"code light"}," ",k(o))),m.a.createElement("div",{className:"custom-message code"},S(x)," ",S(D)," ",c," ",k(o)))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Response:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"message code"},m.a.createElement(Ue,{data:n}))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ge,{only:"Pacer.*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onOutputConnection:this.setOutput,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))))}}]),t}(d.Component),Ye=n(11),qe=n.n(Ye),Ke=n(15),Je=(n(47),n(49),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return m.a.createElement("div",{className:a?"selector selected":"selector",onClick:function(){return r(n)}},t)}),Xe=function(e){var t=e.currentPreset,n=e.onClick;return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"preset-selectors"},m.a.createElement(Je,{name:"0",id:0,selected:0===t,onClick:n,key:0}),["A","B","C","D"].map(function(e){return m.a.createElement(d.Fragment,{key:e},"A"!==e&&m.a.createElement("div",null),Array.from(Array(6).keys()).map(function(a){var r,o=e+(a+1),c=6*((r=o).charCodeAt(0)-65)+parseInt(r[1],10);return m.a.createElement(Je,{name:o,id:c,selected:c===t,onClick:n,key:c})}))})))},Qe=(n(51),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return m.a.createElement("div",{className:a?"selector selected":"selector",onClick:function(){return r(n)}},m.a.createElement("div",{className:"name"},t))}),$e=function(e){var t=e.currentControl,n=e.onClick;return m.a.createElement("div",{className:"controls"},X.map(function(e){return m.a.createElement(Qe,{key:e,name:Y[e],id:e,selected:e===t,onClick:n})}),Q.map(function(e){return m.a.createElement(Qe,{key:e,name:Y[e],id:e,selected:e===t,onClick:n})}),m.a.createElement("div",{className:"no-control"},"\xa0"),K.map(function(e){return m.a.createElement(Qe,{key:e,name:Y[e],id:e,selected:e===t,onClick:n})}),m.a.createElement("div",{className:"no-control"},"\xa0"),J.map(function(e){return m.a.createElement(Qe,{key:e,name:Y[e],id:e,selected:e===t,onClick:n})}))},Ze=(n(53),function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},m.a.createElement("option",{value:"0"},"0"),m.a.createElement("option",{value:"1"},"1"))}),et=function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},Object.keys(re).map(function(e){return m.a.createElement("option",{key:e,value:e},re[e])}))},tt=function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{defaultValue:t,onChange:function(e){return n(e.target.value)}},m.a.createElement("option",{value:"0"},"default"),m.a.createElement("option",{value:"3"},"top"),m.a.createElement("option",{value:"2"},"middle"),m.a.createElement("option",{value:"1"},"bottom"))},nt=function(e){var t=e.note,n=e.onChange;return m.a.createElement("select",{onChange:function(e){return n(e.target.value)},defaultValue:t},Array.from(Array(127).keys()).map(function(e){var t=De.a(e,!0);return m.a.createElement("option",{key:e,value:e},t)}))},at=function(e){var t,n,a,r=e.index,o=e.config,c=e.updateCallback;return o.msg_type===$?m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"step-row-header"},"Step ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},Object.keys(ee).map(function(e){return m.a.createElement("option",{key:e,value:e},ee[e])}))),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)):(67===o.msg_type||68===o.msg_type?(t=m.a.createElement(nt,{note:o.data[0],onChange:function(e){return c("data",0,e)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=""):(t=m.a.createElement("input",{type:"text",value:o.data[0],onChange:function(e){return c("data",0,e.target.value)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=m.a.createElement("input",{type:"text",value:o.data[2],onChange:function(e){return c("data",2,e.target.value)}})),m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"step-row-header"},"Step ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},te.map(function(e){return m.a.createElement("option",{key:e.key,value:e.key},e.value)}))),m.a.createElement("div",null,t,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][0])),m.a.createElement("div",null,n,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][1])),m.a.createElement("div",null,a,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][2])),m.a.createElement("div",null,m.a.createElement(et,{current_value:o.led_inactive_color,onChange:function(e){return c("led_inactive_color",null,e)}})),m.a.createElement("div",null,m.a.createElement(et,{current_value:o.led_active_color,onChange:function(e){return c("led_active_color",null,e)}})),m.a.createElement("div",null,m.a.createElement(tt,{current_value:o.led_num,onChange:function(e){return c("led_num",null,e)}})),m.a.createElement("div",null,m.a.createElement(Ze,{current_value:o.led_midi_ctrl,onChange:function(e){return c("led_midi_ctrl",null,e)}})),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("channel",null,e.target.value)},defaultValue:o.channel},Array.from(Array(16).keys()).map(function(e){return m.a.createElement("option",{key:e,value:e},e)})))))},rt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onStepUpdate=function(e,t,a,r){n.props.onUpdate(e,t,a,r)},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.steps;return m.a.createElement("div",{className:"steps"},m.a.createElement("div",null),m.a.createElement("div",{className:"step-col-header"},"Type"),m.a.createElement("div",{className:"step-col-header"},"Data 1"),m.a.createElement("div",{className:"step-col-header"},"Data 2"),m.a.createElement("div",{className:"step-col-header"},"Data 3"),m.a.createElement("div",{className:"step-col-header"},"LED Off"),m.a.createElement("div",{className:"step-col-header"},"LED On"),m.a.createElement("div",{className:"step-col-header"},"LED Num"),m.a.createElement("div",{className:"step-col-header"},"LED MIDI"),m.a.createElement("div",{className:"step-col-header"},"MIDI Ch."),Object.keys(t).map(function(n){return m.a.createElement(at,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onStepUpdate(n,t,a,r)}})}))}}]),t}(d.Component),ot=n(16),ct=(n(22),n(58),function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"control-mode"},m.a.createElement("span",{className:"step-row-header"},"Control mode:"),m.a.createElement("select",{onChange:function(t){return e.props.onUpdate(t.target.value)},defaultValue:this.props.mode},Object.keys(ce).map(function(e){return m.a.createElement("option",{key:e,value:e},ce[e])})))}}]),t}(d.Component)),lt=(n(60),function(e){var t=e.messages;return m.a.createElement("div",{className:"status"},t.map(function(e,t){return m.a.createElement("div",{key:t,className:"status-".concat(e.type)},e.message)}))}),st=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onNameUpdate=function(e){console.log("PresetNameEditor.onSettingUpdate",e.target.value),n.props.onUpdate(e.target.value.length>5?e.target.value.substr(0,5):e.target.value)},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this.props.name;return m.a.createElement("div",{className:"preset-name"},m.a.createElement("p",null,"The preset name is limited to 5 characters."),m.a.createElement("span",{className:"strong"},"Name:")," ",m.a.createElement("input",{value:e,onChange:this.onNameUpdate,size:8}))}}]),t}(d.Component),it=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){console.log(n.props.data);var t=window.URL.createObjectURL(new Blob([n.props.data],{type:"application/octet-stream"})),a=n.props.filename;if(n.props.addTimestamp){var r=new Date;a+="."+(r.getUTCFullYear()+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2)+"-"+("0"+r.getUTCHours()).slice(-2)+("0"+r.getUTCMinutes()).slice(-2)+("0"+r.getUTCSeconds()).slice(-2))}var o=document.createElement("a");o.download=a+".syx",o.style.display="none",o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(function(){return window.URL.revokeObjectURL(t)},1e3)},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("button",{onClick:this.handleClick},this.props.label)}}]),t}(d.Component),ut=40;function dt(e){return void 0!==e&&null!==e&&""!==e}var mt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,presetIndex:null,controlId:null,changed:!1,data:null,binData:null,statusMessages:[]},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.addStatusMessage=function(e,t){n.setState(Object(xe.a)(function(n){var a={type:e,message:t};n.statusMessages.push(a)>ut&&n.statusMessages.shift()}))},n.addInfoMessage=function(e){n.addStatusMessage("info",e)},n.addWarningMessage=function(e){n.addStatusMessage("warning",e)},n.addErrorMessage=function(e){n.addStatusMessage("error",e)},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){var t=e.reduce(function(e,t){return e+t.length},0);n.setState(Object(xe.a)(function(n){n.binData=new Uint8Array(t);var a=0,r=!0,o=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=l.value;n.binData.set(i,a),a+=i.length,ge(i)?n.data=he(n.data||{},Ee(i)):console.log("MIDI message is not a sysex message")}}catch(u){o=!0,c=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}})),n.addInfoMessage("".concat(e.length," messages received (").concat(t," bytes)")),n.props.onBusy(!1)},1e3),n.onDrop=function(e){console.log("drop",e),n.setState({data:null,changed:!1},function(){n.readFiles(e)})},n.selectPreset=function(e){n.setState(Object(xe.a)(function(t){t.presetIndex=e,e!==n.state.presetIndex&&(t.data=null,t.changed=!1)})),dt(e)&&n.sendSysex(be(e))},n.selectControl=function(e){dt(n.state.presetIndex)&&e&&n.setState({controlId:e})},n.updateControlStep=function(e,t,a,r,o){var c=parseInt(o,10);n.setState(Object(xe.a)(function(n){"data"===a?n.data[A][n.presetIndex].controls[e].steps[t].data[r]=c:n.data[A][n.presetIndex].controls[e].steps[t][a]=c,"msg_type"===a&&(n.data[A][n.presetIndex].controls[e].steps[t].active=c===$?0:1),n.data[A][n.presetIndex].controls[e].steps[t].changed=!0,n.changed=!0}))},n.updateControlMode=function(e,t){var a=parseInt(t,10);n.setState(Object(xe.a)(function(t){t.data[A][t.presetIndex].controls[e].control_mode=a,t.data[A][t.presetIndex].controls[e].changed=!0,t.changed=!0}))},n.updatePresetName=function(e){console.log("Presets.updateName",e),void 0!==e&&null!==e&&(e.length>5?console.warn("Presets.updateName: name too long: ".concat(e)):n.setState(Object(xe.a)(function(t){t.data[A][t.presetIndex].name=e,t.data[A][t.presetIndex].changed=!0,t.changed=!0})))},n.onInputConnection=function(e){n.addInfoMessage("input ".concat(Me(e)," connected"))},n.onInputDisconnection=function(e){n.addInfoMessage("input ".concat(Me(e)," disconnected"))},n.onOutputConnection=function(e){n.setState(Object(xe.a)(function(t){t.output=e})),n.addInfoMessage("output ".concat(Pe(e)," connected"))},n.onOutputDisconnection=function(e){n.addInfoMessage("output ".concat(Pe(e)," disconnected"))},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=Se(n.state.output);t?(n.showBusy(),t.sendSysex(x,e)):console.warn("send: output ".concat(n.state.output," not found"))}else console.warn("no output enabled to send the message")},n.updatePacer=function(e){console.log("PresetMidi.updatePacer");var t=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;n.sendSysex(l)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}n.addInfoMessage("update".concat(e.length>1?"s":""," sent to Pacer"))},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"readFiles",value:function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var n=this;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var a;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=5;break}console.warn("readFiles: ".concat(t.name,": file too big, ").concat(t.size)),n.addWarningMessage("file too big"),e.next=13;break;case 5:return n.showBusy(),e.t0=Uint8Array,e.next=9,new Response(t).arrayBuffer();case 9:e.t1=e.sent,ge(a=new e.t0(e.t1))?(n.setState(Object(xe.a)(function(e){e.data=Ee(a);var t=Object.keys(e.data[A])[0],n=Object.keys(e.data[A][t].controls)[0];e.presetIndex=parseInt(t,10),e.controlId=parseInt(n,10)})),n.addInfoMessage("sysfile decoded")):(n.addWarningMessage("not a sysfile"),console.log("readFiles: not a sysfile",S(a.slice(0,5)))),n.props.onBusy(!1);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.presetIndex,a=t.controlId,r=t.data,o=t.changed,c=!1;r&&(c=!0,A in r||(console.log("Presets: invalid data",r),c=!1),!c||n in r[A]||(console.log("Presets: preset ".concat(n," not found in data")),c=!1),!c||"controls"in r[A][n]||(console.log("Presets: controls not found in data"),c=!1),!c||a in r[A][n].controls||(console.log("Presets: control ".concat(a," not found in data")),c=!1),!c||"steps"in r[A][n].controls[a]||(console.log("Presets: steps not found in data"),c=!1)),c=c&&6===Object.keys(r[A][n].controls[a].steps).length;var l=[];if(c){l=Oe(n,a,r);var s=je(n,r);s&&l.push(s)}return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Select preset and control:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"selectors"},m.a.createElement(Xe,{currentPreset:n,onClick:this.selectPreset}),dt(n)&&m.a.createElement($e,{currentControl:a,onClick:this.selectControl})))),c&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Preset name:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(st,{name:r[A][n].name,onUpdate:function(t){return e.updatePresetName(t)}})))),c&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,q[a],":"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(rt,{controlId:a,steps:r[A][n].controls[a].steps,onUpdate:function(t,n,r,o){return e.updateControlStep(a,t,n,r,o)}}),m.a.createElement(ct,{controlId:a,mode:r[A][n].controls[a].control_mode,onUpdate:function(t){return e.updateControlMode(a,t)}})))),o&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Send the updated config to the Pacer:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"actions"},m.a.createElement("button",{className:"update",onClick:function(){return e.updatePacer(l)}},"Update Pacer"))))),c&&m.a.createElement("div",{className:"content-row-content no-grad"},m.a.createElement("div",{className:"debug"},m.a.createElement("h4",null,"[Debug] Update messages to send:"),m.a.createElement("div",{className:"message-to-send"},l.map(function(e,t){return m.a.createElement("div",{key:t,className:"code"},S(e))}))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ge,{only:"Pacer.*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onInputConnection:this.onInputConnection,onInputDisconnection:this.onInputDisconnection,onOutputConnection:this.onOutputConnection,onOutputDisconnection:this.onOutputDisconnection,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer.")),m.a.createElement("h3",null,"Load preset from file:"),m.a.createElement(ot.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here",m.a.createElement("br",null),"or click to open the file dialog"),r&&m.a.createElement(d.Fragment,null,m.a.createElement("h3",null,"Save preset as file:"),m.a.createElement("div",{className:"download"},m.a.createElement(it,{data:this.state.binData,filename:"pacer-preset-".concat(Be(n)),addTimestamp:!0,label:"Download the preset data as a binary sysex file"}))),m.a.createElement("h3",null,"Log:"),m.a.createElement(lt,{messages:this.state.statusMessages})))}}]),t}(d.Component),pt=n(28),ft={128:"Note Off",144:"Note On",160:"AfterTouch",176:"Control Change",192:"Program Change",208:"Channel Pressure",224:"Pitch Wheel"},ht={0:"Bank Select (coarse)",1:"Modulation Wheel (coarse)",2:"Breath controller (coarse)",4:"Foot Pedal (coarse)",5:"Portamento Time (coarse)",6:"Data Entry (coarse)",7:"Volume (coarse)",8:"Balance (coarse)",10:"Pan position (coarse)",11:"Expression (coarse)",12:"Effect Control 1 (coarse)",13:"Effect Control 2 (coarse)",16:"General Purpose Slider 1",17:"General Purpose Slider 2",18:"General Purpose Slider 3",19:"General Purpose Slider 4",32:"Bank Select (fine)",33:"Modulation Wheel (fine)",34:"Breath controller (fine)",36:"Foot Pedal (fine)",37:"Portamento Time (fine)",38:"Data Entry (fine)",39:"Volume (fine)",40:"Balance (fine)",42:"Pan position (fine)",43:"Expression (fine)",44:"Effect Control 1 (fine)",45:"Effect Control 2 (fine)",64:"Hold Pedal (on/off)",65:"Portamento (on/off)",66:"Sustenuto Pedal (on/off)",67:"Soft Pedal (on/off)",68:"Legato Pedal (on/off)",69:"Hold 2 Pedal (on/off)",70:"Sound Variation",71:"Sound Timbre",72:"Sound Release Time",73:"Sound Attack Time",74:"Sound Brightness",75:"Sound Control 6",76:"Sound Control 7",77:"Sound Control 8",78:"Sound Control 9",79:"Sound Control 10",80:"General Purpose Button 1 (on/off)",81:"General Purpose Button 2 (on/off)",82:"General Purpose Button 3 (on/off)",83:"General Purpose Button 4 (on/off)",91:"Effects Level",92:"Tremulo Level",93:"Chorus Level",94:"Celeste Level",95:"Phaser Level",96:"Data Button increment",97:"Data Button decrement",98:"Non-registered Parameter (fine)",99:"Non-registered Parameter (coarse)",100:"Registered Parameter (fine)",101:"Registered Parameter (coarse)",120:"All Sound Off",121:"All Controllers Off",122:"Local Keyboard (on/off)",123:"All Notes Off",124:"Omni Mode Off",125:"Omni Mode On",126:"Mono Operation",127:"Poly Operation"},gt=(n(62),40),vt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={messages:[]},n.handleMidiInputEvent=function(e){n.setState(Object(xe.a)(function(t){t.messages.unshift(e.data)>gt&&t.messages.pop()}))},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",null,m.a.createElement("div",{className:"content-row-content no-grad"},m.a.createElement("h2",null,"MIDI messages"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("p",null,"The messages are displayed in reverse chronological order (the most recent on top). Only the last 20 messages are displayed."),m.a.createElement("div",{className:"messages"},this.state.messages.map(function(e,t){var n=Object(pt.a)(e),a="",r="";switch(n.messageCode){case 128:case 144:a=De.a(n.key),r="velocity: ".concat(n.velocity);break;case 160:break;case 176:a=ht[n.controlNumber],r=n.controlValue;break;case 192:a="program: ".concat(n.program),r="";break;case 208:break;case 224:a="bend: ".concat(n.pitchBend),r="multiplier: ".concat(n.pitchBendMultiplier)}return m.a.createElement("div",null,m.a.createElement("span",{className:"code"},"[",S(e),"]"),m.a.createElement("span",{className:"msg-channel"},"Channel ",n.channel),m.a.createElement("span",{className:"msg-name"},ft[n.messageCode]),m.a.createElement("span",{className:"msg-data"},a),m.a.createElement("span",{className:"msg-data"},r))})))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ge,{only:".*",autoConnect:".*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer or any other MIDI device to your computer."))))}}]),t}(d.Component),Et=(n(64),function(){return m.a.createElement("div",{className:"footer"},m.a.createElement("div",{className:"gh"},m.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"Source code available on GitHub"),m.a.createElement("a",{"aria-label":"Homepage",title:"project on github",href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},m.a.createElement("svg",{height:"24",viewBox:"0 0 16 16",version:"1.1",width:"24","aria-hidden":"true"},m.a.createElement("path",{fillRule:"evenodd",d:"M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"})))),m.a.createElement("div",null,m.a.createElement("p",null,"\u201cNektar Technology\u201d, the logo and all other Nektar Technology product, technology or service names and logos are trademarks or registered trademarks of Nektar Technology, Inc."),m.a.createElement("p",null,"This web site is not endorsed by, directly affiliated with, maintained, or sponsored by Nektar Technology. This web site is published under ",m.a.createElement("a",{href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"_blank",rel:"noopener noreferrer"},"GNU General Public License v3"))))}),yt=function(e){function t(){return Object(h.a)(this,t),Object(v.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"content home full-width"},m.a.createElement("div",{className:"instructions"},"Sorry, this feature is not implemented yet."))}}]),t}(d.Component),bt=(n(66),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.onDrop=function(e){console.log("drop",e),n.setState({data:null},function(){n.readFiles(e)})},n.handleMidiInputEvent=function(e){console.log("DumpDecoder.handleMidiInputEvent",e,e.data),ge(e.data)?(console.log("DumpDecoder.handleMidiInputEvent: data is SysEx"),n.setState(Object(xe.a)(function(t){t.data=he(t.data||{},Ee(e.data))}))):console.log("MIDI message is not a sysex message")},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"readFiles",value:function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var n=this;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var a;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=12;break;case 4:return n.showBusy(),e.t0=Uint8Array,e.next=8,new Response(t).arrayBuffer();case 8:e.t1=e.sent,ge(a=new e.t0(e.t1))?n.setState(Object(xe.a)(function(e){e.data=he(e.data||{},Ee(a)),n.props.onBusy(!1)})):console.log("readFiles: not a sysfile",S(a.slice(0,5))),n.props.onBusy(!1);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data;return console.log("DumpDecoder.render",this.props),m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"content-row-content no-grad"},m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"instructions"},"Send a dump from your Pacer or drop a binary sysex file onto the drop zone on the right."),m.a.createElement("div",null,m.a.createElement(Ue,{data:e}))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ge,{only:"Pacer.*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer.")),m.a.createElement(ot.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here",m.a.createElement("br",null),"or click to open the file dialog")))}}]),t}(d.Component)),Ot=(n(68),function(e){var t=e.note,n=e.onChange;return m.a.createElement("select",{onChange:function(e){return n(e.target.value)},defaultValue:t},Array.from(Array(127).keys()).map(function(e){var t=De.a(e,!0);return m.a.createElement("option",{key:e,value:e},t)}))}),jt=function(e){var t,n,a,r=e.index,o=e.config,c=e.updateCallback;return o.msg_type===$?m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"setting-row-header"},"setting ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},Object.keys(ee).map(function(e){return m.a.createElement("option",{key:e,value:e},ee[e])}))),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)):(67===o.msg_type?(t=m.a.createElement(Ot,{note:o.data[0],onChange:function(e){return c("data",0,e)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=""):(t=m.a.createElement("input",{type:"text",value:o.data[0],onChange:function(e){return c("data",0,e.target.value)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=m.a.createElement("input",{type:"text",value:o.data[2],onChange:function(e){return c("data",2,e.target.value)}})),m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"setting-row-header"},"Setting ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},defaultValue:o.msg_type},ne.map(function(e){return m.a.createElement("option",{key:e.key,value:e.key},e.value)}))),m.a.createElement("div",null,t,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][0])),m.a.createElement("div",null,n,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][1])),m.a.createElement("div",null,a,m.a.createElement("div",{className:"data-help"},ae[o.msg_type][2])),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("channel",null,e.target.value)},defaultValue:o.channel},Array.from(Array(16).keys()).map(function(e){return m.a.createElement("option",{key:e,value:e},e)})))))},Nt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSettingUpdate=function(e,t,a,r){n.props.onUpdate(e,t,a,r)},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.props.settings;return m.a.createElement("div",{className:"settings"},m.a.createElement("div",null),m.a.createElement("div",{className:"setting-col-header"},"Type"),m.a.createElement("div",{className:"setting-col-header"},"Data 1"),m.a.createElement("div",{className:"setting-col-header"},"Data 2"),m.a.createElement("div",{className:"setting-col-header"},"Data 3"),m.a.createElement("div",{className:"setting-col-header"},"MIDI Ch."),Object.keys(t).map(function(n){return m.a.createElement(jt,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onSettingUpdate(n,t,a,r)}})}))}}]),t}(d.Component),Ct=40;var wt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,presetIndex:null,changed:!1,data:null,statusMessages:[]},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.addStatusMessage=function(e,t){n.setState(Object(xe.a)(function(n){var a={type:e,message:t};n.statusMessages.push(a)>Ct&&n.statusMessages.shift()}))},n.addInfoMessage=function(e){n.addStatusMessage("info",e)},n.addWarningMessage=function(e){n.addStatusMessage("warning",e)},n.addErrorMessage=function(e){n.addStatusMessage("error",e)},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){n.setState(Object(xe.a)(function(t){var n=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;ge(l)?t.data=he(t.data||{},Ee(l)):console.log("MIDI message is not a sysex message")}}catch(i){a=!0,r=i}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}var s=Object.keys(t.data[A])[0];t.presetIndex=parseInt(s,10)}));var t=e.reduce(function(e,t){return e+t.length},0);n.addInfoMessage("".concat(e.length," messages received (").concat(t," bytes)")),n.props.onBusy(!1)},1e3),n.onDrop=function(e){console.log("drop",e),n.setState({data:null,changed:!1},function(){n.readFiles(e)})},n.selectPreset=function(e){n.setState(Object(xe.a)(function(t){t.presetIndex=e,e!==n.state.presetIndex&&(t.data=null,t.data=null)})),n.sendSysex(be(e))},n.updateMidiSettings=function(e,t,a,r){var o=parseInt(r,10);n.setState(Object(xe.a)(function(n){"data"===t?n.data[A][n.presetIndex].midi[e].data[a]=o:n.data[A][n.presetIndex].midi[e][t]=o,"msg_type"===t&&(n.data[A][n.presetIndex].midi[e].active=o===$?0:1),n.data[A][n.presetIndex].midi[e].changed=!0,n.changed=!0}))},n.updatePresetName=function(e){void 0!==e&&null!==e&&(e.length>5?console.warn("PresetMidi.updateName: name too long: ".concat(e)):n.setState(Object(xe.a)(function(t){t.data[A][t.presetIndex].name=e,t.data[A][t.presetIndex].changed=!0,t.changed=!0})))},n.onInputConnection=function(e){n.addInfoMessage("input ".concat(Me(e)," connected"))},n.onInputDisconnection=function(e){n.addInfoMessage("input ".concat(Me(e)," disconnected"))},n.onOutputConnection=function(e){n.setState(Object(xe.a)(function(t){t.output=e})),n.addInfoMessage("output ".concat(Pe(e)," connected"))},n.onOutputDisconnection=function(e){n.addInfoMessage("output ".concat(Pe(e)," disconnected"))},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=Se(n.state.output);t?(n.showBusy(),t.sendSysex(x,e)):console.warn("send: output ".concat(n.state.output," not found"))}else console.warn("no output enabled to send the message")},n.updatePacer=function(e){console.log("PresetMidi.updatePacer");var t=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;n.sendSysex(l)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}n.addInfoMessage("update".concat(e.length>1?"s":""," sent to Pacer"))},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"readFiles",value:function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var n=this;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Ke.a)(qe.a.mark(function e(t){var a;return qe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=5;break}console.warn("readFiles: ".concat(t.name,": file too big, ").concat(t.size)),n.addWarningMessage("file too big"),e.next=13;break;case 5:return n.showBusy(),e.t0=Uint8Array,e.next=9,new Response(t).arrayBuffer();case 9:e.t1=e.sent,ge(a=new e.t0(e.t1))?(n.setState(Object(xe.a)(function(e){e.data=Ee(a);var t=Object.keys(e.data[A])[0];e.presetIndex=parseInt(t,10)})),n.addInfoMessage("sysfile decoded")):(n.addWarningMessage("not a sysfile"),console.log("readFiles: not a sysfile",S(a.slice(0,5)))),n.props.onBusy(!1);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.presetIndex,a=t.data,r=t.changed,o=!1;a&&(o=!0,A in a||(console.log("PresetMidi: invalid data",a),o=!1),!o||n in a[A]||(o=!1),!o||"midi"in a[A][n]||(o=!1)),o=o&&16===Object.keys(a[A][n].midi).length;var c=[];if(o){c=Ne(n,a);var l=je(n,a);l&&c.push(l)}return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Select preset:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"selectors"},m.a.createElement(Xe,{currentPreset:n,onClick:this.selectPreset})))),o&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Preset name:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(st,{name:a[A][n].name,onUpdate:function(t){return e.updatePresetName(t)}})))),o&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Preset MIDI settings:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(Nt,{settings:a[A][n].midi,onUpdate:function(t,n,a,r){return e.updateMidiSettings(t,n,a,r)}})))),r&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Send the updated config to the Pacer:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"actions"},m.a.createElement("button",{className:"update",onClick:function(){return e.updatePacer(c)}},"Update Pacer"))))),o&&m.a.createElement("div",{className:"content-row-content no-grad"},m.a.createElement("div",{className:"debug"},m.a.createElement("h4",null,"[Debug] Update messages to send:"),m.a.createElement("div",{className:"message-to-send"},c.map(function(e,t){return m.a.createElement("div",{key:t,className:"code"},S(e))}))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ge,{only:"Pacer.*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onInputConnection:this.onInputConnection,onInputDisconnection:this.onInputDisconnection,onOutputConnection:this.onOutputConnection,onOutputDisconnection:this.onOutputDisconnection,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer.")),m.a.createElement(ot.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here",m.a.createElement("br",null),"or click to open the file dialog"),m.a.createElement("h3",null,"Log:"),m.a.createElement(lt,{messages:this.state.statusMessages})))}}]),t}(d.Component),It=n(26),kt=function(e){var t=e.label,n=e.to,a=e.activeOnlyWhenExact;return m.a.createElement(b.a,{path:n,exact:a,children:function(e){var a=e.match;return m.a.createElement("div",{className:a?"header-link active":"header-link"},m.a.createElement(O.a,{to:n},t))}})},St=function(){return m.a.createElement("div",{className:"content home full-width"},m.a.createElement("div",{className:"instructions"},"Invalid URL"))},Mt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(v.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={busy:!1},n.onBusy=function(e){e!==n.state.busy&&n.setState({busy:e})},n}return Object(y.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){var e=this,t=this.state.busy,n=It.parse(window.location.search),a=!!n.debug&&"1"===n.debug;return console.log(n.debug,a),m.a.createElement(j.a,null,m.a.createElement("div",{className:"app"},m.a.createElement("header",{className:"header"},m.a.createElement(kt,{activeOnlyWhenExact:!0,to:"/",label:"Home"}),m.a.createElement(kt,{to:"/preset",label:"Preset Controls"}),m.a.createElement(kt,{to:"/presetmidi",label:"Preset Name & MIDI"}),m.a.createElement(kt,{to:"/global",label:"Global config"}),m.a.createElement(kt,{to:"/monitor",label:"MIDI monitor"}),m.a.createElement(kt,{to:"/dumpdecoder",label:"Dump decoder"}),a&&m.a.createElement(kt,{to:"/testsender",label:"Debug"}),!t&&m.a.createElement("div",{className:"spacer"}," "),t&&m.a.createElement("div",{className:"busy"},"please wait..."),m.a.createElement("div",{className:"header-app-name"},"Pacer editor 0.2.4")),m.a.createElement(N.a,null,m.a.createElement(b.a,{exact:!0,path:"/",render:function(e){return m.a.createElement(C,null)}}),m.a.createElement(b.a,{path:"/preset",render:function(t){return m.a.createElement(mt,{onBusy:e.onBusy})}}),m.a.createElement(b.a,{path:"/presetmidi",render:function(t){return m.a.createElement(wt,{onBusy:e.onBusy})}}),m.a.createElement(b.a,{path:"/global",render:function(t){return m.a.createElement(yt,{onBusy:e.onBusy})}}),m.a.createElement(b.a,{path:"/monitor",render:function(t){return m.a.createElement(vt,{onBusy:e.onBusy})}}),m.a.createElement(b.a,{path:"/dumpdecoder",render:function(t){return m.a.createElement(bt,{onBusy:e.onBusy})}}),a&&m.a.createElement(b.a,{path:"/testsender",render:function(t){return m.a.createElement(ze,{onBusy:e.onBusy})}}),m.a.createElement(b.a,{component:St})),m.a.createElement(Et,null)))}}]),t}(d.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Pt(){}console.log=Pt,console.warn=Pt,console.error=Pt,f.a.render(m.a.createElement(Mt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.dce38813.chunk.js.map