(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e,t,n){},27:function(e,t,n){e.exports=n(60)},32:function(e,t,n){},34:function(e,t,n){},36:function(e,t,n){},38:function(e,t,n){},42:function(e,t,n){},45:function(e,t,n){},47:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},57:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a,r,o,c=n(0),l=n.n(c),s=n(20),u=n.n(s),i=(n(32),n(3)),d=n(4),p=n(6),m=n(5),f=n(7),E=(n(34),n(65)),h=n(62),g=n(63),v=n(64),b=(n(36),function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"Requirements"),l.a.createElement("h2",null,"Limitations"),l.a.createElement("h2",null,"Usage"),l.a.createElement("h2",null,"FAQ"))}}]),t}(c.Component)),y=n(2),O=n(21),C=function(e){return null===e||void 0===e?"":function(e,t,n){for(var a="",r=n||"0",o=(t||2)-e.length;a.length<o;)a+=r;return a+e}(e.toString(16).toUpperCase(),2)},j=function(e){return null===e||void 0===e?"":Array.from(e).map(function(e){return C(e)}).join(" ")},I=function(e,t){var n=t?e.replace(t,""):e;if(n.length%2>0)return null;if(0===n.length)return null;for(var a=new Uint8Array(n.length/2),r=0;r<n.length/2;r++)a[r]=parseInt(n.substr(2*r,2),16);return a},N=[127],S=[0,1,119];function M(e){return null===e||void 0===e||0===e.length?128:128-Uint8Array.from(e).reduce(function(e,t){return e+t})%128}function k(e,t){var n=[2,1,e,t],a=M(n);return n.push(a),N.concat(n)}var P=(a={},Object(y.a)(a,1,"preset"),Object(y.a)(a,5,"global"),Object(y.a)(a,7,"full backup"),a),x={1:"name",13:"1",14:"2",15:"3",16:"4",17:"5",18:"6",19:"RESERVED",20:"A",21:"B",22:"C",23:"D",24:"FS 1",25:"FS 2",26:"FS 3",27:"FS 4",54:"EXP 1",55:"EXP 2",126:"MIDI configuration",127:"ALL"},w=[20,21,22,23],R=[13,14,15,16,17,18],D=[24,25,26,27],T=[54,55],A=(r={},Object(y.a)(r,0,"CC"),Object(y.a)(r,3,"NRPN C"),Object(y.a)(r,4,"NRPN F"),Object(y.a)(r,1,"PITCH"),Object(y.a)(r,2,"AT CHAN"),Object(y.a)(r,126,"DAW FUNC"),Object(y.a)(r,97,"CTRL_OFF"),Object(y.a)(r,71,"CC TOGGLE"),Object(y.a)(r,64,"CC"),Object(y.a)(r,72,"CC STEP"),Object(y.a)(r,67,"NOTE"),Object(y.a)(r,68,"NOTE TOGGLE"),Object(y.a)(r,69,"PRG BANK"),Object(y.a)(r,70,"PRG STEP"),Object(y.a)(r,87,"NRPN COARSE"),Object(y.a)(r,88,"NRPN FINE"),Object(y.a)(r,85,"MMC"),Object(y.a)(r,89,"RELAY"),Object(y.a)(r,98,"PRESET SELECT"),Object(y.a)(r,86,"PRESET INC DEC"),Object(y.a)(r,99,"STEP SELECT"),Object(y.a)(r,100,"STEP INC DEC"),Object(y.a)(r,18,"CC"),Object(y.a)(r,17,"CC REL"),Object(y.a)(r,21,"NRPN C"),Object(y.a)(r,22,"NRPN F"),Object(y.a)(r,19,"PITCH"),Object(y.a)(r,20,"AT CHAN"),Object(y.a)(r,16,"PRG"),Object(y.a)(r,23,"PRESET SEL"),Object(y.a)(r,24,"STEP SEL"),Object(y.a)(r,101,"CC"),r),L=(o={},Object(y.a)(o,0,"MIDI CC"),Object(y.a)(o,3,"MIDI NRPN Coarse"),Object(y.a)(o,4,"MIDI NRPN Fine"),Object(y.a)(o,1,"Pitch Bend"),Object(y.a)(o,2,"AT CHAN"),Object(y.a)(o,126,"DAW FUNC"),Object(y.a)(o,97,"CTRL_OFF"),Object(y.a)(o,71,"MIDI CC Toggle"),Object(y.a)(o,64,"CC"),Object(y.a)(o,72,"CC STEP"),Object(y.a)(o,67,"MIDI Note"),Object(y.a)(o,68,"MIDI Note Toggle"),Object(y.a)(o,69,"PRG BANK"),Object(y.a)(o,70,"PRG STEP"),Object(y.a)(o,87,"MIDI NRPN Coarse"),Object(y.a)(o,88,"MIDI NRPN Fine"),Object(y.a)(o,85,"MMC"),Object(y.a)(o,89,"RELAY"),Object(y.a)(o,98,"PRESET SELECT"),Object(y.a)(o,86,"PRESET INC DEC"),Object(y.a)(o,99,"STEP SELECT"),Object(y.a)(o,100,"STEP INC DEC"),Object(y.a)(o,18,"CC"),Object(y.a)(o,17,"CC REL"),Object(y.a)(o,21,"MIDI NRPN Coarse"),Object(y.a)(o,22,"MIDI NRPN Fine"),Object(y.a)(o,19,"Pitch Bend"),Object(y.a)(o,20,"AT CHAN"),Object(y.a)(o,16,"PRG"),Object(y.a)(o,23,"PRESET SEL"),Object(y.a)(o,24,"STEP SEL"),Object(y.a)(o,101,"CC"),o),B=240,F=247,U=4,H=5,_=6,G=7,W=8;function z(e){return e&&"object"===typeof e&&!Array.isArray(e)}function J(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var r=n.shift();if(z(e)&&z(r))for(var o in r)z(r[o])?(e[o]||Object.assign(e,Object(y.a)({},o,{})),J(e[o],r[o])):Object.assign(e,Object(y.a)({},o,r[o]));return J.apply(void 0,[e].concat(n))}function V(e){return e[0]===B&&e[e.byteLength-1]===F}function K(e){var t,n={},a=e[U],r=e[H],o=e[_],c=e[G];switch(a){case 1:case 2:break;default:return console.warn("parseSysexMessage: invalid command (".concat(C(a),")")),null}if(!(r in P))return console.warn("parseSysexMessage: invalid target",C(r),r,P),null;if(n[r]={},o>=25&&o<=126&&console.warn("parseSysexMessage: invalid/ignored idx",o),n[r][o]={},!(c in x))return console.warn("parseSysexMessage: invalid/ignored object",C(c)),null;if(1===c)t="name";else if(c>=13&&c<=18||c>=20&&c<=27||c>=54&&c<=55)t="control";else{if(126!==c)return console.warn("parseSysexMessage: invalid obj",c),null;t="midi"}if(console.log("".concat(P[r]," ").concat(C(o)," : ").concat(x[c]," ").concat(t)),"control"===t){n[r][o].controls=Object(y.a)({},c,{steps:{}});var l=e[W];if(l>=1&&l<=36)if(e.length>W+22){var s=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]],active:e[22]}}}(e.slice(W,W+23));n[r][o].controls[c].steps[s.index]=s.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),j(e));else if(96===l)console.log("parseSysexMessage: CONTROL MODE");else if(64===l)console.log("parseSysexMessage: LED MIDI CTRL");else if(l>=65&&l<=67)console.error("parseSysexMessage: LED"),n[r][o].controls[c].led=function(e){return{midi:e[2],on_color:e[6],off_color:e[10]}}(e.slice(W,W+3));else{if(127!==l)return console.warn("parseSysexMessage: unknown element: ".concat(C(l))),null;console.log("parseSysexMessage: ALL")}}return n}function Y(e){if(console.log("parseSysexDump",j(e)),null===e)return null;for(var t=e,n={},a=0;!((a=t.indexOf(B,a))<0);){a++;var r=t.indexOf(F,a),o=Array.from(t.slice(a,a+3)).map(function(e){return C(e)}).join(" ");if(o!==O.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: file does not contain a Nektar Pacer patch",a,r,o,"-",j(t)),null;if(127!==t[a+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(t[a+1+3])),null;var c=K(t.slice(a,r));c&&J(n,c)}return n}var X=n(9),q=n.n(X);function Q(e){var t=q.a.inputs.find(function(t){return t.id===e});return t||q.a.outputs.find(function(t){return t.id===e})}function $(e){return q.a.outputs.find(function(t){return t.id===e})}n(38);var Z=n(12),ee=(n(19),n(14)),te=function(e){return null===e.midis?null:l.a.createElement("div",null)},ne=function(e){var t=e.obj,n=e.config;return null===n||void 0===n?null:l.a.createElement("div",{className:"dump-control"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:7,className:"name"},x[t])),Object.keys(n.steps).map(function(e){return l.a.createElement("tr",{key:"".concat(t,".").concat(e)},l.a.createElement("td",null,"step ",e),l.a.createElement("td",null,"ch. ",C(n.steps[e].channel)),l.a.createElement("td",null,"msg ",C(n.steps[e].msg_type)),l.a.createElement("td",null,A[n.steps[e].msg_type]),l.a.createElement("td",null,j(n.steps[e].data)),l.a.createElement("td",null,67===n.steps[e].msg_type?ee.a(n.steps[e].data[0],!0):"  "),l.a.createElement("td",null,"active ",n.steps[e].active))}))))},ae=function(e){var t=e.controls;return null===t||void 0===t?null:l.a.createElement("div",{className:"dump-controls"},Object.keys(t).map(function(e){return l.a.createElement(ne,{key:e,obj:e,config:t[e]})}))},re=function(e){var t=e.index,n=e.data;return null===n||void 0===n?null:l.a.createElement("div",null,l.a.createElement("h2",null,"Preset ",function(e){if(0===e)return"CUR";var t=Math.floor((e-1)/6),n=(e-1)%6+1;return String.fromCharCode(t+65)+n.toString()}(parseInt(t,10))," (#",t,")"),l.a.createElement(ae,{controls:n.controls}),l.a.createElement(te,{controls:n.controls}))},oe=function(e){var t=e.presets;return null===t||void 0===t?null:l.a.createElement("div",null,Object.keys(t).map(function(e){return l.a.createElement(re,{key:e,index:e,data:t[e]})}))},ce=function(e){var t=e.data;return l.a.createElement("div",{className:"dump code"},t&&l.a.createElement(oe,{presets:t[1]}))},le=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={inputs:[],outputs:[],input:null,output:null},n.connectInput=function(e){e&&(e.hasListener("midimessage","all",n.props.onMidiInputEvent)?console.warn("Midi.connectInput: sysex messages on all channels listener already connected"):(console.log("Midi.connectInput: add listener for sysex messages on all channels"),e.addListener("midimessage","all",n.props.onMidiInputEvent)))},n.disconnectInput=function(e){e&&(e.removeListener(),console.log("disconnectInput: input ".concat(e.id," disconnected")))},n.connectOutput=function(e){e&&(n.setState({output:e.id}),console.log("connectOutput: input ".concat(e.id," connected")),n.props.setOutput&&n.props.setOutput(e.id))},n.disconnectOutput=function(){n.setState({output:null}),console.log("disconnectInput: output disconnected"),n.props.setOutput&&n.props.setOutput(null)},n.autoConnectInput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectInput: autoConnect ".concat(n.props.autoConnect),n.state.inputs),null===n.state.input){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.inputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectInput: port ".concat(c.name," ").concat(c.id)),"input"===c.type&&c.name.match(n.props.autoConnect)){console.log("Midi.autoConnectInput: connect ".concat(c.name)),n.setState({input:c.id}),n.connectInput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectInput: autoConnect skipped, already connected")},n.autoConnectOutput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectOutput: autoConnect ".concat(n.props.autoConnect)),null===n.state.output){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.outputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectOutput: port ".concat(c.name," ").concat(c.id)),"output"===c.type&&c.name.match(n.props.autoConnect)){console.log("Midi.autoConnectOutput: autoConnect: auto-connect ".concat(c.name)),n.connectOutput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectOutput: autoConnect skipped, already connected")},n.registerInputs=function(){console.log("Midi.registerInputs"),n.setState({inputs:X.inputs},function(){return n.autoConnectInput()})},n.registerOutputs=function(){console.log("Midi.registerOutputs"),n.setState({outputs:X.outputs},function(){return n.autoConnectOutput()})},n.unRegisterInputs=function(){console.log("Midi.registerInputs"),n.disconnectInput(Q(n.state.input)),n.setState({inputs:[],input:null})},n.unRegisterOutputs=function(){console.log("Midi.registerOutputs"),n.setState({outputs:[],output:null})},n.handleMidiConnectEvent=function(e){console.group("Midi: handleMidiConnectEvent: ".concat(e.port.type," ").concat(e.type,": ").concat(e.port.name),e),"input"===e.port.type&&(console.log("Midi: call registerInputs"),n.registerInputs()),"output"===e.port.type&&(console.log("Midi: call registerOutputs"),n.registerOutputs()),console.groupEnd()},n.togglePort=function(e){var t;if("input"===Q(e).type){console.log("toggle input");var a=n.state.input;n.state.input&&n.disconnectInput(Q(n.state.input)),e!==a&&n.connectInput((t=e,q.a.inputs.find(function(e){return e.id===t}))),n.setState({input:e===a?null:e})}else console.log("toggle output"),n.setState({output:e===n.state.output?null:e})},n.midiOn=function(e){e?console.warn("Midi.midiOn: WebMidi could not be enabled.",e):(console.log("Midi.midiOn: WebMidi enabled"),X.addListener("connected",n.handleMidiConnectEvent),X.addListener("disconnected",n.handleMidiConnectEvent))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){console.log("Midi: component did mount: WebMidi.enabled=".concat(X.enabled)),X.enabled?(console.log("Midi: component did mount: already enabled, register ports"),this.registerInputs(),this.registerOutputs()):(console.log("Midi: component did mount: Calling WebMidi.enable"),X.enable(this.midiOn,!0))}},{key:"componentWillUnmount",value:function(){console.log("Midi: component will unmount: unregister ports"),this.unRegisterInputs(),this.unRegisterOutputs()}},{key:"render",value:function(){var e=this,t=this.state,n=t.inputs,a=t.outputs;return l.a.createElement("div",{className:this.props.className},n.map(function(t){return e.props.inputRenderer(t,t.id===e.state.input,e.togglePort)}),a.map(function(t){return e.props.outputRenderer(t,t.id===e.state.output,e.togglePort)}))}}]),t}(c.Component),se=(n(42),n(22)),ue=n.n(se),ie=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props.port,t=this.props.selected,n=this.props.clickHandler;return console.log("MidiPort.render",e.type,e.name,t),l.a.createElement("div",{key:e.id,className:t?"port ".concat(e.type," enabled"):"port ".concat(e.type)},l.a.createElement("div",{className:"port-description"},l.a.createElement("span",{className:"type"},"input"===e.type?"in":"out",": "),l.a.createElement("span",{className:"port-name"},e.name," "),l.a.createElement(ue.a,{onChange:function(){return n(e.id)},checked:t,className:"react-switch",id:"normal-switch",height:20,width:42})))}}]),t}(c.Component),de=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,data:null,messages:[function(e){var t=[2,1,e],n=M(t);return t.push(n),N.concat(t)}(5),k(5,13)],customMessage:"",checksum:null},n.updateCustomMessage=function(e){for(var t=(e.target.value.match(/[0-9a-fA-F]+/g)||[]).join(""),a="",r=0;r<t.length;r++)r>0&&r%2===0&&(a+=" "),a+=t[r];n.setState({customMessage:a,cs:M(I(a,/ /g))})},n.sendCustomMessage=function(){var e=I(n.state.customMessage,/ /g);e&&e.length>0&&n.sendSysex(e)},n.handleMidiInputEvent=function(e){console.log("TestSender.handleMidiInputEvent",e,e.data),V(e.data)?(console.log("TestSender.handleMidiInputEvent: update state"),n.setState(Object(Z.a)(function(t){t.data=J(t.data||{},Y(e.data))}))):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:l.a.createElement(ie,{key:e.id,port:e,selected:t,clickHandler:n})},n.setOutput=function(e){console.log("Page.setOutput ".concat(e)),n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=$(n.state.output);t?n.setState({data:null},function(){return t.sendSysex(S,e)}):console.warn("send: output ".concat(n.state.output," not found"))}},n.sendMessage=function(e){n.sendSysex(e)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;console.log("SendTester.render",this.props);var t=this.state,n=t.data,a=t.messages,r=t.customMessage,o=t.cs;return console.log("SendTester.render",a,r.length%2),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"MIDI ports:"),l.a.createElement(le,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,setOutput:this.setOutput,className:"sub-header"}),l.a.createElement("div",{className:"main"},l.a.createElement("h2",null,"Test messages:"),l.a.createElement("div",null,a.map(function(t,n){return l.a.createElement("div",{key:n,className:"send-message"},l.a.createElement("button",{onClick:function(){return e.sendMessage(t)}},"send"),l.a.createElement("span",{className:"code light"},j(S)," "),l.a.createElement("span",{className:"code"},j(t)),l.a.createElement("span",{className:"code light"}," ",C(M(t))))})),l.a.createElement("h2",null,"Custom message:"),l.a.createElement("div",null,l.a.createElement("div",{className:"send-message"},l.a.createElement("button",{onClick:this.sendCustomMessage,disabled:0===r.length},"send"),l.a.createElement("span",{className:"code light"},j(S)," "),l.a.createElement("input",{type:"text",className:"code",size:"30",value:r,placeholder:"hex digits only",onChange:this.updateCustomMessage}),l.a.createElement("span",{className:"code light"}," ",C(o)))),l.a.createElement("h2",null,"Response:"),l.a.createElement("div",{className:"message code"},n&&JSON.stringify(n),l.a.createElement(ce,{data:n})))),l.a.createElement("div",{className:"help"},l.a.createElement("h2",null,"Help")))}}]),t}(c.Component),pe=(n(45),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return l.a.createElement("div",{className:a?"selected":"",onClick:function(){return r(n)}},t)}),me=function(e){var t=e.currentPreset,n=e.onClick;return l.a.createElement("div",{className:"selectors"},["A","B","C","D"].map(function(e){return l.a.createElement("div",{key:e},Array.from(Array(6).keys()).map(function(a){var r,o=e+(a+1),c="CUR"===(r=o)?0:6*(r.charCodeAt(0)-65)+parseInt(r[1],10);return l.a.createElement(pe,{name:o,id:c,selected:c===t,onClick:n,key:c})}))}))},fe=(n(47),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return l.a.createElement("div",{className:a?"selected":"",onClick:function(){return r(n)}},l.a.createElement("div",{className:"name"},t))}),Ee=function(e){var t=e.currentControl,n=e.onClick;return l.a.createElement("div",{className:"controls"},D.map(function(e){return l.a.createElement(fe,{key:e,name:x[e],id:e,selected:e===t,onClick:n})}),T.map(function(e){return l.a.createElement(fe,{key:e,name:x[e],id:e,selected:e===t,onClick:n})}),l.a.createElement("div",{className:"empty"},"\xa0"),w.map(function(e){return l.a.createElement(fe,{key:e,name:x[e],id:e,selected:e===t,onClick:n})}),l.a.createElement("div",{className:"empty"},"\xa0"),R.map(function(e){return l.a.createElement(fe,{key:e,name:x[e],id:e,selected:e===t,onClick:n})}))},he=(n(49),function(e){var t=e.note,n=e.onChange;return console.log("MidiNote ".concat(t),typeof t),l.a.createElement("select",{onChange:function(e){return n(e.target.value)},defaultValue:t},Array.from(Array(127).keys()).map(function(e){var t=ee.a(e,!0);return l.a.createElement("option",{key:e,value:e},t)}))}),ge=function(e){var t,n,a,r=e.index,o=e.config,s=e.updateCallback;return 67===o.msg_type?(t=l.a.createElement(he,{note:o.data[0],onChange:function(e){return s("data",0,e)}}),n=l.a.createElement("input",{type:"text",value:o.data[1],size:"4",onChange:function(e){return s("data",1,e.target.value)}}),a=""):(t=l.a.createElement("input",{type:"text",value:o.data[0],size:"4",onChange:function(e){return s("data",0,e.target.value)}}),n=l.a.createElement("input",{type:"text",value:o.data[1],size:"4",onChange:function(e){return s("data",1,e.target.value)}}),a=l.a.createElement("input",{type:"text",value:o.data[2],size:"4",onChange:function(e){return s("data",2,e.target.value)}})),l.a.createElement(c.Fragment,null,l.a.createElement("div",null,"step ",r,":"),l.a.createElement("div",null,l.a.createElement("select",{onChange:function(e){return s("msg_type",null,e.target.value)},defaultValue:o.msg_type},Object.keys(L).map(function(e){return l.a.createElement("option",{key:e,value:e},L[e])}))),l.a.createElement("div",null,t),l.a.createElement("div",null,n),l.a.createElement("div",null,a),l.a.createElement("div",null,l.a.createElement("select",{onChange:function(e){return s("channel",null,e.target.value)},defaultValue:o.channel},Array.from(Array(16).keys()).map(function(e){return l.a.createElement("option",{key:e,value:e},e)}))))},ve=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).onStepUpdate=function(e,t,a,r){console.log("ControlStepsEditor.onStepUpdate",e,a,r),n.props.onUpdate(e,t,a,r)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.props.steps;return console.log("ControlStepsEditor.render",t),l.a.createElement("div",{className:"steps"},l.a.createElement("div",null),l.a.createElement("div",null,"Type"),l.a.createElement("div",null,"Data 1"),l.a.createElement("div",null,"Data 2"),l.a.createElement("div",null,"Data 3"),l.a.createElement("div",null,"MIDI Channel"),Object.keys(t).map(function(n){return l.a.createElement(ge,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onStepUpdate(n,t,a,r)}})}))}}]),t}(c.Component),be=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,presetIndex:"",controlId:"",data:null},n.selectPreset=function(e){console.log("selectPreset ".concat(e)),n.setState({presetIndex:e}),e&&n.state.controlId&&n.sendSysex(k(e,n.state.controlId))},n.selectControl=function(e){console.log("selectControl ".concat(e));k(n.state.presetIndex,e);n.setState({controlId:e}),n.state.presetIndex&&e&&n.sendSysex(k(n.state.presetIndex,e))},n.controlStepsUpdate=function(e,t,a,r,o){console.log("Presets.controlStepsUpdate",e,t,r,o),n.setState(Object(Z.a)(function(n){"data"===a?n.data[1][n.presetIndex].controls[e].steps[t].data[r]=parseInt(o,10):n.data[1][n.presetIndex].controls[e].steps[t][a]=parseInt(o,10),n.data[1][n.presetIndex].controls[e].steps[t].changed=!0}))},n.sendSysex=function(e){console.log("sendSysex",e),n.state.output&&n.setState({data:null},function(){return $(n.state.output).sendSysex(S,e)})},n.handleMidiInputEvent=function(e){console.log("Presets.handleMidiInputEvent",e,e.data),V(e.data)?n.setState(Object(Z.a)(function(t){t.data=J(t.data||{},Y(e.data))})):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:l.a.createElement(ie,{key:e.id,port:e,selected:t,clickHandler:n})},n.setOutput=function(e){console.log("Page.setOutput ".concat(e)),n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=$(n.state.output);t?n.setState({data:null},function(){return t.sendSysex(S,e)}):console.warn("send: output ".concat(n.state.output," not found"))}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.presetIndex,a=t.controlId,r=t.data,o=!1;r&&(o=!0,"1"in r||(console.log("Presets: invalid data",r),o=!1),!o||n in r[1]||(console.log("Presets: preset ".concat(n," not found in data")),o=!1),!o||"controls"in r[1][n]||(console.log("Presets: controls not found in data"),o=!1),!o||a in r[1][n].controls||(console.log("Presets: control ".concat(a," not found in data")),o=!1),!o||"steps"in r[1][n].controls[a]||(console.log("Presets: steps not found in data"),o=!1)),o?console.log("Presets.render",o,Object.keys(r[1][n].controls[a].steps).length,r):console.log("Presets.render",o);var c,s=o=o&&6===Object.keys(r[1][n].controls[a].steps).length;return o&&(c=function(e,t,n){for(var a=[],r=Object.keys(n),o=0;o<r.length;o++){var c=r[o],l=n[c];if(l.changed){var s=[1,1,e,t];s.push(6*c+1,1,l.channel,0),s.push(6*c+2,1,l.msg_type,0),s.push(6*c+3,1,l.data[0],0),s.push(6*c+4,1,l.data[1],0),s.push(6*c+5,1,l.data[2],0),s.push(6*c+6,1,l.active);var u=M(s);s.push(u),a.push(N.concat(s))}}return console.log(a),a}(n,a,r[1][n].controls[a].steps)),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"1. Enable the input and output MIDI ports used with your Pacer:"),l.a.createElement(le,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,setOutput:this.setOutput,className:"sub-header"}),l.a.createElement("div",{className:"main"},l.a.createElement("div",null,l.a.createElement("h2",null,"2. Choose the preset and the control to view/edit:"),l.a.createElement(me,{currentPreset:n,onClick:this.selectPreset}),n&&l.a.createElement(Ee,{currentControl:a,onClick:this.selectControl})),s&&l.a.createElement(ve,{controlId:a,steps:r[1][n].controls[a].steps,onUpdate:function(t,n,r,o){return e.controlStepsUpdate(a,t,n,r,o)}}),s&&l.a.createElement("div",null,"Update message to send:",c.map(function(e){return l.a.createElement("pre",null,j(e))})),l.a.createElement("pre",null,JSON.stringify(r,null,4)))),l.a.createElement("div",{className:"help"},l.a.createElement("h2",null,"Help")))}}]),t}(c.Component),ye=n(25),Oe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={messages:[]},n.handleMidiInputEvent=function(e){console.log("Monitor.handleMidiInputEvent",e,e.type,e.data),n.setState(Object(Z.a)(function(t){t.messages.push(e.data)}))},n.renderPort=function(e,t,n){return void 0===e||null===e?null:l.a.createElement(ie,{key:e.id,port:e,selected:t,clickHandler:n})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("div",null,l.a.createElement(le,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"}),l.a.createElement("div",{className:"main"},l.a.createElement("div",null,l.a.createElement("h2",null,"2. MIDI messages:")),l.a.createElement("div",null,this.state.messages.map(function(e,t){var n=Object(ye.a)(e);return console.log(n),l.a.createElement("div",{key:t},Object.keys(n).map(function(e){return l.a.createElement("span",null,"".concat(e,": ").concat(n[e])," ")}))}))))),l.a.createElement("div",{className:"help"},l.a.createElement("h2",null,"Help")))}}]),t}(c.Component),Ce=(n(51),function(){return l.a.createElement("div",{className:"footer"},l.a.createElement("p",null,"\u201cNektar Technology\u201d, the logo and all other Nektar Technology product, technology or service names and logos are trademarks or registered trademarks of Nektar Technology, Inc."),l.a.createElement("p",null,"This web site is not endorsed by, directly affiliated with, maintained, or sponsored by Nektar Technology. This web site is published under ",l.a.createElement("a",{href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"_blank",rel:"noopener noreferrer"},"GNU General Public License v3")))}),je=function(e){function t(){return Object(i.a)(this,t),Object(p.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("div",null,"Sorry, this feature is not implemented yet.")),l.a.createElement("div",{className:"help"},l.a.createElement("h2",null,"Help")))}}]),t}(c.Component),Ie=n(13),Ne=n.n(Ie),Se=n(17),Me=n(26),ke=(n(57),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},n.onDrop=function(e){console.log("drop",e),n.props.onBusy(!0),n.readFiles(e)},n.handleMidiInputEvent=function(e){console.log("DumpDecoder.handleMidiInputEvent",e,e.data),V(e.data)?(console.log("DumpDecoder.handleMidiInputEvent: data is SysEx"),n.setState(Object(Z.a)(function(t){t.data=J(t.data||{},Y(e.data))}))):console.log("MIDI message is not a sysex message")},n.renderPort=function(e,t,n){return void 0===e||null===e?null:l.a.createElement(ie,{key:e.id,port:e,selected:t,clickHandler:n})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"readFiles",value:function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var n=this;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Se.a)(Ne.a.mark(function e(t){var a;return Ne.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=10;break;case 4:return e.t0=Uint8Array,e.next=7,new Response(t).arrayBuffer();case 7:e.t1=e.sent,V(a=new e.t0(e.t1))?n.setState(Object(Z.a)(function(e){e.data=J(e.data||{},Y(a)),n.props.onBusy(!1)})):console.log("readFiles: not a sysfile",j(a.slice(0,5)));case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.data;return console.log("DumpDecoder.render",this.props),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"1. Enable the input MIDI port used with your Pacer:"),l.a.createElement(le,{inputRenderer:this.renderPort,outputRenderer:this.renderPort,autoConnect:/Pacer midi1/i,onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"}),l.a.createElement("div",{className:"main"},l.a.createElement("h2",null,"2. Send a dump from the Pacer or drop a dump file:"),l.a.createElement(Me.a,{onDrop:this.onDrop,className:"drop-zone"},"Drop a binary sysex file here or click to open the file dialog"),l.a.createElement(ce,{data:e}))),l.a.createElement("div",{className:"help"},l.a.createElement("h2",null,"Help")))}}]),t}(c.Component)),Pe=function(e){var t=e.label,n=e.to,a=e.activeOnlyWhenExact;return l.a.createElement(E.a,{path:n,exact:a,children:function(e){var a=e.match;return l.a.createElement("span",{className:a?"header-link active":"header-link"},l.a.createElement(h.a,{to:n},t))}})},xe=function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={busy:!1},n.onBusy=function(e){n.setState({busy:e})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.state.busy;return l.a.createElement(g.a,null,l.a.createElement("div",{className:"app"},l.a.createElement("header",{className:"header"},l.a.createElement(Pe,{activeOnlyWhenExact:!0,to:"/",label:"Home"}),l.a.createElement(Pe,{to:"/presets",label:"Presets"}),l.a.createElement(Pe,{to:"/global",label:"Global config"}),l.a.createElement(Pe,{to:"/monitor",label:"MIDI monitor"}),l.a.createElement(Pe,{to:"/dumpdecoder",label:"Dump decoder"}),l.a.createElement(Pe,{to:"/testsender",label:"Debug"}),l.a.createElement("div",{className:"spacer"}),t&&l.a.createElement("div",{className:"busy"},"busy")),l.a.createElement(v.a,null,l.a.createElement(E.a,{exact:!0,path:"/",render:function(e){return l.a.createElement(b,null)}}),l.a.createElement(E.a,{path:"/presets",render:function(t){return l.a.createElement(be,{onBusy:e.onBusy})}}),l.a.createElement(E.a,{path:"/global",render:function(t){return l.a.createElement(je,{onBusy:e.onBusy})}}),l.a.createElement(E.a,{path:"/monitor",render:function(t){return l.a.createElement(Oe,{onBusy:e.onBusy})}}),l.a.createElement(E.a,{path:"/dumpdecoder",render:function(t){return l.a.createElement(ke,{onBusy:e.onBusy})}}),l.a.createElement(E.a,{path:"/testsender",render:function(t){return l.a.createElement(de,{onBusy:e.onBusy})}})),l.a.createElement(Ce,null)))}}]),t}(c.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function we(){}console.log=we,console.warn=we,console.error=we,u.a.render(l.a.createElement(xe,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[27,2,1]]]);
//# sourceMappingURL=main.4d6b29bf.chunk.js.map