(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},29:function(e,t,n){e.exports=n(78)},35:function(e,t,n){},37:function(e,t,n){},39:function(e,t,n){},41:function(e,t,n){},48:function(e,t,n){},50:function(e,t,n){},52:function(e,t,n){},54:function(e,t,n){},59:function(e,t,n){},61:function(e,t,n){},63:function(e,t,n){},65:function(e,t,n){},67:function(e,t,n){},75:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var a,r,o,c,l,s,i,u,d=n(0),m=n.n(d),p=n(23),f=n.n(p),h=(n(35),n(4)),v=n(5),g=n(7),E=n(6),b=n(8),y=(n(37),n(82)),O=n(80),C=n(81),j=n(83),N=(n(39),function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"content"},m.a.createElement("h1",null,"Requirements"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"This application requires a browser that support the ",m.a.createElement("a",{href:"http://webaudio.github.io/web-midi-api/",target:"_blank",rel:"noopener noreferrer"},"Web MIDI API"),"."),m.a.createElement("p",null,"Currently, only ",m.a.createElement("span",{className:"strong"},"Chrome")," and ",m.a.createElement("span",{className:"strong"},"Opera")," support this standard. This application will therefore ",m.a.createElement("span",{className:"italic"},"not")," work in Firefox, Safari, IE or Edge.")),m.a.createElement("h1",null,"Limitations"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"The current version of this editor isn't able to edit the Global configuration of the Pacer."),m.a.createElement("p",null,"This editor does not offer patches management either.")),m.a.createElement("h1",null,"Usage"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"Make sure your Pacer is connected to your computer and switched-on."),m.a.createElement("p",null,"On the upper right corner of the editor, check the MIDI settings."),m.a.createElement("p",null,"You need to enable the following input and output ports:"),m.a.createElement("p",null,"- under ",m.a.createElement("span",{className:"bold"},"OS X"),":"),m.a.createElement("img",{src:"help-ports-osx-no-retina.png",alt:""}),m.a.createElement("p",null,"- under ",m.a.createElement("span",{className:"bold"},"Windows"),":"),m.a.createElement("img",{src:"help-ports-windows.png",alt:""}),m.a.createElement("p",{className:"strong"},"Editing presets"),m.a.createElement("p",null,"The preset #0 is the ",m.a.createElement("span",{className:"italic"},"current")," preset. When you edit preset #0 your changes are immediately applied."),m.a.createElement("p",null,"When you edit any other presets, your changes will only be applied when you load this preset."),m.a.createElement("p",{className:"strong"},"In case of problem"),m.a.createElement("ol",null,m.a.createElement("li",null,"Restart your Pacer"),m.a.createElement("li",null,"Reload the editor"))),m.a.createElement("h1",null,"MIDI in your browser"),m.a.createElement("div",{className:"doc"},m.a.createElement("div",null,m.a.createElement("p",null,"You need to allow your browser to use your MIDI device:"),m.a.createElement("img",{src:"help-01.png",alt:""})),m.a.createElement("div",null,m.a.createElement("p",null,"In case you didn't allow the use of MIDI device and want to change that, you can right-click on the URL icon and change the setting:"),m.a.createElement("img",{src:"help-02.png",alt:""}))),m.a.createElement("h1",null,"FAQ"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,m.a.createElement("i",null,"To be completed..."))),m.a.createElement("h1",null,"Contribute"),m.a.createElement("div",{className:"doc"},m.a.createElement("p",null,"This editor is an Open Source project. You are welcome to contribute."),m.a.createElement("p",null,"The source-code is hosted by GitHub: ",m.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"pacer-editor")),m.a.createElement("p",null,"To contribute your bug fixes, new features, etc.: 1) fork the project, 2) create a pull-request.")),m.a.createElement("h1",null,"Thanks"),m.a.createElement("div",{className:"doc"},"Thank you to the Nektar support service for having provided precious informations regarding the SysEx data format of the Pacer. This editor would not have been possible without their support."))}}]),t}(d.Component)),w=n(1),k=n(24),S=function(e){return null===e||void 0===e?"":function(e,t,n){for(var a="",r=n||"0",o=(t||2)-e.length;a.length<o;)a+=r;return a+e}(e.toString(16).toUpperCase(),2)},I=function(e){return null===e||void 0===e?"":Array.from(e).map(function(e){return S(e)}).join(" ")},P=function(e,t){var n=t?e.replace(t,""):e;if(n.length%2>0)return null;if(0===n.length)return null;for(var a=new Uint8Array(n.length/2),r=0;r<n.length/2;r++)a[r]=parseInt(n.substr(2*r,2),16);return a};function M(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push({key:n,value:e[n]});return t.sort(function(e,t){return e.value.localeCompare(t.value)}),t}var x="Pacer.*",D=[0,1,119],A=[127],B=1,F=2,R=1,T=(a={},Object(w.a)(a,R,"preset"),Object(w.a)(a,5,"global"),Object(w.a)(a,7,"full backup"),a),_=1,L=13,U=18,G=20,W=27,H=54,Z=55,z=126,Y=127,V=(r={},Object(w.a)(r,_,"name"),Object(w.a)(r,L,"1"),Object(w.a)(r,14,"2"),Object(w.a)(r,15,"3"),Object(w.a)(r,16,"4"),Object(w.a)(r,17,"5"),Object(w.a)(r,U,"6"),Object(w.a)(r,19,"RESERVED"),Object(w.a)(r,G,"A"),Object(w.a)(r,21,"B"),Object(w.a)(r,22,"C"),Object(w.a)(r,23,"D"),Object(w.a)(r,24,"FS 1"),Object(w.a)(r,25,"FS 2"),Object(w.a)(r,26,"FS 3"),Object(w.a)(r,W,"FS 4"),Object(w.a)(r,H,"EXP 1"),Object(w.a)(r,Z,"EXP 2"),Object(w.a)(r,z,"MIDI configuration"),Object(w.a)(r,Y,"ALL"),r),q={1:"Preset Name",13:"Stompswitch 1",14:"Stompswitch 2",15:"Stompswitch 3",16:"Stompswitch 4",17:"Stompswitch 5",18:"Stompswitch 6",19:"RESERVED",20:"Stompswitch A",21:"Stompswitch B",22:"Stompswitch C",23:"Stompswitch D",24:"Footswitch 1",25:"Footswitch  2",26:"Footswitch  3",27:"Footswitch  4",54:"Expression Pedal 1",55:"Expression Pedal 2",126:"MIDI configuration",127:"ALL"},K=[20,21,22,23],X=[13,14,15,16,17,18],J=[24,25,26,27],Q=[54,55],$=97,ee=(o={},Object(w.a)(o,0,"CC"),Object(w.a)(o,3,"NRPN C"),Object(w.a)(o,4,"NRPN F"),Object(w.a)(o,1,"PITCH"),Object(w.a)(o,2,"AT CHAN"),Object(w.a)(o,126,"DAW FUNC"),Object(w.a)(o,$,"CTRL_OFF"),Object(w.a)(o,71,"CC TOGGLE"),Object(w.a)(o,64,"CC"),Object(w.a)(o,72,"CC STEP"),Object(w.a)(o,67,"NOTE"),Object(w.a)(o,68,"NOTE TOGGLE"),Object(w.a)(o,69,"PRG BANK"),Object(w.a)(o,70,"PRG STEP"),Object(w.a)(o,87,"NRPN COARSE"),Object(w.a)(o,88,"NRPN FINE"),Object(w.a)(o,85,"MMC"),Object(w.a)(o,89,"RELAY"),Object(w.a)(o,98,"PRESET SELECT"),Object(w.a)(o,86,"PRESET INC DEC"),Object(w.a)(o,99,"STEP SELECT"),Object(w.a)(o,100,"STEP INC DEC"),Object(w.a)(o,18,"CC"),Object(w.a)(o,17,"CC REL"),Object(w.a)(o,21,"NRPN C"),Object(w.a)(o,22,"NRPN F"),Object(w.a)(o,19,"PITCH"),Object(w.a)(o,20,"AT CHAN"),Object(w.a)(o,16,"PRG"),Object(w.a)(o,23,"PRESET SEL"),Object(w.a)(o,24,"STEP SEL"),Object(w.a)(o,101,"CC"),o),te=(c={},Object(w.a)(c,$,"OFF"),Object(w.a)(c,71,"CC Toggle"),Object(w.a)(c,64,"CC Trigger"),Object(w.a)(c,72,"CC Step"),Object(w.a)(c,67,"Note"),Object(w.a)(c,68,"Note Toggle"),Object(w.a)(c,69,"Program & Bank"),Object(w.a)(c,70,"Program Step"),Object(w.a)(c,87,"NRPN Coarse"),Object(w.a)(c,88,"NRPN Fine"),Object(w.a)(c,85,"MIDI Machine Control"),Object(w.a)(c,89,"Relay Outputs"),Object(w.a)(c,98,"Preset Select"),Object(w.a)(c,86,"Preset Inc/Dec"),Object(w.a)(c,99,"Step Select"),Object(w.a)(c,100,"Step Inc/Dec"),c),ne=M(te),ae=(l={},Object(w.a)(l,18,"CC"),Object(w.a)(l,17,"CC REL"),Object(w.a)(l,21,"NRPN Coarse"),Object(w.a)(l,22,"NRPN Fine"),Object(w.a)(l,19,"Pitch Bend"),Object(w.a)(l,20,"AT Chan."),Object(w.a)(l,16,"Program"),Object(w.a)(l,23,"Preset Sel"),Object(w.a)(l,24,"Step Sel"),M((s={},Object(w.a)(s,101,"Load CC"),Object(w.a)(s,67,"MIDI Note"),Object(w.a)(s,69,"Program & Bank"),Object(w.a)(s,87,"NRPN Coarse"),Object(w.a)(s,88,"NRPN Fine"),Object(w.a)(s,85,"MIDI Machine Control"),Object(w.a)(s,89,"Relay Outputs"),Object(w.a)(s,126,"DAW Func."),Object(w.a)(s,$,"OFF"),s))),re=(i={},Object(w.a)(i,0,["","",""]),Object(w.a)(i,3,["","",""]),Object(w.a)(i,4,["","",""]),Object(w.a)(i,1,["","",""]),Object(w.a)(i,2,["","",""]),Object(w.a)(i,126,["function","not used","not used"]),Object(w.a)(i,$,["","",""]),Object(w.a)(i,71,["controller","value 1","value 2"]),Object(w.a)(i,64,["controller","down","up"]),Object(w.a)(i,72,["controller","start","end"]),Object(w.a)(i,67,["note","velocity","not used"]),Object(w.a)(i,68,["note","velocity","not used"]),Object(w.a)(i,69,["program","bank LSB","bank MSB"]),Object(w.a)(i,70,["not used","start","end"]),Object(w.a)(i,87,["value","NRPN LSB","NRPN MSB"]),Object(w.a)(i,88,["value","NRPN LSB","NRPN MSB"]),Object(w.a)(i,85,["device","command","not used"]),Object(w.a)(i,89,["mode","relay #","not used"]),Object(w.a)(i,98,["preset","not used","not used"]),Object(w.a)(i,86,["inc/dec","not used","not used"]),Object(w.a)(i,99,["target","step","not used"]),Object(w.a)(i,100,["target","inc/dec","not used"]),Object(w.a)(i,18,["","",""]),Object(w.a)(i,17,["","",""]),Object(w.a)(i,21,["","",""]),Object(w.a)(i,22,["","",""]),Object(w.a)(i,19,["","",""]),Object(w.a)(i,20,["","",""]),Object(w.a)(i,16,["","",""]),Object(w.a)(i,23,["","",""]),Object(w.a)(i,24,["","",""]),Object(w.a)(i,101,["controller","value","not used"]),i),oe={0:"Off",1:"1A Pink",2:"1B Dim Pink",3:"2A Red",4:"2B Dim Red",5:"3A Orange",6:"3B Dim Orange",7:"4A Amber",8:"4B Dim Amber",9:"5A Yellow",10:"5B Dim Yellow",11:"6A Lime",12:"6B Dim Lime",13:"7A Green",14:"7B Dim Green",15:"8A Teal",16:"8B Dim Teal",17:"9A Blue",18:"9B Dim Blue",19:"10A Lavender",20:"10B Dim Lavender",21:"11A Purple",22:"11B Dim Purple",23:"12A White",24:"12B Dim White"},ce=96,le=(u={},Object(w.a)(u,0,"All"),Object(w.a)(u,1,"External Step Select"),Object(w.a)(u,2,"Sequence"),u),se=240,ie=247,ue=4,de=5,me=6,pe=7,fe=8;function he(e){return e&&"object"===typeof e&&!Array.isArray(e)}function ve(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var r=n.shift();if(he(e)&&he(r))for(var o in r)he(r[o])?(e[o]||Object.assign(e,Object(w.a)({},o,{})),ve(e[o],r[o])):Object.assign(e,Object(w.a)({},o,r[o]));return ve.apply(void 0,[e].concat(n))}function ge(e){return e[0]===se&&e[e.byteLength-1]===ie}function Ee(e){var t,n={},a=e[ue],r=e[de],o=e[me],c=e[pe];switch(a){case B:case F:break;default:return console.warn("parseSysexMessage: invalid command (".concat(S(a),")")),null}if(!(r in T))return console.warn("parseSysexMessage: invalid target",S(r),r,T),null;if(n[r]={},n[r][o]={},!(c in V))return null;if(c===_)t="name";else if(c>=L&&c<=U||c>=G&&c<=W||c>=H&&c<=Z)t="control";else{if(c!==z)return console.warn("parseSysexMessage: invalid obj",c),null;t="midi"}if("name"===t&&(n[r][o].name=function(e){var t=e[1];return String.fromCharCode.apply(null,e.slice(2,2+t))}(e.slice(fe))),"control"===t){n[r][o].controls=Object(w.a)({},c,{steps:{}});var l=e[fe];if(l>=1&&l<=36)if(e.length>fe+22){var s=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]],active:e[22]}}}(e.slice(fe,fe+23));n[r][o].controls[c].steps[s.index]=s.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),I(e));else if(l===ce){var i=function(e){return{control_mode:e[1]}}(e.slice(fe,e.length-1));n[r][o].controls[c]=ve(n[r][o].controls[c],i)}else if(l>=64&&l<=87){var u=function(e){for(var t,n,a,r={steps:{}},o=0;o<e.length;){var c=e[o];switch(0===o&&(a=""+((c-64)/4+1)),a in r.steps||(r.steps[a]={}),c){case 64:case 68:case 72:case 76:case 80:case 84:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_midi_ctrl=n;break;case 65:case 69:case 73:case 77:case 81:case 85:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_active_color=n;break;case 66:case 70:case 74:case 78:case 82:case 86:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_inactive_color=n;break;case 67:case 71:case 75:case 79:case 83:case 87:t=e[++o],o++,n=1===t?e[o]:Array.from(e.slice(o,o+t)),o+=t,r.steps[a].led_num=n;break;case 127:o=e.length;break;default:o++}}return r}(e.slice(fe,e.length-1));n[r][o].controls[c]=ve(n[r][o].controls[c],u)}else if(127!==l)return console.warn("parseSysexMessage: unknown element: ".concat(S(l))),null}if("midi"===t){n[r][o].midi={};var d=e[fe];if(!(d>=1&&d<=96))return console.warn("parseSysexMessage: unknown element: ".concat(S(d))),null;if(e.length>fe+19){var m=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]]}}}(e.slice(fe,fe+20));n[r][o].midi[m.index]=m.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),I(e))}return n}function be(e){if(null===e)return null;for(var t={},n=0;!((n=e.indexOf(se,n))<0);){n++;var a=e.indexOf(ie,n),r=Array.from(e.slice(n,n+3)).map(function(e){return S(e)}).join(" ");if(r!==k.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: file does not contain a Nektar Pacer patch",n,a,r,"-",I(e)),null;if(127!==e[n+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(e[n+1+3])),null;var o=Ee(e.slice(n,a));o&&ve(t,o)}return t}function ye(e){return null===e||void 0===e||0===e.length?128:128-Uint8Array.from(e).reduce(function(e,t){return e+t})%128}function Oe(){var e=[F,R,Y],t=ye(e);return e.push(t),A.concat(e)}function Ce(e){var t=[F,R,e,Y],n=ye(t);return t.push(n),A.concat(t)}function je(e,t){var n=[F,R,e,t],a=ye(n);return n.push(a),A.concat(n)}function Ne(e,t,n){var a=function(e,t,n){for(var a=[],r=Object.keys(n),o=0;o<r.length;o++){var c=r[o],l=n[c];if(l.changed){var s=[B,R,e,t];s.push(6*(c-1)+1,1,l.channel,0),s.push(6*(c-1)+2,1,l.msg_type,0),s.push(6*(c-1)+3,1,l.data[0],0),s.push(6*(c-1)+4,1,l.data[1],0),s.push(6*(c-1)+5,1,l.data[2],0),s.push(6*(c-1)+6,1,l.active),s.push(4*(c-1)+64,1,l.led_midi_ctrl,0),s.push(4*(c-1)+65,1,l.led_active_color,0),s.push(4*(c-1)+66,1,l.led_inactive_color,0),s.push(4*(c-1)+67,1,l.led_num,0),s.push(ye(s)),a.push(A.concat(s))}}return a}(e,t,n[R][e].controls[t].steps);return n[R][e].controls[t].changed&&a.push(function(e,t,n){var a=[B,R,e,t,ce,1,n];return a.push(ye(a)),A.concat(a)}(e,t,n[R][e].controls[t].control_mode)),a}function we(e,t){if(!t[R][e].changed)return null;var n=[B,R,e,_,0],a=t[R][e].name;n.push(a.length);for(var r=0;r<a.length;r++)n.push(a.charCodeAt(r));return n.push(ye(n)),A.concat(n)}function ke(e,t){return function(e,t){for(var n=[],a=Object.keys(t),r=0;r<a.length;r++){var o=a[r],c=t[o];if(c.changed){var l=[B,R,e,z];l.push(6*(o-1)+1,1,c.channel,0),l.push(6*(o-1)+2,1,c.msg_type,0),l.push(6*(o-1)+3,1,c.data[0],0),l.push(6*(o-1)+4,1,c.data[1],0),l.push(6*(o-1)+5,1,c.data[2],0),l.push(6*(o-1)+6,1,c.active),l.push(ye(l)),n.push(A.concat(l))}}return n}(e,t[R][e].midi)}var Se=n(10),Ie=n.n(Se);function Pe(e){var t=Ie.a.inputs.find(function(t){return t.id===e});return t||Ie.a.outputs.find(function(t){return t.id===e})}function Me(e){return Ie.a.inputs.find(function(t){return t.id===e})}function xe(e){return Ie.a.outputs.find(function(t){return t.id===e})}function De(e){var t=Me(e);return t?t.name:null}function Ae(e){var t=xe(e);return t?t.name:null}n(41);var Be=n(3),Fe=(n(21),n(15)),Re=function(e){if(0===e)return"CUR";var t=Math.floor((e-1)/6),n=(e-1)%6+1;return String.fromCharCode(t+65)+n.toString()},Te=function(e){var t=e.settings;return null===t||void 0===t?null:m.a.createElement("div",{className:"dump-control"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{colSpan:6,className:"name"},"MIDI settings")),Object.keys(t).map(function(e){var n=ee[t[e].msg_type];return 67===t[e].msg_type&&(n=n+" "+Fe.a(t[e].data[0],!0)+" vel. "+t[e].data[1]),m.a.createElement("tr",{key:e},m.a.createElement("td",null,"settings ",e),m.a.createElement("td",null,"ch. ",S(t[e].channel)),m.a.createElement("td",null,"msg ",S(t[e].msg_type)),m.a.createElement("td",null,n),m.a.createElement("td",null,I(t[e].data)),m.a.createElement("td",null,t[e].active?"active":"OFF"))}))))},_e=function(e){var t=e.settings;return null===t?null:m.a.createElement("div",null,m.a.createElement(Te,{settings:t}))},Le=function(e){var t=e.obj,n=e.config;return null===n||void 0===n?null:m.a.createElement("div",{className:"dump-control"},m.a.createElement("table",null,m.a.createElement("tbody",null,m.a.createElement("tr",null,m.a.createElement("td",{colSpan:10,className:"name"},q[t])),m.a.createElement("tr",null,m.a.createElement("th",null,"step"),m.a.createElement("th",null,"ch."),m.a.createElement("th",null,"type"),m.a.createElement("th",null,"data"),m.a.createElement("th",null,"decoded"),m.a.createElement("th",null,"active"),m.a.createElement("th",null,"LED num"),m.a.createElement("th",null,"LED On"),m.a.createElement("th",null,"LED Off"),m.a.createElement("th",null,"LED midi")),Object.keys(n.steps).map(function(e){var a=ee[n.steps[e].msg_type];67===n.steps[e].msg_type&&(a=a+" "+Fe.a(n.steps[e].data[0],!0)+" vel. "+n.steps[e].data[1]);var r=n.steps[e].led_inactive_color,o=n.steps[e].led_active_color;return m.a.createElement("tr",{key:"".concat(t,".").concat(e)},m.a.createElement("td",null,e),m.a.createElement("td",null,S(n.steps[e].channel)),m.a.createElement("td",null,S(n.steps[e].msg_type)),m.a.createElement("td",null,I(n.steps[e].data)),m.a.createElement("td",null,a),m.a.createElement("td",null,n.steps[e].active?"active":"OFF"),m.a.createElement("td",null,S(n.steps[e].led_num)),m.a.createElement("td",null,o in oe?oe[o]:S(o)),m.a.createElement("td",null,r in oe?oe[r]:S(r)),m.a.createElement("td",null,S(n.steps[e].led_midi_ctrl)))}))))},Ue=function(e){var t=e.controls;return null===t||void 0===t?null:m.a.createElement("div",{className:"dump-controls"},Object.keys(t).map(function(e){return m.a.createElement(Le,{key:e,obj:e,config:t[e]})}))},Ge=function(e){var t=e.index,n=e.data;return null===n||void 0===n?null:m.a.createElement("div",null,m.a.createElement("h3",null,"Preset ",Re(parseInt(t,10))," (#",t,"): ",n.name),m.a.createElement(Ue,{controls:n.controls}),m.a.createElement(_e,{settings:n.midi}))},We=function(e){var t=e.presets;return null===t||void 0===t?null:m.a.createElement("div",null,Object.keys(t).map(function(e){return m.a.createElement(Ge,{key:e,index:e,data:t[e]})}))},He=function(e){var t=e.data;return m.a.createElement("div",{className:"dump code"},t&&m.a.createElement(We,{presets:t[R]}))},Ze=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={inputs:[],outputs:[],input:null,output:null,pacerPresent:!1},n.connectInput=function(e){n.props.onMidiInputEvent&&e&&(e.hasListener("midimessage","all",n.props.onMidiInputEvent)?console.warn("Midi.connectInput: sysex messages on all channels listener already connected"):(console.log("Midi.connectInput: add listener for sysex messages on all channels"),e.addListener("midimessage","all",n.props.onMidiInputEvent),n.props.onInputConnection&&n.props.onInputConnection(e.id),console.log("connectInput: ",e.name)))},n.disconnectInput=function(e){e&&(e.removeListener&&e.removeListener(),console.log("disconnectInput: input ".concat(e.id," disconnected")),n.props.onInputDisconnection&&n.props.onInputDisconnection(e.id))},n.connectOutput=function(e){e&&(n.setState({output:e.id}),console.log("connectOutput: output ".concat(e.id," connected")),n.props.onOutputConnection&&n.props.onOutputConnection(e.id))},n.disconnectOutput=function(){if(n.state.output){var e=n.state.output;n.setState(Object(Be.a)(function(e){e.pacerOutputConnected=!1,e.output=null})),console.log("disconnectOutput: output ".concat(e," disconnected")),n.props.onOutputDisconnection&&n.props.onOutputDisconnection(e)}},n.autoConnectInput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectInput: autoConnect ".concat(n.props.autoConnect),n.state.inputs),null===n.state.input){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.inputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectInput: port ".concat(c.name," ").concat(c.id)),"input"===c.type&&null!=c.name.match(new RegExp(n.props.autoConnect,"i"))){console.log("Midi.autoConnectInput: connect ".concat(c.name)),n.setState({input:c.id}),n.connectInput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectInput: autoConnect skipped, already connected")},n.autoConnectOutput=function(){if(n.props.autoConnect)if(console.log("Midi.autoConnectOutput: autoConnect ".concat(n.props.autoConnect)),null===n.state.output){var e=!0,t=!1,a=void 0;try{for(var r,o=n.state.outputs[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var c=r.value;if(console.log("Midi.autoConnectOutput: port ".concat(c.name," ").concat(c.id)),"output"===c.type&&null!=c.name.match(new RegExp(n.props.autoConnect,"i"))){console.log("Midi.autoConnectOutput: autoConnect: auto-connect ".concat(c.name)),n.connectOutput(c);break}}}catch(l){t=!0,a=l}finally{try{e||null==o.return||o.return()}finally{if(t)throw a}}}else console.log("Midi.autoConnectOutput: autoConnect skipped, already connected")},n.registerInputs=function(){var e=new RegExp(n.props.only,"i"),t=new RegExp(x,"i");n.setState({inputs:Se.inputs.filter(function(t){return null!=t.name.match(e)}),pacerPresent:Se.inputs.findIndex(function(e){return null!=e.name.match(t)})>=0},function(){return n.autoConnectInput()})},n.registerOutputs=function(){var e=new RegExp(n.props.only,"i");n.setState({outputs:Se.outputs.filter(function(t){return null!=t.name.match(e)})},function(){return n.autoConnectOutput()})},n.unRegisterInputs=function(){console.log("Midi.unRegisterInputs"),n.disconnectInput(Pe(n.state.input)),n.setState({inputs:[],input:null,pacerPresent:!1})},n.unRegisterOutputs=function(){console.log("Midi.unRegisterOutputs"),n.disconnectOutput(),n.setState({outputs:[],output:null})},n.handleMidiConnectEvent=function(e){console.group("Midi: handleMidiConnectEvent: ".concat(e.port.type," ").concat(e.type,": ").concat(e.port.name),e),"disconnected"===e.type&&(n.disconnectInput(e.port.id),n.disconnectOutput()),e.port.name.match(new RegExp(n.props.only,"i"))?("input"===e.port.type&&(console.log("Midi.handleMidiConnectEvent: call registerInputs"),n.registerInputs()),"output"===e.port.type&&(console.log("Midi.handleMidiConnectEvent: call registerOutputs"),n.registerOutputs())):console.log("Midi.handleMidiConnectEvent: port ignored: ".concat(e.port.name)),console.groupEnd()},n.togglePort=function(e){if("input"===Pe(e).type){console.log("toggle input",e);var t=n.state.input;n.state.input&&n.disconnectInput(Pe(n.state.input)),e!==t&&n.connectInput(Me(e)),n.setState({input:e===t?null:e})}else{console.log("toggle output",e);var a=n.state.output;n.state.output&&n.disconnectOutput(),e!==a&&n.connectOutput(Pe(e))}},n.midiOn=function(e){e?console.warn("Midi.midiOn: WebMidi could not be enabled.",e):(console.log("Midi.midiOn: WebMidi enabled"),Se.addListener("connected",n.handleMidiConnectEvent),Se.addListener("disconnected",n.handleMidiConnectEvent))},n.portsGrouped=function(){var e={},t=!0,a=!1,r=void 0;try{for(var o,c=Se.inputs[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;e[l.name]={input:{id:l.id,selected:l.id===n.state.input},output:null}}}catch(f){a=!0,r=f}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}var s=!0,i=!1,u=void 0;try{for(var d,m=Se.outputs[Symbol.iterator]();!(s=(d=m.next()).done);s=!0){var p=d.value;p.name in e||(e[p.name]={input:null,output:null}),e[p.name].output={id:p.id,selected:p.id===n.state.output}}}catch(f){i=!0,u=f}finally{try{s||null==m.return||m.return()}finally{if(i)throw u}}return e},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"componentDidMount",value:function(){console.log("Midi: component did mount: WebMidi.enabled=".concat(Se.enabled)),Se.enabled?(console.log("Midi: component did mount: already enabled, register ports"),this.registerInputs(),this.registerOutputs()):(console.log("Midi: component did mount: Calling WebMidi.enable"),Se.enable(this.midiOn,!0))}},{key:"componentWillUnmount",value:function(){console.log("Midi: component will unmount: unregister ports"),this.unRegisterInputs(),this.unRegisterOutputs()}},{key:"render",value:function(){var e=this.state.pacerPresent;return m.a.createElement(d.Fragment,null,this.props.portsRenderer(this.portsGrouped(),this.togglePort),!e&&m.a.createElement(d.Fragment,null,this.props.children))}}]),t}(d.Component);Ze.defaultProps={classname:"",only:".*"};var ze=n(19),Ye=n.n(ze),Ve=function(e){var t=e.groupedPorts,n=e.clickHandler;return m.a.createElement("div",{className:"ports-grid"},Object.keys(t).map(function(e,a){return m.a.createElement("div",{className:"port",key:a},m.a.createElement("div",{className:"port-name"},e),t[e].input&&m.a.createElement("div",{className:"port-switch"},m.a.createElement(d.Fragment,null,"in\xa0",m.a.createElement(Ye.a,{onChange:function(){return n(t[e].input.id)},checked:t[e].input.selected,className:"react-switch",id:"switch-".concat(t[e].input.id),height:16,width:36}))),t[e].output&&m.a.createElement("div",{className:"port-switch"},m.a.createElement(d.Fragment,null,"out\xa0",m.a.createElement(Ye.a,{onChange:function(){return n(t[e].output.id)},checked:t[e].output.selected,className:"react-switch",id:"switch-".concat(t[e].output.id),height:16,width:36}))))}))};var qe=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,data:null,messages:[{name:"read current preset",message:Ce(0)},{name:"read preset A1",message:Ce(1)},{name:"read stompswitch #1 of preset #5",message:je(5,13)},{name:"read all presets (takes some time)",message:Oe()}],customMessage:""},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},3e4),n.props.onBusy(!0)},n.updateCustomMessage=function(e){var t=(e.target.value.toUpperCase().match(/[0-9A-F ]+/g)||[]).join("");n.setState({customMessage:t})},n.sendCustomMessage=function(){if(n.state.customMessage){var e=Array.from(P(n.state.customMessage,/ /g));e&&e.length>0&&(e.push(ye(e)),n.sendSysex(A.concat(e)))}},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){n.setState(Object(Be.a)(function(t){var n=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;ge(l)?t.data=ve(t.data||{},be(l)):console.log("MIDI message is not a sysex message")}}catch(s){a=!0,r=s}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}})),n.props.onBusy(!1)},1e3),n.setOutput=function(e){n.setState({output:e})},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=xe(n.state.output);t?(n.showBusy(),n.setState({data:null},function(){return t.sendSysex(D,e)})):console.warn("send: output ".concat(n.state.output," not found"))}},n.sendMessage=function(e){n.sendSysex(e)},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){for(var e=this,t=this.state,n=t.data,a=t.messages,r=t.customMessage,o=ye(P(r,/ /g)),c="",l=0;l<r.length;l++)l>0&&l%2===0&&(c+=" "),c+=r[l];return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Test messages:"),m.a.createElement("div",{className:"content-row-content-content"},a.map(function(t,n){return m.a.createElement("div",{key:n,className:"send-message"},m.a.createElement("button",{onClick:function(){return e.sendMessage(t.message)}},"send"),m.a.createElement("span",{className:"code light"},I(D.concat(t.message.slice(0,1)))," "),m.a.createElement("span",{className:"code"},I(t.message.slice(1,-1))," "),m.a.createElement("span",{className:"code light"}," ",I(t.message.slice(-1))),m.a.createElement("span",{className:"message-name"}," ",t.name))}))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Custom message:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"send-message"},m.a.createElement("button",{onClick:this.sendCustomMessage,disabled:r.length%2!==0},"send"),m.a.createElement("span",{className:"code light"},I(D)," ",I(A)," "),m.a.createElement("input",{type:"text",className:"code",size:"30",value:r,placeholder:"hex digits only",onChange:this.updateCustomMessage}),m.a.createElement("span",{className:"code light"}," ",S(o))),m.a.createElement("div",{className:"custom-message code"},I(D)," ",I(A)," ",c," ",S(o)))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement("h2",null,"Response:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"message code"},m.a.createElement(He,{data:n}))))),m.a.createElement("div",{className:"right-column"},m.a.createElement(Ze,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onOutputConnection:this.setOutput,className:""},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))))}}]),t}(d.Component),Ke=n(9),Xe=n.n(Ke),Je=n(14),Qe=(n(48),n(50),function(e){var t=e.id,n=e.index,a=e.name,r=e.selected,o=e.onClick;return m.a.createElement("div",{className:r?"selector selected":"selector",onClick:function(){return o(n)}},m.a.createElement("span",{className:"preset-id"},n," ",t)," ",m.a.createElement("span",{className:"preset-name"},a))}),$e=function(e){var t=e.data,n=e.currentPreset,a=e.onClick;return m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"preset-selectors"},m.a.createElement(Qe,{id:"CUR",index:0,name:"",selected:0===n,onClick:a,key:0}),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),["A","B","C","D"].map(function(e){return m.a.createElement(d.Fragment,{key:e},Array.from(Array(6).keys()).map(function(r){var o,c=e+(r+1),l=6*((o=c).charCodeAt(0)-65)+parseInt(o[1],10),s=t&&t[R]&&t[R][l]?t[R][l].name:"";return m.a.createElement(Qe,{id:c,index:l,name:s,selected:l===n,onClick:a,key:l})}))})))},et=(n(52),function(e){var t=e.name,n=e.id,a=e.selected,r=e.onClick;return m.a.createElement("div",{className:a?"selector selected":"selector",onClick:function(){return r(n)}},m.a.createElement("div",{className:"name"},t))}),tt=function(e){var t=e.currentControl,n=e.onClick;return m.a.createElement("div",{className:"controls"},J.map(function(e){return m.a.createElement(et,{key:e,name:V[e],id:e,selected:e===t,onClick:n})}),Q.map(function(e){return m.a.createElement(et,{key:e,name:V[e],id:e,selected:e===t,onClick:n})}),m.a.createElement("div",{className:"no-control"},"\xa0"),K.map(function(e){return m.a.createElement(et,{key:e,name:V[e],id:e,selected:e===t,onClick:n})}),m.a.createElement("div",{className:"no-control"},"\xa0"),X.map(function(e){return m.a.createElement(et,{key:e,name:V[e],id:e,selected:e===t,onClick:n})}))},nt=(n(54),function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{value:t,onChange:function(e){return n(e.target.value)}},m.a.createElement("option",{value:"0"},"0"),m.a.createElement("option",{value:"1"},"1"))}),at=function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{value:t,onChange:function(e){return n(e.target.value)}},Object.keys(oe).map(function(e){return m.a.createElement("option",{key:e,value:e},oe[e])}))},rt=function(e){var t=e.current_value,n=e.onChange;return m.a.createElement("select",{value:t,onChange:function(e){return n(e.target.value)}},m.a.createElement("option",{value:"0"},"default"),m.a.createElement("option",{value:"3"},"top"),m.a.createElement("option",{value:"2"},"middle"),m.a.createElement("option",{value:"1"},"bottom"))},ot=function(e){var t=e.note,n=e.onChange;return m.a.createElement("select",{value:t,onChange:function(e){return n(e.target.value)}},Array.from(Array(127).keys()).map(function(e){var t=Fe.a(e,!0);return m.a.createElement("option",{key:e,value:e},t)}))},ct=function(e){var t,n,a,r=e.index,o=e.config,c=e.updateCallback;return o.msg_type===$?m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"step-row-header"},"Step ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{value:o.msg_type,onChange:function(e){return c("msg_type",null,e.target.value)}},Object.keys(te).map(function(e){return m.a.createElement("option",{key:e,value:e},te[e])}))),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)):(67===o.msg_type||68===o.msg_type?(t=m.a.createElement(ot,{note:o.data[0],onChange:function(e){return c("data",0,e)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=""):(t=m.a.createElement("input",{type:"text",value:o.data[0],onChange:function(e){return c("data",0,e.target.value)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=m.a.createElement("input",{type:"text",value:o.data[2],onChange:function(e){return c("data",2,e.target.value)}})),m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"step-row-header"},"Step ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{value:o.msg_type,onChange:function(e){return c("msg_type",null,e.target.value)}},ne.map(function(e){return m.a.createElement("option",{key:e.key,value:e.key},e.value)}))),m.a.createElement("div",null,t,m.a.createElement("div",{className:"data-help"},re[o.msg_type][0])),m.a.createElement("div",null,n,m.a.createElement("div",{className:"data-help"},re[o.msg_type][1])),m.a.createElement("div",null,a,m.a.createElement("div",{className:"data-help"},re[o.msg_type][2])),m.a.createElement("div",null,m.a.createElement(at,{current_value:o.led_inactive_color,onChange:function(e){return c("led_inactive_color",null,e)}})),m.a.createElement("div",null,m.a.createElement(at,{current_value:o.led_active_color,onChange:function(e){return c("led_active_color",null,e)}})),m.a.createElement("div",null,m.a.createElement(rt,{current_value:o.led_num,onChange:function(e){return c("led_num",null,e)}})),m.a.createElement("div",null,m.a.createElement(nt,{current_value:o.led_midi_ctrl,onChange:function(e){return c("led_midi_ctrl",null,e)}})),m.a.createElement("div",null,m.a.createElement("select",{value:o.channel,onChange:function(e){return c("channel",null,e.target.value)}},Array.from(Array(16).keys()).map(function(e){return m.a.createElement("option",{key:e,value:e},e)})))))},lt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onStepUpdate=function(e,t,a,r){n.props.onUpdate(e,t,a,r)},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props.steps;return m.a.createElement("div",{className:"steps"},m.a.createElement("div",null),m.a.createElement("div",{className:"step-col-header"},"Type"),m.a.createElement("div",{className:"step-col-header"},"Data 1"),m.a.createElement("div",{className:"step-col-header"},"Data 2"),m.a.createElement("div",{className:"step-col-header"},"Data 3"),m.a.createElement("div",{className:"step-col-header"},"LED Off"),m.a.createElement("div",{className:"step-col-header"},"LED On"),m.a.createElement("div",{className:"step-col-header"},"LED Num"),m.a.createElement("div",{className:"step-col-header"},"LED MIDI"),m.a.createElement("div",{className:"step-col-header"},"MIDI Ch."),Object.keys(t).map(function(n){return m.a.createElement(ct,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onStepUpdate(n,t,a,r)}})}))}}]),t}(d.Component),st=n(16),it=(n(22),n(59),function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this;return m.a.createElement("div",{className:"control-mode"},m.a.createElement("span",{className:"step-row-header"},"Control mode:"),m.a.createElement("select",{onChange:function(t){return e.props.onUpdate(t.target.value)},value:this.props.mode},Object.keys(le).map(function(e){return m.a.createElement("option",{key:e,value:e},le[e])})))}}]),t}(d.Component)),ut=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onNameUpdate=function(e){console.log("PresetNameEditor.onSettingUpdate",e.target.value),n.props.onUpdate(e.target.value.length>5?e.target.value.substr(0,5):e.target.value)},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this.props.name;return m.a.createElement("div",{className:"preset-name"},m.a.createElement("p",null,"The preset name is limited to 5 characters."),m.a.createElement("span",{className:"strong"},"Name:")," ",m.a.createElement("input",{value:e,onChange:this.onNameUpdate,size:8}))}}]),t}(d.Component),dt=40;function mt(e){return void 0!==e&&null!==e&&""!==e}var pt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(E.a)(t).call(this,e))).showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.addStatusMessage=function(e,t){n.setState(Object(Be.a)(function(n){var a={type:e,message:t};n.statusMessages.push(a)>dt&&n.statusMessages.shift()}))},n.addInfoMessage=function(e){n.addStatusMessage("info",e)},n.addWarningMessage=function(e){n.addStatusMessage("warning",e)},n.addErrorMessage=function(e){n.addStatusMessage("error",e)},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];console.log("rec sysex"),a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){var t=e.reduce(function(e,t){return e+t.length},0);n.setState(Object(Be.a)(function(n){n.binData=new Uint8Array(t);var a=0,r=!0,o=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=l.value;n.binData.set(i,a),a+=i.length,ge(i)?n.data=ve(n.data||{},be(i)):console.log("MIDI message is not a sysex message")}}catch(u){o=!0,c=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}})),n.addInfoMessage("".concat(e.length," messages received (").concat(t," bytes)")),n.props.onBusy(!1)},1e3),n.onChangeFile=function(e){console.log("onChangeFile",e);var t=e.target.files[0];console.log(t),n.readFiles([t])},n.onInputFile=function(e){console.log("onInputFile",e),n.inputOpenFileRef.current.click()},n.onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){console.log("drop",e),n.setState({data:null,changed:!1,dropZoneActive:!1},function(){n.readFiles(e)})},n.selectPreset=function(e){var t=n.state.data;t&&t[R]&&t[R][e]?n.setState(Object(Be.a)(function(t){t.presetIndex=e})):(n.setState(Object(Be.a)(function(t){t.presetIndex=e,e!==n.state.presetIndex&&(t.data=null,t.changed=!1)})),mt(e)&&n.sendSysex(Ce(e)))},n.selectControl=function(e){mt(n.state.presetIndex)&&e&&n.setState({controlId:e})},n.updateControlStep=function(e,t,a,r,o){var c=parseInt(o,10);n.setState(Object(Be.a)(function(n){"data"===a?n.data[R][n.presetIndex].controls[e].steps[t].data[r]=c:n.data[R][n.presetIndex].controls[e].steps[t][a]=c,"msg_type"===a&&(n.data[R][n.presetIndex].controls[e].steps[t].active=c===$?0:1),n.data[R][n.presetIndex].controls[e].steps[t].changed=!0,n.changed=!0}))},n.updateControlMode=function(e,t){var a=parseInt(t,10);n.setState(Object(Be.a)(function(t){t.data[R][t.presetIndex].controls[e].control_mode=a,t.data[R][t.presetIndex].controls[e].changed=!0,t.changed=!0}))},n.updatePresetName=function(e){void 0!==e&&null!==e&&(e.length>5?console.warn("Presets.updateName: name too long: ".concat(e)):n.setState(Object(Be.a)(function(t){t.data[R][t.presetIndex].name=e,t.data[R][t.presetIndex].changed=!0,t.changed=!0})))},n.onInputConnection=function(e){n.addInfoMessage("input ".concat(De(e)," connected"))},n.onInputDisconnection=function(e){n.addInfoMessage("input ".concat(De(e)," disconnected"))},n.onOutputConnection=function(e){console.log("onOutputConnection"),n.setState(Object(Be.a)(function(t){t.output=e})),n.addInfoMessage("output ".concat(Ae(e)," connected"))},n.onOutputDisconnection=function(e){console.log("onOutputDisconnection"),n.setState(Object(Be.a)(function(e){e.output=null})),n.addInfoMessage("output ".concat(Ae(e)," disconnected"))},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=xe(n.state.output);t?(n.showBusy(),t.sendSysex(D,e)):console.warn("send: output ".concat(n.state.output," not found"))}else console.warn("no output enabled to send the message")},n.updatePacer=function(e){var t=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;n.sendSysex(l)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}n.addInfoMessage("update".concat(e.length>1?"s":""," sent to Pacer"))},n.inputOpenFileRef=m.a.createRef(),n.state={output:null,presetIndex:null,controlId:null,changed:!1,data:null,binData:null,statusMessages:[],dropZoneActive:!1},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"readFiles",value:function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var n=this;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var a;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=5;break}console.warn("readFiles: ".concat(t.name,": file too big, ").concat(t.size)),n.addWarningMessage("file too big"),e.next=13;break;case 5:return n.showBusy(),e.t0=Uint8Array,e.next=9,new Response(t).arrayBuffer();case 9:e.t1=e.sent,ge(a=new e.t0(e.t1))?(n.setState(Object(Be.a)(function(e){e.data=be(a);var t=Object.keys(e.data[R])[0],n=Object.keys(e.data[R][t].controls)[0];e.presetIndex=parseInt(t,10),e.controlId=parseInt(n,10)})),n.addInfoMessage("sysfile decoded")):(n.addWarningMessage("not a sysfile"),console.log("readFiles: not a sysfile",I(a.slice(0,5)))),n.props.onBusy(!1);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.output,a=t.presetIndex,r=t.controlId,o=t.data,c=t.changed,l=t.dropZoneActive,s=!1;o&&(s=!0,R in o||(console.log("Presets: invalid data",o),s=!1),!s||a in o[R]||(s=!1),!s||"controls"in o[R][a]||(s=!1),!s||r in o[R][a].controls||(s=!1),!s||"steps"in o[R][a].controls[r]||(s=!1)),s=s&&6===Object.keys(o[R][a].controls[r].steps).length;var i=[];if(s){i=Ne(a,r,o);var u=we(a,o);u&&i.push(u)}return m.a.createElement(st.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},l&&m.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:"4rem",background:"rgba(0,0,0,0.4)",textAlign:"center",color:"#fff",fontSize:"4rem"}},"Drop sysex file..."),m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"subheader"},m.a.createElement(Ze,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onInputConnection:this.onInputConnection,onInputDisconnection:this.onInputDisconnection,onOutputConnection:this.onOutputConnection,onOutputDisconnection:this.onOutputDisconnection,className:""},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"instructions"},"You can click on a preset to only load this specific preset from the Pacer. ",m.a.createElement("br",null),"Or you can use the ad-hoc button to read ALL the presets from the Pacer. ",m.a.createElement("br",null),"You can also load a patch file or send a dump from the Pacer."),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("h2",null,"Preset:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"selectors"},m.a.createElement($e,{data:o,currentPreset:a,onClick:this.selectPreset}),m.a.createElement("div",{className:"preset-buttons"},n&&m.a.createElement("button",{className:"space-right",onClick:function(){return e.sendSysex(Oe())}},"Read all presets from Pacer"),m.a.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.onChangeFile}),m.a.createElement("button",{onClick:this.onInputFile},"Load preset(s) from file"))),o&&o[R][a]&&m.a.createElement(ut,{name:o[R][a].name,onUpdate:function(t){return e.updatePresetName(t)}}))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Controls"),mt(a)&&m.a.createElement(tt,{currentControl:r,onClick:this.selectControl}),s&&m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(lt,{controlId:r,steps:o[R][a].controls[r].steps,onUpdate:function(t,n,a,o){return e.updateControlStep(r,t,n,a,o)}}),m.a.createElement(it,{controlId:r,mode:o[R][a].controls[r].control_mode,onUpdate:function(t){return e.updateControlMode(r,t)}})))),c&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Send the updated config to the Pacer:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"actions"},m.a.createElement("button",{className:"update",onClick:function(){return e.updatePacer(i)}},"Update Pacer"))))),this.props.debug&&s&&m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("div",{className:"debug"},m.a.createElement("h4",null,"[Debug] Update messages to send:"),m.a.createElement("div",{className:"message-to-send"},i.map(function(e,t){return m.a.createElement("div",{key:t,className:"code"},I(e))})))))))}}]),t}(d.Component),ft=n(28),ht={128:"Note Off",144:"Note On",160:"AfterTouch",176:"Control Change",192:"Program Change",208:"Channel Pressure",224:"Pitch Wheel"},vt={0:"Bank Select (coarse)",1:"Modulation Wheel (coarse)",2:"Breath controller (coarse)",4:"Foot Pedal (coarse)",5:"Portamento Time (coarse)",6:"Data Entry (coarse)",7:"Volume (coarse)",8:"Balance (coarse)",10:"Pan position (coarse)",11:"Expression (coarse)",12:"Effect Control 1 (coarse)",13:"Effect Control 2 (coarse)",16:"General Purpose Slider 1",17:"General Purpose Slider 2",18:"General Purpose Slider 3",19:"General Purpose Slider 4",32:"Bank Select (fine)",33:"Modulation Wheel (fine)",34:"Breath controller (fine)",36:"Foot Pedal (fine)",37:"Portamento Time (fine)",38:"Data Entry (fine)",39:"Volume (fine)",40:"Balance (fine)",42:"Pan position (fine)",43:"Expression (fine)",44:"Effect Control 1 (fine)",45:"Effect Control 2 (fine)",64:"Hold Pedal (on/off)",65:"Portamento (on/off)",66:"Sustenuto Pedal (on/off)",67:"Soft Pedal (on/off)",68:"Legato Pedal (on/off)",69:"Hold 2 Pedal (on/off)",70:"Sound Variation",71:"Sound Timbre",72:"Sound Release Time",73:"Sound Attack Time",74:"Sound Brightness",75:"Sound Control 6",76:"Sound Control 7",77:"Sound Control 8",78:"Sound Control 9",79:"Sound Control 10",80:"General Purpose Button 1 (on/off)",81:"General Purpose Button 2 (on/off)",82:"General Purpose Button 3 (on/off)",83:"General Purpose Button 4 (on/off)",91:"Effects Level",92:"Tremulo Level",93:"Chorus Level",94:"Celeste Level",95:"Phaser Level",96:"Data Button increment",97:"Data Button decrement",98:"Non-registered Parameter (fine)",99:"Non-registered Parameter (coarse)",100:"Registered Parameter (fine)",101:"Registered Parameter (coarse)",120:"All Sound Off",121:"All Controllers Off",122:"Local Keyboard (on/off)",123:"All Notes Off",124:"Omni Mode Off",125:"Omni Mode On",126:"Mono Operation",127:"Poly Operation"},gt=(n(61),40),Et=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={messages:[]},n.handleMidiInputEvent=function(e){n.setState(Object(Be.a)(function(t){t.messages.unshift(e.data)>gt&&t.messages.pop()}))},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"subheader"},m.a.createElement(Ze,{only:".*",autoConnect:".*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer or any other MIDI device to your computer."))),m.a.createElement("div",{className:"content"},m.a.createElement("div",null,m.a.createElement("div",{className:"instructions"},"The messages are displayed in reverse chronological order (the most recent on top). Only the last 40 messages are displayed."),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("h2",null,"MIDI messages"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"messages"},this.state.messages.map(function(e,t){var n=Object(ft.a)(e),a="",r="";switch(n.messageCode){case 128:case 144:a=Fe.a(n.key),r="velocity: ".concat(n.velocity);break;case 160:break;case 176:a=vt[n.controlNumber],r=n.controlValue;break;case 192:a="program: ".concat(n.program),r="";break;case 208:break;case 224:a="bend: ".concat(n.pitchBend),r="multiplier: ".concat(n.pitchBendMultiplier)}return m.a.createElement("div",null,m.a.createElement("span",{className:"code"},"[",I(e),"]"),m.a.createElement("span",{className:"msg-channel"},"Channel ",n.channel),m.a.createElement("span",{className:"msg-name"},ht[n.messageCode]),m.a.createElement("span",{className:"msg-data"},a),m.a.createElement("span",{className:"msg-data"},r))})))))))}}]),t}(d.Component),bt=(n(63),function(){return m.a.createElement("div",{className:"footer"},m.a.createElement("div",{className:"gh"},m.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"Source code available on GitHub")),m.a.createElement("div",null,m.a.createElement("p",null,"This web site is not endorsed by, directly affiliated with, maintained, or sponsored by Nektar Technology. This web site is published under ",m.a.createElement("a",{href:"https://www.gnu.org/licenses/gpl-3.0.en.html",target:"_blank",rel:"noopener noreferrer"},"GNU General Public License v3"),".")))}),yt=function(e){function t(){return Object(h.a)(this,t),Object(g.a)(this,Object(E.a)(t).apply(this,arguments))}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"doc",style:{marginTop:"16px"}},"Sorry, this feature is not implemented yet."))}}]),t}(d.Component),Ot=(n(65),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={data:null},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.setState({data:null,dropZoneActive:!1},function(){n.readFiles(e)})},n.handleMidiInputEvent=function(e){ge(e.data)?n.setState(Object(Be.a)(function(t){t.data=ve(t.data||{},be(e.data))})):console.log("MIDI message is not a sysex message")},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"readFiles",value:function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var n=this;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var a;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=12;break;case 4:return n.showBusy(),e.t0=Uint8Array,e.next=8,new Response(t).arrayBuffer();case 8:e.t1=e.sent,ge(a=new e.t0(e.t1))?n.setState(Object(Be.a)(function(e){e.data=ve(e.data||{},be(a)),n.props.onBusy(!1)})):console.log("readFiles: not a sysfile",I(a.slice(0,5))),n.props.onBusy(!1);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.data,n=e.dropZoneActive;return m.a.createElement(st.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},n&&m.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:"1rem",background:"rgba(0,0,0,0.4)",textAlign:"center",color:"#fff",fontSize:"4rem"}},"Drop sysex file..."),m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"subheader"},m.a.createElement(Ze,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,className:"sub-header"},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"instructions"},"Send a dump from your Pacer or",m.a.createElement("br",null),"drag & drop a patch file here."),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",null,m.a.createElement(He,{data:t})))))))}}]),t}(d.Component)),Ct=(n(67),function(e){var t=e.note,n=e.onChange;return m.a.createElement("select",{onChange:function(e){return n(e.target.value)},value:t},Array.from(Array(127).keys()).map(function(e){var t=Fe.a(e,!0);return m.a.createElement("option",{key:e,value:e},t)}))}),jt=function(e){var t,n,a,r=e.index,o=e.config,c=e.updateCallback;return o.msg_type===$?m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"setting-row-header"},"setting ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},value:o.msg_type},ae.map(function(e){return m.a.createElement("option",{key:e.key,value:e.key},e.value)}))),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null),m.a.createElement("div",null)):(67===o.msg_type?(t=m.a.createElement(Ct,{note:o.data[0],onChange:function(e){return c("data",0,e)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=""):(t=m.a.createElement("input",{type:"text",value:o.data[0],onChange:function(e){return c("data",0,e.target.value)}}),n=m.a.createElement("input",{type:"text",value:o.data[1],onChange:function(e){return c("data",1,e.target.value)}}),a=m.a.createElement("input",{type:"text",value:o.data[2],onChange:function(e){return c("data",2,e.target.value)}})),m.a.createElement(d.Fragment,null,m.a.createElement("div",{className:"setting-row-header"},"Setting ",r,":"),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("msg_type",null,e.target.value)},value:o.msg_type},ae.map(function(e){return m.a.createElement("option",{key:e.key,value:e.key},e.value)}))),m.a.createElement("div",null,t,m.a.createElement("div",{className:"data-help"},re[o.msg_type][0])),m.a.createElement("div",null,n,m.a.createElement("div",{className:"data-help"},re[o.msg_type][1])),m.a.createElement("div",null,a,m.a.createElement("div",{className:"data-help"},re[o.msg_type][2])),m.a.createElement("div",null,m.a.createElement("select",{onChange:function(e){return c("channel",null,e.target.value)},value:o.channel},Array.from(Array(16).keys()).map(function(e){return m.a.createElement("option",{key:e,value:e},e)})))))},Nt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).onSettingUpdate=function(e,t,a,r){n.props.onUpdate(e,t,a,r)},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.props.settings;return m.a.createElement("div",{className:"settings"},m.a.createElement("div",null),m.a.createElement("div",{className:"setting-col-header"},"Type"),m.a.createElement("div",{className:"setting-col-header"},"Data 1"),m.a.createElement("div",{className:"setting-col-header"},"Data 2"),m.a.createElement("div",{className:"setting-col-header"},"Data 3"),m.a.createElement("div",{className:"setting-col-header"},"MIDI Ch."),Object.keys(t).map(function(n){return m.a.createElement(jt,{key:n,index:n,config:t[n],updateCallback:function(t,a,r){return e.onSettingUpdate(n,t,a,r)}})}))}}]),t}(d.Component),wt=40;var kt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={output:null,presetIndex:null,changed:!1,data:null,statusMessages:[]},n.showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.addStatusMessage=function(e,t){n.setState(Object(Be.a)(function(n){var a={type:e,message:t};n.statusMessages.push(a)>wt&&n.statusMessages.shift()}))},n.addInfoMessage=function(e){n.addStatusMessage("info",e)},n.addWarningMessage=function(e){n.addStatusMessage("warning",e)},n.addErrorMessage=function(e){n.addStatusMessage("error",e)},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){n.setState(Object(Be.a)(function(t){var n=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(n=(o=c.next()).done);n=!0){var l=o.value;ge(l)?t.data=ve(t.data||{},be(l)):console.log("MIDI message is not a sysex message")}}catch(i){a=!0,r=i}finally{try{n||null==c.return||c.return()}finally{if(a)throw r}}var s=Object.keys(t.data[R])[0];t.presetIndex=parseInt(s,10)}));var t=e.reduce(function(e,t){return e+t.length},0);n.addInfoMessage("".concat(e.length," messages received (").concat(t," bytes)")),n.props.onBusy(!1)},1e3),n.onChangeFile=function(e){console.log("onChangeFile",e);var t=e.target.files[0];console.log(t),n.readFiles([t])},n.onInputFile=function(e){console.log("onInputFile",e),n.inputOpenFileRef.current.click()},n.onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){console.log("drop",e),n.setState({data:null,changed:!1,dropZoneActive:!1},function(){n.readFiles(e)})},n.selectPreset=function(e){var t,a=n.state.data;a&&a[R]&&a[R][e]?n.setState(Object(Be.a)(function(t){t.presetIndex=e})):(n.setState(Object(Be.a)(function(t){t.presetIndex=e,e!==n.state.presetIndex&&(t.data=null,t.changed=!1)})),void 0!==(t=e)&&null!==t&&""!==t&&n.sendSysex(Ce(e)))},n.updateMidiSettings=function(e,t,a,r){var o=parseInt(r,10);n.setState(Object(Be.a)(function(n){"data"===t?n.data[R][n.presetIndex].midi[e].data[a]=o:n.data[R][n.presetIndex].midi[e][t]=o,"msg_type"===t&&(n.data[R][n.presetIndex].midi[e].active=o===$?0:1),n.data[R][n.presetIndex].midi[e].changed=!0,n.changed=!0}))},n.updatePresetName=function(e){void 0!==e&&null!==e&&(e.length>5?console.warn("PresetMidi.updateName: name too long: ".concat(e)):n.setState(Object(Be.a)(function(t){t.data[R][t.presetIndex].name=e,t.data[R][t.presetIndex].changed=!0,t.changed=!0})))},n.onInputConnection=function(e){n.addInfoMessage("input ".concat(De(e)," connected"))},n.onInputDisconnection=function(e){n.addInfoMessage("input ".concat(De(e)," disconnected"))},n.onOutputConnection=function(e){console.log("onOutputConnection"),n.setState(Object(Be.a)(function(t){t.output=e})),n.addInfoMessage("output ".concat(Ae(e)," connected"))},n.onOutputDisconnection=function(e){console.log("onOutputDisconnection"),n.setState(Object(Be.a)(function(e){e.output=null})),n.addInfoMessage("output ".concat(Ae(e)," disconnected"))},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=xe(n.state.output);t?(n.showBusy(),t.sendSysex(D,e)):console.warn("send: output ".concat(n.state.output," not found"))}else console.warn("no output enabled to send the message")},n.updatePacer=function(e){var t=!0,a=!1,r=void 0;try{for(var o,c=e[Symbol.iterator]();!(t=(o=c.next()).done);t=!0){var l=o.value;n.sendSysex(l)}}catch(s){a=!0,r=s}finally{try{t||null==c.return||c.return()}finally{if(a)throw r}}n.addInfoMessage("update".concat(e.length>1?"s":""," sent to Pacer"))},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"readFiles",value:function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var n=this;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var a;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=5;break}console.warn("readFiles: ".concat(t.name,": file too big, ").concat(t.size)),n.addWarningMessage("file too big"),e.next=13;break;case 5:return n.showBusy(),e.t0=Uint8Array,e.next=9,new Response(t).arrayBuffer();case 9:e.t1=e.sent,ge(a=new e.t0(e.t1))?(n.setState(Object(Be.a)(function(e){e.data=be(a);var t=Object.keys(e.data[R])[0];e.presetIndex=parseInt(t,10)})),n.addInfoMessage("sysfile decoded")):(n.addWarningMessage("not a sysfile"),console.log("readFiles: not a sysfile",I(a.slice(0,5)))),n.props.onBusy(!1);case 13:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.output,a=t.presetIndex,r=t.data,o=t.changed,c=t.dropZoneActive,l=!1;r&&(l=!0,R in r||(console.log("PresetMidi: invalid data",r),l=!1),!l||a in r[R]||(l=!1),!l||"midi"in r[R][a]||(l=!1)),l=l&&16===Object.keys(r[R][a].midi).length;var s=[];if(l){s=ke(a,r);var i=we(a,r);i&&s.push(i)}return m.a.createElement(st.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},c&&m.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:"4rem",background:"rgba(0,0,0,0.4)",textAlign:"center",color:"#fff",fontSize:"4rem"}},"Drop sysex file..."),m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"subheader"},m.a.createElement(Ze,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onInputConnection:this.onInputConnection,onInputDisconnection:this.onInputDisconnection,onOutputConnection:this.onOutputConnection,onOutputDisconnection:this.onOutputDisconnection,className:""},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"instructions"},"You can click on a preset to only load this specific preset from the Pacer. ",m.a.createElement("br",null),"Or you can use the ad-hoc button to read ALL the presets from the Pacer. ",m.a.createElement("br",null),"You can also load a patch file or send a dump from the Pacer."),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("h2",null,"Preset:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"selectors"},m.a.createElement($e,{data:r,currentPreset:a,onClick:this.selectPreset}),m.a.createElement("div",{className:"preset-buttons"},n&&m.a.createElement("button",{className:"space-right",onClick:function(){return e.sendSysex(Oe())}},"Read all presets from Pacer"),m.a.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.onChangeFile}),m.a.createElement("button",{onClick:this.onInputFile},"Load preset(s) from file"))),r&&r[R][a]&&m.a.createElement(ut,{name:r[R][a].name,onUpdate:function(t){return e.updatePresetName(t)}}))),l&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Preset MIDI settings:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement(Nt,{settings:r[R][a].midi,onUpdate:function(t,n,a,r){return e.updateMidiSettings(t,n,a,r)}})))),o&&m.a.createElement("div",{className:"content-row-content"},m.a.createElement(d.Fragment,null,m.a.createElement("h2",null,"Send the updated config to the Pacer:"),m.a.createElement("div",{className:"content-row-content-content"},m.a.createElement("div",{className:"actions"},m.a.createElement("button",{className:"update",onClick:function(){return e.updatePacer(s)}},"Update Pacer"))))),this.props.debug&&l&&m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("div",{className:"debug"},m.a.createElement("h4",null,"[Debug] Update messages to send:"),m.a.createElement("div",{className:"message-to-send"},s.map(function(e,t){return m.a.createElement("div",{key:t,className:"code"},I(e))})))))))}}]),t}(d.Component),St=n(26),It=(n(75),function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){console.log(n.props.data);var t=window.URL.createObjectURL(new Blob([n.props.data],{type:"application/octet-stream"})),a=n.props.filename;if(n.props.addTimestamp){var r=new Date;a+="."+(r.getUTCFullYear()+"-"+("0"+(r.getUTCMonth()+1)).slice(-2)+"-"+("0"+r.getUTCDate()).slice(-2)+"-"+("0"+r.getUTCHours()).slice(-2)+("0"+r.getUTCMinutes()).slice(-2)+("0"+r.getUTCSeconds()).slice(-2))}var o=document.createElement("a");o.download=a+".syx",o.style.display="none",o.href=t,document.body.appendChild(o),o.click(),document.body.removeChild(o),setTimeout(function(){return window.URL.revokeObjectURL(t)},1e3)},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){return m.a.createElement("button",{onClick:this.handleClick,className:this.props.className},this.props.label)}}]),t}(d.Component));var Pt=function(e){function t(e){var n;return Object(h.a)(this,t),(n=Object(g.a)(this,Object(E.a)(t).call(this,e))).showBusy=function(){setTimeout(function(){return n.props.onBusy(!1)},2e4),n.props.onBusy(!0)},n.handleMidiInputEvent=function(e,t){var n,a=[];return function(){clearTimeout(n);var r=arguments[0];a.push(r.data),n=setTimeout(function(){n=null,e(a),a=[]},t)}}(function(e){var t=e.reduce(function(e,t){return e+t.length},0);n.setState(Object(Be.a)(function(n){n.bytes=new Uint8Array(t);var a=0,r=!0,o=!1,c=void 0;try{for(var l,s=e[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var i=l.value;n.bytes.set(i,a),a+=i.length,ge(i)?n.data=ve(n.data||{},be(i)):console.log("MIDI message is not a sysex message")}}catch(u){o=!0,c=u}finally{try{r||null==s.return||s.return()}finally{if(o)throw c}}})),n.props.onBusy(!1)},1e3),n.onChangeFile=function(e){console.log("onChangeFile",e);var t=e.target.files[0];console.log(t),n.readFiles([t])},n.onInputFile=function(e){console.log("onInputFile",e),n.inputOpenFileRef.current.click()},n.onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.setState({data:null,changed:!1,dropZoneActive:!1},function(){n.readFiles(e)})},n.onOutputConnection=function(e){n.setState(Object(Be.a)(function(t){t.output=e}))},n.onOutputDisconnection=function(e){n.setState(Object(Be.a)(function(e){e.output=null}))},n.sendSysex=function(e){if(console.log("sendSysex",e),n.state.output){var t=xe(n.state.output);t?(n.showBusy(),n.setState({data:null},function(){return t.sendSysex(D,e)})):console.warn("send: output ".concat(n.state.output," not found"))}},n.sendMessage=function(e){n.sendSysex(e)},n.updatePacer=function(e){},n.inputOpenFileRef=m.a.createRef(),n.state={output:null,data:null,bytes:null,dropZoneActive:!1},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"readFiles",value:function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var n=this;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(Je.a)(Xe.a.mark(function e(t){var a;return Xe.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=4;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),e.next=12;break;case 4:return n.showBusy(),e.t0=Uint8Array,e.next=8,new Response(t).arrayBuffer();case 8:e.t1=e.sent,ge(a=new e.t0(e.t1))&&n.setState(Object(Be.a)(function(e){e.bytes=a,e.data=ve(e.data||{},be(a)),n.props.onBusy(!1)})),n.props.onBusy(!1);case 12:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=this.state,n=t.data,a=t.output,r=t.dropZoneActive;return m.a.createElement(st.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},r&&m.a.createElement("div",{style:{position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:"4rem",background:"rgba(0,0,0,0.4)",textAlign:"center",color:"#fff",fontSize:"4rem"}},"Drop sysex file..."),m.a.createElement("div",{className:"wrapper"},m.a.createElement("div",{className:"subheader"},m.a.createElement(Ze,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return m.a.createElement(Ve,{groupedPorts:e,clickHandler:t})},onMidiInputEvent:this.handleMidiInputEvent,onOutputConnection:this.onOutputConnection,onOutputDisconnection:this.onOutputDisconnection,className:""},m.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))),m.a.createElement("div",{className:"content"},m.a.createElement("div",{className:"instructions"},"A patch is a full dump of the Pacer."),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("h2",null,"From Pacer"),m.a.createElement("div",null,a&&m.a.createElement("button",{className:"space-right",onClick:function(){return e.sendSysex(Oe())}},"Read patch from Pacer")),m.a.createElement("div",null,n&&m.a.createElement(It,{data:n,filename:"pacer-preset",addTimestamp:!0,className:"small",label:"Download patch"}))),m.a.createElement("div",{className:"content-row-content first"},m.a.createElement("h2",null,"To Pacer"),m.a.createElement("div",null,m.a.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.onChangeFile}),m.a.createElement("button",{onClick:this.onInputFile},"Load patch from file")),m.a.createElement("div",null,n&&m.a.createElement("button",{onClick:function(){return e.updatePacer()}},"Send patch to Pacer"))),m.a.createElement("div",{className:"content-row-content"},m.a.createElement("div",{className:"instructions"},'Presets marked "no data" are ignored. They will NOT erase the preset config in your Pacer.'),m.a.createElement("h2",null,"Patch content:"),m.a.createElement("div",{className:"patch-content"},Array.from(Array(25).keys()).map(function(e){var t=Re(e),a=n&&n[R]&&n[R][e],r=a?n[R][e].name:"";return 0===e?null:m.a.createElement("div",{key:e},m.a.createElement("div",null,t),a?m.a.createElement("div",null,r):m.a.createElement("div",{className:"placeholder"},"no data"))}))))))}}]),t}(d.Component),Mt=function(e){var t=e.label,n=e.to,a=e.activeOnlyWhenExact;return m.a.createElement(y.a,{path:n,exact:a,children:function(e){var a=e.match;return m.a.createElement("div",{className:a?"header-link active":"header-link"},m.a.createElement(O.a,{to:n},t))}})},xt=function(){return m.a.createElement("div",{className:"content home full-width"},m.a.createElement("div",{className:"instructions"},"Invalid URL"))},Dt=function(e){function t(){var e,n;Object(h.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(g.a)(this,(e=Object(E.a)(t)).call.apply(e,[this].concat(r)))).state={busy:!1},n.onBusy=function(e){e!==n.state.busy&&n.setState({busy:e})},n}return Object(b.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.state.busy,n=St.parse(window.location.search),a=!!n.debug&&"1"===n.debug;return m.a.createElement(C.a,null,m.a.createElement("div",{className:"app"},m.a.createElement("header",{className:"header"},m.a.createElement(Mt,{activeOnlyWhenExact:!0,to:"/",label:"Home"}),m.a.createElement(Mt,{to:"/preset",label:"Preset Controls"}),m.a.createElement(Mt,{to:"/presetmidi",label:"Preset Name & MIDI"}),m.a.createElement(Mt,{to:"/global",label:"Global config"}),m.a.createElement(Mt,{to:"/patch",label:"Patch"}),m.a.createElement(Mt,{to:"/monitor",label:"MIDI monitor"}),m.a.createElement(Mt,{to:"/dumpdecoder",label:"Dump decoder"}),a&&m.a.createElement(Mt,{to:"/testsender",label:"Debug"}),!t&&m.a.createElement("div",{className:"spacer"}," "),t&&m.a.createElement("div",{className:"busy"},"please wait..."),m.a.createElement("div",{className:"header-app-name"},"Pacer editor 0.5.1")),m.a.createElement(j.a,null,m.a.createElement(y.a,{exact:!0,path:"/",render:function(e){return m.a.createElement(N,null)}}),m.a.createElement(y.a,{path:"/preset",render:function(t){return m.a.createElement(pt,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{path:"/presetmidi",render:function(t){return m.a.createElement(kt,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{path:"/global",render:function(t){return m.a.createElement(yt,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{path:"/patch",render:function(t){return m.a.createElement(Pt,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{path:"/monitor",render:function(t){return m.a.createElement(Et,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{path:"/dumpdecoder",render:function(t){return m.a.createElement(Ot,{onBusy:e.onBusy,debug:a})}}),a&&m.a.createElement(y.a,{path:"/testsender",render:function(t){return m.a.createElement(qe,{onBusy:e.onBusy,debug:a})}}),m.a.createElement(y.a,{component:xt})),m.a.createElement(bt,null)))}}]),t}(d.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function At(){}console.log=At,console.warn=At,console.error=At,f.a.render(m.a.createElement(Dt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[29,2,1]]]);
//# sourceMappingURL=main.2f85d2f8.chunk.js.map